!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=34)}([function(t,e,n){"use strict";
/*!
 * @pixi/constants - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var i,r,s,o,a,h,u,l,c,d,p,f,m,y,v,g,_;n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return g})),n.d(e,"j",(function(){return p})),n.d(e,"k",(function(){return _})),n.d(e,"l",(function(){return v})),n.d(e,"m",(function(){return r})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return u})),n.d(e,"p",(function(){return l})),n.d(e,"q",(function(){return d})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(i||(i={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(r||(r={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(u||(u={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(l||(l={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(c||(c={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(d||(d={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(p||(p={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(f||(f={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(m||(m={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(y||(y={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(v||(v={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(g||(g={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(_||(_={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return he})),n.d(e,"c",(function(){return pe})),n.d(e,"d",(function(){return ye})),n.d(e,"e",(function(){return ue})),n.d(e,"f",(function(){return U})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return Lt})),n.d(e,"i",(function(){return V})),n.d(e,"j",(function(){return tt})),n.d(e,"k",(function(){return Dt})),n.d(e,"l",(function(){return z})),n.d(e,"m",(function(){return N})),n.d(e,"n",(function(){return re})),n.d(e,"o",(function(){return Bt})),n.d(e,"p",(function(){return Nt})),n.d(e,"q",(function(){return D})),n.d(e,"r",(function(){return Gt})),n.d(e,"s",(function(){return $})),n.d(e,"t",(function(){return le})),n.d(e,"u",(function(){return se})),n.d(e,"v",(function(){return ae})),n.d(e,"w",(function(){return oe}));var i=n(4),r=n(0),s=n(3),o=n(7),a=n(5),h=n(2);
/*!
 * @pixi/core - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
i.b.PREFER_ENV=s.isMobile.any?r.f.WEBGL:r.f.WEBGL2,i.b.STRICT_TEXTURE_CACHE=!1;var u=[];function l(t,e){if(!t)return null;var n="";if("string"==typeof t){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(n=i[1].toLowerCase())}for(var r=u.length-1;r>=0;--r){var s=u[r];if(s.test&&s.test(t,n))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function d(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new o.a("setRealSize"),this.onUpdate=new o.a("update"),this.onError=new o.a("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),f=function(t){function e(e,n){var i=this,r=n||{},s=r.width,o=r.height;if(!s||!o)throw new Error("BufferResource width or height invalid");return(i=t.call(this,s,o)||this).data=e,i}return d(e,t),e.prototype.upload=function(t,e,n){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.a.UNPACK);var s=e.realWidth,o=e.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(e.target,0,0,0,s,o,e.format,e.type,this.data):(n.width=s,n.height=o,i.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(p),m={scaleMode:r.n.NEAREST,format:r.g.RGBA,alphaMode:r.a.NPM},y=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var o=t.call(this)||this,a=(n=n||{}).alphaMode,h=n.mipmap,u=n.anisotropicLevel,c=n.scaleMode,d=n.width,f=n.height,m=n.wrapMode,y=n.format,v=n.type,g=n.target,_=n.resolution,b=n.resourceOptions;return!e||e instanceof p||((e=l(e,b)).internal=!0),o.width=d||0,o.height=f||0,o.resolution=_||i.b.RESOLUTION,o.mipmap=void 0!==h?h:i.b.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==u?u:i.b.ANISOTROPIC_LEVEL,o.wrapMode=m||i.b.WRAP_MODE,o.scaleMode=void 0!==c?c:i.b.SCALE_MODE,o.format=y||r.g.RGBA,o.type=v||r.p.UNSIGNED_BYTE,o.target=g||r.o.TEXTURE_2D,o.alphaMode=void 0!==a?a:r.a.UNPACK,o.uid=Object(s.uid)(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=d>0&&f>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return d(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(s.isPow2)(this.realWidth)&&Object(s.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete s.BaseTextureCache[this.cacheId],delete s.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,r){void 0===r&&(r=i.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var h=n&&n.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+Object(s.uid)()}a=t._pixiId}var u=s.BaseTextureCache[a];if(o&&r&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||((u=new e(t,n)).cacheId=a,e.addToCache(u,a)),u},e.fromBuffer=function(t,n,i,s){t=t||new Float32Array(n*i*4);var o=new f(t,{width:n,height:i}),a=t instanceof Float32Array?r.p.FLOAT:r.p.UNSIGNED_BYTE;return new e(o,Object.assign(m,s||{width:n,height:i,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),s.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete s.BaseTextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(s.EventEmitter),v=function(t){function e(e,n){var i=this,r=n||{},s=r.width,o=r.height;(i=t.call(this,s,o)||this).items=[],i.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new y;i.items.push(h),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return d(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof p?this.addResourceAt(t[n],n):this.addResourceAt(l(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,i=e.realHeight;return t.resize(n,i),Promise.resolve(t)})),this._load},e}(p),g=function(t){function e(e,n){var i,r,s=this,o=n||{},a=o.width,h=o.height;return Array.isArray(e)?(i=e,r=e.length):r=e,s=t.call(this,r,{width:a,height:h})||this,i&&s.initFromArray(i,n),s}return d(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=r.o.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var i=this.length,r=this.itemDirtyIds,s=this.items,o=t.gl;n.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var a=0;a<i;a++){var h=s[a];r[a]<h.dirtyId&&(r[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},e}(v),_=function(t){function e(e){var n=this,i=e,r=i.naturalWidth||i.videoWidth||i.width,s=i.naturalHeight||i.videoHeight||i.height;return(n=t.call(this,r,s)||this).source=e,n.noSubImage=!1,n}return d(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=Object(s.determineCrossOrigin)(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,i){var s=t.gl,o=e.realWidth,a=e.realHeight;return i=i||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.a.UNPACK),this.noSubImage||e.target!==s.TEXTURE_2D||n.width!==o||n.height!==a?(n.width=o,n.height=a,s.texImage2D(e.target,0,e.format,e.format,e.type,i)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(n,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(p),b=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(_),x=function(t){function e(n,i){var s=this,o=i||{},a=o.width,h=o.height,u=o.autoLoad,l=o.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");s=t.call(this,6,{width:a,height:h})||this;for(var c=0;c<e.SIDES;c++)s.items[c].target=r.o.TEXTURE_CUBE_MAP_POSITIVE_X+c;return s.linkBaseTexture=!1!==l,n&&s.initFromArray(n,i),!1!==u&&s.load(),s}return d(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=r.o.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=r.o.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,i){for(var r=this.itemDirtyIds,s=0;s<e.SIDES;s++){var o=this.items[s];r[s]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,i),r[s]=o.dirtyId):r[s]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),r[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(v),A=function(t){function e(e,n){var r=this;if(n=n||{},!(e instanceof HTMLImageElement)){var s=new Image;_.crossOrigin(s,e,n.crossorigin),s.src=e,e=s}return r=t.call(this,e)||this,!e.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=e.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:i.b.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return d(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var i=e.source;e.url=i.src;var r=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,e.createBitmap?t(e.process()):t(e))};i.complete&&i.src?r():(i.onload=r,i.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&self.createImageBitmap?(this._process=self.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===r.a.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,n,i){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,i,this.bitmap),!this.preserveBitmap){var r=!0,s=n._glTextures;for(var o in s){var a=s[o];if(a!==i&&a.dirtyId!==n.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(_),w=function(t){function e(e,n){var i=this;return n=n||{},(i=t.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=e,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,!1!==n.autoLoad&&i.load(),i}return d(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;_.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,i=e.height;if(!n||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=n*t.scale,o=i*t.scale;(t._overrideWidth||t._overrideHeight)&&(r=t._overrideWidth||t._overrideHeight/i*n,o=t._overrideHeight||t._overrideWidth/n*i),r=Math.round(r),o=Math.round(o);var a=t.source;a.width=r,a.height=o,a._pixiId="canvas_"+Object(s.uid)(),a.getContext("2d").drawImage(e,0,0,n,i,0,0,r,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(_),T=function(t){function e(n,i){var r=this;if(i=i||{},!(n instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var o=n[0].src||n[0];_.crossOrigin(s,o,i.crossorigin);for(var a=0;a<n.length;++a){var h=document.createElement("source"),u=n[a],l=u.src,c=u.mime,d=(l=l||n[a]).split("?").shift().toLowerCase(),p=d.substr(d.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,h.src=l,h.type=c,s.appendChild(h)}n=s}return(r=t.call(this,n)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=i.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==i.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==i.autoLoad&&r.load(),r}return d(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=a.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(a.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&a.a.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(a.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(_),E=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(_);u.push(A,E,b,T,w,f,x,g);var S={__proto__:null,Resource:p,BaseImageResource:_,INSTALLED:u,autoDetectResource:l,AbstractMultiResource:v,ArrayResource:g,BufferResource:f,CanvasResource:b,CubeResource:x,ImageResource:A,SVGResource:w,VideoResource:T,ImageBitmapResource:E},I=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.upload=function(t,e,n){var i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.a.UNPACK);var s=e.realWidth,o=e.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(e.target,0,0,0,s,o,e.format,e.type,this.data):(n.width=s,n.height=o,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,s,o,0,e.format,e.type,this.data)),!0},e}(f),C=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new o.a("disposeFramebuffer"),this.multisample=r.k.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new y(null,{scaleMode:r.n.NEAREST,resolution:1,mipmap:r.j.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new y(new O(null,{width:this.width,height:this.height}),{scaleMode:r.n.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:r.j.OFF,format:r.g.DEPTH_COMPONENT,type:r.p.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],r=i.resolution;i.setSize(t/r,e/r)}if(this.depthTexture){r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),P=function(t){function e(e){var n=this;if("number"==typeof e){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];e={width:i,height:r,scaleMode:s,resolution:o}}n=t.call(this,null,e)||this;var a=e||{},h=a.width,u=a.height;return n.mipmap=0,n.width=Math.ceil(h)||100,n.height=Math.ceil(u)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new C(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return d(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(y),M=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var i=e.width,r=e.height;if(n){var s=t.width/2/i,o=t.height/2/r,a=t.x/i+s,u=t.y/r+o;n=h.n.add(n,h.n.NW),this.x0=a+s*h.n.uX(n),this.y0=u+o*h.n.uY(n),n=h.n.add(n,2),this.x1=a+s*h.n.uX(n),this.y1=u+o*h.n.uY(n),n=h.n.add(n,2),this.x2=a+s*h.n.uX(n),this.y2=u+o*h.n.uY(n),n=h.n.add(n,2),this.x3=a+s*h.n.uX(n),this.y3=u+o*h.n.uY(n)}else this.x0=t.x/i,this.y0=t.y/r,this.x1=(t.x+t.width)/i,this.y1=t.y/r,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/r,this.x3=t.x/i,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),R=new M,D=function(t){function e(n,i,r,s,o,a){var u=t.call(this)||this;if(u.noFrame=!1,i||(u.noFrame=!0,i=new h.j(0,0,1,1)),n instanceof e&&(n=n.baseTexture),u.baseTexture=n,u._frame=i,u.trim=s,u.valid=!1,u._uvs=R,u.uvMatrix=null,u.orig=r||i,u._rotate=Number(o||0),!0===o)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=a?new h.g(a.x,a.y):new h.g(0,0),u._updateID=0,u.textureCacheIds=[],n.valid?u.noFrame?n.valid&&u.onBaseTextureUpdated(n):u.frame=i:n.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&n.on("update",u.onBaseTextureUpdated,u),u}return d(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&s.TextureCache[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i},e.prototype.updateUvs=function(){this._uvs===R&&(this._uvs=new M),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=i.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var h=n&&n.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+Object(s.uid)()}a=t._pixiId}var u=s.TextureCache[a];if(o&&r&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return u||(n.resolution||(n.resolution=Object(s.getResolutionOfUrl)(t)),(u=new e(new y(t,n))).baseTexture.cacheId=a,y.addToCache(u.baseTexture,a),e.addToCache(u,a)),u},e.fromURL=function(t,n){var i=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),r=e.from(t,Object.assign({resourceOptions:i},n),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then((function(){return Promise.resolve(r)}))},e.fromBuffer=function(t,n,i,r){return new e(y.fromBuffer(t,n,i,r))},e.fromLoader=function(t,n,r,o){var a=new y(t,Object.assign({scaleMode:i.b.SCALE_MODE,resolution:Object(s.getResolutionOfUrl)(n)},o)),h=a.resource;h instanceof A&&(h.url=n);var u=new e(a);return r||(r=n),y.addToCache(u.baseTexture,r),e.addToCache(u,r),r!==n&&(y.addToCache(u.baseTexture,n),e.addToCache(u,n)),u.baseTexture.valid?Promise.resolve(u):new Promise((function(t){u.baseTexture.once("loaded",(function(){return t(u)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),s.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete s.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)s.TextureCache[t.textureCacheIds[i]]===t&&delete s.TextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,i=t.width,r=t.height,s=e+i>this.baseTexture.width,o=n+r>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,u="Y: "+n+" + "+r+" = "+(n+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=i&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(s.EventEmitter);function B(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}D.EMPTY=new D(new y),B(D.EMPTY),B(D.EMPTY.baseTexture),D.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new D(new y(new b(t)))}(),B(D.WHITE),B(D.WHITE.baseTexture);var N=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return d(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,i=[],r=1;r<arguments.length;r++)i[r-1]=n[r];return"number"==typeof t&&(Object(s.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new P(t))},e}(D),L=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var n=new P(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new N(n)},t.prototype.getOptimalTexture=function(e,n,i){void 0===i&&(i=1);var r=t.SCREEN_KEY;e*=i,n*=i,this.enableFullScreen&&e===this._pixelsWidth&&n===this._pixelsHeight||(r=(65535&(e=Object(s.nextPow2)(e)))<<16|65535&(n=Object(s.nextPow2)(n))),this.texturePool[r]||(this.texturePool[r]=[]);var o=this.texturePool[r].pop();return o||(o=this.createTexture(e,n)),o.filterPoolKey=r,o.setResolution(i),o},t.prototype.getFilterTexture=function(t,e){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var n=t.SCREEN_KEY,i=this.texturePool[n];if(this.enableFullScreen=e.width>0&&e.height>0,i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),F=function(){function t(t,e,n,i,r,s,o){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===i&&(i=5126),this.buffer=t,this.size=e,this.normalized=n,this.type=i,this.stride=r,this.start=s,this.instance=o}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,i,r,s){return new t(e,n,i,r,s)},t}(),G=0,U=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=G++,this.disposeRunner=new o.a("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function k(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var X={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var j={5126:4,5123:2,5121:1},H=0,Y={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},V=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=H++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new o.a("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,i,r,s,o,a){if(void 0===n&&(n=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof U||(e instanceof Array&&(e=new Float32Array(e)),e=new U(e));var h=t.split("|");if(h.length>1){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,n,i,r);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new F(l,n,i,r,s,o,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof U||(t instanceof Array&&(t=new Uint16Array(t)),t=new U(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],i=new U;for(t in this.attributes){var r=this.attributes[t],s=this.buffers[r.buffer];e.push(s.data),n.push(r.size*j[r.type]/4),r.buffer=0}for(i.data=function(t,e){for(var n=0,i=0,r={},s=0;s<t.length;s++)i+=e[s],n+=t[s].length;var o=new ArrayBuffer(4*n),a=null,h=0;for(s=0;s<t.length;s++){var u=e[s],l=t[s],c=k(l);r[c]||(r[c]=new X[c](o)),a=r[c];for(var d=0;d<l.length;d++){a[(d/u|0)*i+h+d%u]=l[d]}h+=u}return new Float32Array(o)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new U(this.buffers[n].data.slice(0));for(var n in this.attributes){var i=this.attributes[n];e.attributes[n]=new F(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var n,i=new t,r=[],s=[],o=[],a=0;a<e.length;a++){n=e[a];for(var h=0;h<n.buffers.length;h++)s[h]=s[h]||0,s[h]+=n.buffers[h].data.length,o[h]=0}for(a=0;a<n.buffers.length;a++)r[a]=new(Y[k(n.buffers[a].data)])(s[a]),i.buffers[a]=new U(r[a]);for(a=0;a<e.length;a++){n=e[a];for(h=0;h<n.buffers.length;h++)r[h].set(n.buffers[h].data,o[h]),o[h]+=n.buffers[h].data.length}if(i.attributes=n.attributes,n.indexBuffer){i.indexBuffer=i.buffers[n.buffers.indexOf(n.indexBuffer)],i.indexBuffer.index=!0;var u=0,l=0,c=0,d=0;for(a=0;a<n.buffers.length;a++)if(n.buffers[a]!==n.indexBuffer){d=a;break}for(var a in n.attributes){var p=n.attributes[a];(0|p.buffer)===d&&(l+=p.size*j[p.type]/4)}for(a=0;a<e.length;a++){var f=e[a].indexBuffer.data;for(h=0;h<f.length;h++)i.indexBuffer.data[h+c]+=u;u+=n.buffers[d].data.length/l,c+=f.length}}return i},t}(),W=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return d(e,t),e}(V),z=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new U(e.vertices),e.uvBuffer=new U(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return d(e,t),e.prototype.map=function(t,e){var n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+e.width/t.width,this.uvs[3]=i,this.uvs[4]=n+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=n,this.uvs[7]=i+e.height/t.height,n=e.x,i=e.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+e.width,this.vertices[3]=i,this.vertices[4]=n+e.width,this.vertices[5]=i+e.height,this.vertices[6]=n,this.vertices[7]=i+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(V),q=0,$=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=q++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,n,i){this.uniforms[e]=new t(n,i)},t.from=function(e,n){return new t(e,n)},t}(),K=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new h.j,this.destinationFrame=new h.j,this.bindingSourceFrame=new h.j,this.bindingDestinationFrame=new h.j,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Z=[new h.g,new h.g,new h.g,new h.g],J=new h.d,Q=function(t){function e(e){var n=t.call(this,e)||this;return n.defaultFilterStack=[{}],n.texturePool=new L,n.texturePool.setScreenSize(e.view),n.statePool=[],n.quad=new W,n.quadUv=new z,n.tempRect=new h.j,n.activeState={},n.globalUniforms=new $({outputFrame:new h.j,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return d(e,t),e.prototype.push=function(t,e){for(var n=this.renderer,i=this.defaultFilterStack,r=this.statePool.pop()||new K,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].padding,h=e[0].autoFit,u=e[0].legacy,l=1;l<e.length;l++){var c=e[l];o=Math.min(o,c.resolution),a=this.useMaxPadding?Math.max(a,c.padding):a+c.padding,h=h&&c.autoFit,u=u||c.legacy}if(1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(r),r.resolution=o,r.legacy=u,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(a),h){var d=this.tempRect.copyFrom(s.sourceFrame);n.projection.transform&&this.transformAABB(J.copyFrom(n.projection.transform).invert(),d),r.sourceFrame.fit(d)}this.roundFrame(r.sourceFrame,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,o),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;var p=this.tempRect;p.x=0,p.y=0,p.width=r.sourceFrame.width,p.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,r.bindingSourceFrame.copyFrom(s.sourceFrame),r.bindingDestinationFrame.copyFrom(s.destinationFrame),r.transform=n.projection.transform,n.projection.transform=null,s.bind(r.renderTexture,r.sourceFrame,p),n.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=s[0]*e.resolution,o[1]=s[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){var h=i.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,u.renderTexture,r.d.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,e.resolution);c.filterFrame=l.filterFrame;var d=0;for(d=0;d<n.length-1;++d){n[d].apply(this,l,c,r.d.CLEAR,e);var p=l;l=c,c=p}n[d].apply(this,l,u.renderTexture,r.d.BLEND,e),this.returnFilterTexture(l),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){void 0===e&&(e=r.d.CLEAR);var n=this.renderer,i=n.renderTexture,s=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&s.stateId||this.forceClear;(e===r.d.CLEAR||e===r.d.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,e,n,i){var s=this.renderer;s.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(r.e.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(r.e.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,i=n.sourceFrame,r=n.destinationFrame,s=e._texture.orig,o=t.set(r.width,0,0,r.height,i.x,i.y),a=e.worldTransform.copyTo(h.d.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,n){return void 0===n&&(n=1),this.texturePool.getOptimalTexture(t,e,n)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,e){var n=Z[0],i=Z[1],r=Z[2],s=Z[3];n.set(e.left,e.top),i.set(e.left,e.bottom),r.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(n,n),t.apply(i,i),t.apply(r,r),t.apply(s,s);var o=Math.min(n.x,i.x,r.x,s.x),a=Math.min(n.y,i.y,r.y,s.y),h=Math.max(n.x,i.x,r.x,s.x),u=Math.max(n.y,i.y,r.y,s.y);e.x=o,e.y=a,e.width=h-o,e.height=u-a},e.prototype.roundFrame=function(t,e,n,i,r){if(r){var s=r.a,o=r.b,a=r.c,h=r.d;if(!(0===o&&0===a||0===s&&0===h))return}(r=r?J.copyFrom(r):J.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(r,t),t.ceil(e),this.transformAABB(r.invert(),t)},e}(I),tt=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),et=function(t){function e(e){var n=t.call(this,e)||this;return n.emptyRenderer=new tt(e),n.currentRenderer=n.emptyRenderer,n}return d(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,i=e-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,e,n,i){for(var r=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=r[h],l=u._batchLocation;if(l>=0&&l<i&&e[l]===u)s[h]=l;else for(;a<i;){var c=e[a];if(!c||c._batchEnabled!==n||c._batchLocation!==a){s[h]=a,u._batchLocation=a,e[a]=u;break}a++}}},e}(I),nt=0,it=function(t){function e(e){var n=t.call(this,e)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),e.view.addEventListener("webglcontextlost",n.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n}return d(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=nt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=nt++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var n;if(i.b.PREFER_ENV>=r.f.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;n&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(I),rt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=r.k.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},st=new h.j,ot=function(t){function e(e){var n=t.call(this,e)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new C(10,10),n.msaaSamples=null,n}return d(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;i.b.PREFER_ENV===r.f.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var n=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++){var s=t.colorTextures[r];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,n,i){var r=this.viewport;r.width===n&&r.height===i&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=n,r.height=i,this.gl.viewport(t,e,n,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,n,i,s){void 0===s&&(s=r.c.COLOR|r.c.DEPTH);var o=this.gl;o.clearColor(t,e,n,i),o.clear(s)},e.prototype.initFramebuffer=function(t){var e=this.gl,n=new rt(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,r=0;r<i.length;r++)this.renderer.texture.bind(i[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),n.multisample>1&&(n.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n.msaaBuffer));for(var r=[],s=0;s<i;s++)if(!(0===s&&n.multisample>1)){var o=t.colorTextures[s],a=o.parentTextureArray||o;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+s,o.target,a._glTextures[this.CONTEXT_UID].texture,0),r.push(e.COLOR_ATTACHMENT0+s)}if((r.length>1&&e.drawBuffers(r),t.depthTexture)&&this.writeDepthTexture){var h=t.depthTexture;this.renderer.texture.bind(h,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}n.stencil||!t.stencil&&!t.depth||(n.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,n=r.k.NONE;if(t<=1||null===e)return n;for(var i=0;i<e.length;i++)if(e[i]<=t){n=e[i];break}return 1===n&&(n=r.k.NONE),n},e.prototype.blit=function(t,e,n){var i=this.current,r=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===r.context.webGLVersion&&i){var a=i.glFramebuffers[o];if(a){if(!t){if(a.multisample<=1)return;a.blitFramebuffer||(a.blitFramebuffer=new C(i.width,i.height),a.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=a.blitFramebuffer).width=i.width,t.height=i.height}e||((e=st).width=i.width,e.height=i.height),n||(n=e);var h=e.width===n.width&&e.height===n.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,a.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(n.framebuffer),n.stencil&&i.deleteRenderbuffer(n.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var n=t.width,i=t.height,r=this.gl,s=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,s),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,n,i),e.stencil=s,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,s)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.j},e}(I),at=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},ht={5126:4,5123:2,5121:1},ut=function(t){function e(e){var n=t.call(this,e)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return d(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;i.b.PREFER_ENV===r.f.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,i,r){return s.drawElementsInstancedANGLE(t,e,n,i,r)},t.drawArraysInstanced=function(t,e,n,i){return s.drawArraysInstancedANGLE(t,e,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},r=!0);var s=i[e.program.id]||this.initGeometryVao(t,e.program,r);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?n.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,n=0;n<t.buffers.length;n++){var i=t.buffers[n],r=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==r.updateID){r.updateID=i._updateID;var s=i.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(s,r.buffer),this._boundBuffer=r,r.byteLength>=i.data.byteLength)e.bufferSubData(s,0,i.data);else{var o=i.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=i.data.byteLength,e.bufferData(s,i.data,o)}}}},e.prototype.checkCompatibility=function(t,e){var n=t.attributes,i=e.attributeData;for(var r in i)if(!n[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},e.prototype.getSignature=function(t,e){var n=t.attributes,i=e.attributeData,r=["g",t.id];for(var s in n)i[s]&&r.push(s);return r.join("-")},e.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0),this.checkCompatibility(t,e);var i=this.gl,r=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a,a;var h=t.buffers,u=t.attributes,l={},c={};for(var d in h)l[d]=0,c[d]=0;for(var d in u)!u[d].size&&e.attributeData[d]?u[d].size=e.attributeData[d].size:u[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),l[u[d].buffer]+=u[d].size*ht[u[d].type];for(var d in u){var p=u[d],f=p.size;void 0===p.stride&&(l[p.buffer]===f*ht[p.type]?p.stride=0:p.stride=l[p.buffer]),void 0===p.start&&(p.start=c[p.buffer],c[p.buffer]+=f*ht[p.type])}a=i.createVertexArray(),i.bindVertexArray(a);for(var m=0;m<h.length;m++){var y=h[m];y._glBuffers[r]||(y._glBuffers[r]=new at(i.createBuffer()),this.managedBuffers[y.id]=y,y.disposeRunner.add(this)),n&&y._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a,a},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(e||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),n){for(var s=0;s<r.length;s++){var o=r[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(r[s],e)}if(!e)for(var a in n)if("g"===a[0]){var h=n[a];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t);e=Object.keys(this.managedBuffers);for(n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var n=this.gl,i=this.CONTEXT_UID,r=t.buffers,s=t.attributes;t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var o=null;for(var a in s){var h=s[a],u=r[h.buffer]._glBuffers[i];if(e.attributeData[a]){o!==u&&(n.bindBuffer(n.ARRAY_BUFFER,u.buffer),o=u);var l=e.attributeData[a].location;if(n.enableVertexAttribArray(l),n.vertexAttribPointer(l,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(l,1)}}}},e.prototype.draw=function(t,e,n,i){var r=this.gl,s=this._activeGeometry;if(s.indexBuffer){var o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?r.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(n||0)*o,i||1):r.drawElements(t,e||s.indexBuffer.data.length,a,(n||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?r.drawArraysInstanced(t,n,e||s.getSize(),i||1):r.drawArrays(t,n,e||s.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(I),lt=function(){function t(t){void 0===t&&(t=null),this.type=r.i.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=r.i.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ct(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function dt(t,e,n,i){var r=ct(t,t.VERTEX_SHADER,e),s=ct(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,s),i)for(var a in i)t.bindAttribLocation(o,i[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(r))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(n),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(r),t.deleteShader(s),o}function pt(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function ft(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return pt(2*e);case"bvec3":return pt(3*e);case"bvec4":return pt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var mt,yt={},vt=yt;function gt(){if(vt===yt||vt&&vt.isContextLost()){var t=document.createElement("canvas"),e=void 0;i.b.PREFER_ENV>=r.f.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),vt=e}return vt}function _t(t,e,n){if("precision"!==t.substring(0,9)){var i=e;return e===r.l.HIGH&&n!==r.l.HIGH&&(i=r.l.MEDIUM),"precision "+i+" float;\n"+t}return n!==r.l.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var bt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function xt(t){return bt[t]}var At=null,wt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Tt(t,e){if(!At){var n=Object.keys(wt);At={};for(var i=0;i<n.length;++i){var r=n[i];At[t[r]]=wt[r]}}return At[e]}var Et=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],St={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},It={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Ot,Ct=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Pt(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var Mt=0,Rt={},Dt=function(){function t(e,n,s){void 0===s&&(s="pixi-shader"),this.id=Mt++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(s=s.replace(/\s+/g,"-"),Rt[s]?(Rt[s]++,s+="-"+Rt[s]):Rt[s]=1,this.vertexSrc="#define SHADER_NAME "+s+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+s+"\n"+this.fragmentSrc,this.vertexSrc=_t(this.vertexSrc,i.b.PRECISION_VERTEX,r.l.HIGH),this.fragmentSrc=_t(this.fragmentSrc,i.b.PRECISION_FRAGMENT,function(){if(!mt){mt=r.l.MEDIUM;var t=gt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);mt=e.precision?r.l.HIGH:r.l.MEDIUM}}return mt}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var n=gt();if(n){var i=dt(n,t,e);this.attributeData=this.getAttributeData(i,n),this.uniformData=this.getUniformData(i,n),n.deleteProgram(i)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var n={},i=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var o=e.getActiveAttrib(t,s),a=Tt(e,o.type),h={type:a,name:o.name,size:xt(a),location:0};n[o.name]=h,i.push(h)}i.sort((function(t,e){return t.name>e.name?1:-1}));for(s=0;s<i.length;s++)i[s].location=s;return n},t.prototype.getUniformData=function(t,e){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;r++){var s=e.getActiveUniform(t,r),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=Tt(e,s.type);n[o]={type:h,size:s.size,isArray:a,value:ft(h,s.size)}}return n},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,i){var r=e+n,o=s.ProgramCache[r];return o||(s.ProgramCache[r]=o=new t(e,n,i)),o},t}(),Bt=function(){function t(t,e){for(var n in this.program=t,this.uniformGroup=e?e instanceof $?e:new $(e):new $({}),t.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var i=e.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,i){return new t(Dt.from(e,n),i)},t}(),Nt=function(){function t(){this.data=0,this.blendMode=r.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==r.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Lt=function(t){function e(n,r,s){var o=this,a=Dt.from(n||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(o=t.call(this,a,s)||this).padding=0,o.resolution=i.b.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Nt,o}return d(e,t),e.prototype.apply=function(t,e,n,i,r){t.applyFilter(this,e,n,i)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Bt),Ft=new h.d,Gt=function(){function t(t,e){this._texture=t,this.mapCoord=new h.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var r=t[i],s=t[i+1];e[i]=r*n.a+s*n.c+n.tx,e[i+1]=r*n.b+s*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=e.orig,r=e.trim;r&&(Ft.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Ft));var s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/s.width,o[1]=(e._frame.y+a+h)/s.height,o[2]=(e._frame.x+e._frame.width-a+h)/s.width,o[3]=(e._frame.y+e._frame.height-a+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0},t}(),Ut=function(t){function e(e){var n=this,i=new h.d;return n=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,n.maskSprite=e,n.maskMatrix=i,n}return d(e,t),e.prototype.apply=function(t,e,n,i){var r=this.maskSprite,s=r._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Gt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,n,i))},e}(Lt),kt=function(t){function e(e){var n=t.call(this,e)||this;return n.enableScissor=!0,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return d(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var i=this.maskDataPool.pop()||new lt;i.pooled=!0,i.maskObject=e,n=i}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case r.i.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case r.i.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case r.i.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case r.i.SCISSOR:this.renderer.scissor.pop();break;case r.i.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case r.i.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=r.i.SPRITE;else if(t.type=r.i.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var n=e.worldTransform,i=Math.atan2(n.b,n.a),s=Math.atan2(n.d,n.c);i=Math.round(i*(180/Math.PI)*100),s=((s=Math.round(s*(180/Math.PI)*100)-i)%18e3+18e3)%18e3,0===(i=(i%9e3+9e3)%9e3)&&9e3===s&&(t.type=r.i.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,n=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Ut(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var r=n.filterArea;n.filterArea=e.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(I),Xt=function(t){function e(e){var n=t.call(this,e)||this;return n.maskStack=[],n.glConst=0,n}return d(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==n&&(0===i?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(I),jt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var n=t._scissorRect,i=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,n?i.fit(n):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,n=this.renderer.projection,i=n.transform,r=n.sourceFrame,s=n.destinationFrame,o=e?e.resolution:this.renderer.resolution,a=s.width/r.width,h=s.height/r.height,u=((t.x-r.x)*a+s.x)*o,l=((t.y-r.y)*h+s.y)*o,c=t.width*a*o,d=t.height*h*o;i&&(u+=i.tx*o,l+=i.ty*o),e||(l=this.renderer.height-d-l),this.renderer.gl.scissor(u,l,c,d)},e}(Xt),Ht=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,i,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),this.renderer.framebuffer.blit(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Xt),Yt=function(t){function e(e){var n=t.call(this,e)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new h.d,n.transform=null,n}return d(e,t),e.prototype.update=function(t,e,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,n,i){var r=this.projectionMatrix,s=i?-1:1;r.identity(),r.a=1/e.width*2,r.d=s*(1/e.height*2),r.tx=-1-e.x*r.a,r.ty=-s-e.y*r.d},e.prototype.setTransform=function(t){},e}(I),Vt=new h.j,Wt=new h.j,zt=function(t){function e(e){var n=t.call(this,e)||this;return n.clearColor=e._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new h.j,n.destinationFrame=new h.j,n.viewportFrame=new h.j,n}return d(e,t),e.prototype.bind=function(t,e,n){void 0===t&&(t=null);var i,r,s,o=this.renderer;this.current=t,t?(s=(i=t.baseTexture).resolution,e||(Vt.width=t.frame.width,Vt.height=t.frame.height,e=Vt),n||(Wt.x=t.frame.x,Wt.y=t.frame.y,Wt.width=e.width,Wt.height=e.height,n=Wt),r=i.framebuffer):(s=o.resolution,e||(Vt.width=o.screen.width,Vt.height=o.screen.height,e=Vt),n||((n=Vt).width=e.width,n.height=e.height));var a=this.viewportFrame;a.x=n.x*s,a.y=n.y*s,a.width=n.width*s,a.height=n.height*s,t||(a.y=o.view.height-(a.y+a.height)),this.renderer.framebuffer.bind(r,a),this.renderer.projection.update(n,e,s,!r),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,r=n.width!==i.width||n.height!==i.height;if(r){var s=this.viewportFrame,o=s.x,a=s.y,h=s.width,u=s.height;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,h,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),r&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(I),qt=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),$t=0,Kt={textureCount:0},Zt=function(t){function e(e){var n=t.call(this,e)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=$t++,n}return d(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Ot)return Ot;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Ot=!0===t({a:"b"},"a","b")}catch(t){Ot=!1}return Ot}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),e||(Kt.textureCount=0,this.syncUniformGroup(t.uniformGroup,Kt)),i},e.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var n=this.getglProgram();t.static&&t.dirtyId===n.uniformGroups[t.id]||(n.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},e.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var i in t.uniforms){var r=e[i];if(r){for(var s=t.uniforms[i],o=!1,a=0;a<Et.length;a++)if(Et[a].test(r,s)){n.push(Et[a].code(i,s)),o=!0;break}if(!o){var h=(1===r.size?St:It)[r.type].replace("location",'ud["'+i+'"].location');n.push('\n            cv = ud["'+i+'"].value;\n            v = uv["'+i+'"];\n            '+h+";")}}else t.uniforms[i].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+i+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var n=t.uniforms,i=[];for(var r in n)i.push(r),e[r]&&i.push(e[r].type);return i.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,n=t.program,i={};for(var r in n.attributeData)i[r]=n.attributeData[r].location;var s=dt(e,n.vertexSrc,n.fragmentSrc,i),o={};for(var r in n.uniformData){var a=n.uniformData[r];o[r]={location:e.getUniformLocation(s,r),value:ft(a.type,a.size)}}var h=new qt(s,o);return n.glPrograms[this.renderer.CONTEXT_UID]=h,h},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(I);var Jt=function(t){function e(e){var n=t.call(this,e)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=r.b.NONE,n._blendEq=!1,n.map=[],n.map[0]=n.setBlend,n.map[1]=n.setOffset,n.map[2]=n.setCullFace,n.map[3]=n.setDepthTest,n.map[4]=n.setFrontFace,n.map[5]=n.setDepthMask,n.checks=[],n.defaultState=new Nt,n.defaultState.blend=!0,n}return d(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[r.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.ADD]=[t.ONE,t.ONE],e[r.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.NONE]=[0,0],e[r.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[r.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[r.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[r.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[r.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[r.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[r.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[r.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[r.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[r.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}(I),Qt=function(t){function e(e){var n=t.call(this,e)||this;return n.count=0,n.checkCount=0,n.maxIdle=i.b.GC_MAX_IDLE,n.checkCountMax=i.b.GC_MAX_CHECK_COUNT,n.mode=i.b.GC_MODE,n}return d(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==r.h.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,i=0;i<e.length;i++){var r=e[i];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[i]=null,n=!0)}if(n){var s=0;for(i=0;i<e.length;i++)null!==e[i]&&(e[s++]=e[i]);e.length=s}},e.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e}(I),te=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},ee=function(t){function e(e){var n=t.call(this,e)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new y,n}return d(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new te(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new te(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<n.length;i++)n[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[i]=null)},e.prototype.initTexture=function(t){var e=new te(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var n=this.renderer.gl;t.type===n.FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA32F),t.type===r.p.HALF_FLOAT&&(e.type=n.HALF_FLOAT),e.type===n.HALF_FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e));else{var i=t.realWidth,r=t.realHeight,s=n.gl;(e.width!==i||e.height!==r||e.dirtyId<0)&&(e.width=i,e.height=r,s.texImage2D(t.target,0,e.internalFormat,i,r,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);-1!==i&&Object(s.removeItems)(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==r.j.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=r.q.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==r.j.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===r.n.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===r.n.LINEAR){var s=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===r.n.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===r.n.LINEAR?n.LINEAR:n.NEAREST)},e}(I),ne={__proto__:null,FilterSystem:Q,BatchSystem:et,ContextSystem:it,FramebufferSystem:ot,GeometrySystem:ut,MaskSystem:kt,ScissorSystem:jt,StencilSystem:Ht,ProjectionSystem:Yt,RenderTextureSystem:zt,ShaderSystem:Zt,StateSystem:Jt,TextureGCSystem:Qt,TextureSystem:ee},ie=new h.d,re=function(t){function e(n){var i=t.call(this,r.m.WEBGL,n)||this;return n=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new o.a("destroy"),contextChange:new o.a("contextChange"),reset:new o.a("reset"),update:new o.a("update"),postrender:new o.a("postrender"),prerender:new o.a("prerender"),resize:new o.a("resize")},i.globalUniforms=new $({projectionMatrix:new h.d},!0),i.addSystem(kt,"mask").addSystem(it,"context").addSystem(Jt,"state").addSystem(Zt,"shader").addSystem(ee,"texture").addSystem(ut,"geometry").addSystem(ot,"framebuffer").addSystem(jt,"scissor").addSystem(Ht,"stencil").addSystem(Yt,"projection").addSystem(Qt,"textureGC").addSystem(Q,"filter").addSystem(zt,"renderTexture").addSystem(et,"batch"),i.initPlugins(e.__plugins),n.context?i.context.initFromContext(n.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:n.antialias,premultipliedAlpha:i.useContextAlpha&&"notMultiplied"!==i.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Object(s.sayHello)(2===i.context.webGLVersion?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return d(e,t),e.create=function(t){if(Object(s.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var i in this[e]=n,this.runners)this.runners[i].add(n);return this},e.prototype.render=function(t,e){var n,i,r,o;if(e&&(e instanceof N?(Object(s.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),n=e,i=arguments[2],r=arguments[3],o=arguments[4]):(n=e.renderTexture,i=e.clear,r=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(n||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(e,n)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Object(s.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(function(t){function e(e,n){void 0===e&&(e=r.m.UNKNOWN);var o=t.call(this)||this;return n=Object.assign({},i.b.RENDER_OPTIONS,n),o.options=n,o.type=e,o.screen=new h.j(0,0,n.width,n.height),o.view=n.view||document.createElement("canvas"),o.resolution=n.resolution||i.b.RESOLUTION,o.useContextAlpha=n.useContextAlpha,o.autoDensity=!!n.autoDensity,o.preserveDrawingBuffer=n.preserveDrawingBuffer,o.clearBeforeRender=n.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=n.backgroundColor||o._backgroundColor,o.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(Object(s.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=n.transparent,o.backgroundAlpha=n.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return d(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,n,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);var r=N.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:n});return ie.tx=-i.x,ie.ty=-i.y,this.render(t,{renderTexture:r,clear:!1,transform:ie,skipUpdateTransform:!!t.parent}),r},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=r.m.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Object(s.hex2string)(t),Object(s.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(s.EventEmitter));function se(t){return re.create(t)}var oe="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ae="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",he=function(){this.texArray=null,this.blend=0,this.type=r.e.TRIANGLES,this.start=0,this.size=0,this.data=null},ue=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),le=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),ce=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Nt.for2d(),n.size=4*i.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return d(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;i.b.PREFER_ENV===r.f.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),i.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var i=Ct.replace(/%forloop%/gi,Pt(t));if(e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,i=this.size/4,r=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new he);for(;n.length<r;)n.push(new ue);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,i=e._textureArrayPool,r=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++y._globalBatch,h=0,u=i[0],l=0;r.copyBoundTextures(s,n);for(var c=0;c<this._bufferSize;++c){var d=t[c];t[c]=null,d._batchEnabled!==a&&(u.count>=n&&(r.boundArray(u,s,a,n),this.buildDrawCalls(u,l,c),l=c,u=i[++h],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(r.boundArray(u,s,a,n),this.buildDrawCalls(u,l,this._bufferSize),++h,++a);for(c=0;c<s.length;c++)s[c]=null;y._globalBatch=a},e.prototype.buildDrawCalls=function(t,n,i){var r=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,h=this.vertexSize,u=e._drawCallPool,l=this._dcIndex,c=this._aIndex,d=this._iIndex,p=u[l];p.start=this._iIndex,p.texArray=t;for(var f=n;f<i;++f){var m=r[f],y=m._texture.baseTexture,v=s.premultiplyBlendMode[y.alphaMode?1:0][m.blendMode];r[f]=null,n<f&&p.blend!==v&&(p.size=d-p.start,n=f,(p=u[++l]).texArray=t,p.start=d),this.packInterleavedGeometry(m,o,a,c,d),c+=m.vertexData.length/2*h,d+=m.indices.length,p.blend=v}n<i&&(p.size=d-p.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;i.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,i=n.gl,r=n.state,s=e._drawCallPool,o=null,a=0;a<t;a++){var h=s[a],u=h.texArray,l=h.type,c=h.size,d=h.start,p=h.blend;o!==u&&(o=u,this.bindAndClearTexArray(u)),this.state.blendMode=p,r.set(this.state),i.drawElements(l,c,i.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),i.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(s.nextPow2)(Math.ceil(t/8)),n=Object(s.log2)(e),i=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new le(i*this.vertexSize*4)),r},e.prototype.getIndexBuffer=function(t){var e=Object(s.nextPow2)(Math.ceil(t/12)),n=Object(s.log2)(e),i=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var r=this._iBuffers[n];return r||(this._iBuffers[n]=r=new Uint16Array(i)),r},e.prototype.packInterleavedGeometry=function(t,e,n,i,r){for(var o=e.uint32View,a=e.float32View,h=i/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?Object(s.premultiplyTint)(t._tintRGB,p):t._tintRGB+(255*p<<24),m=0;m<c.length;m+=2)a[i++]=c[m],a[i++]=c[m+1],a[i++]=u[m],a[i++]=u[m+1],o[i++]=f,a[i++]=d;for(m=0;m<l.length;m++)n[r++]=h+l[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(tt),de=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=$.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Dt(this.vertexSrc,i)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.d,default:this.defaultGroupCache[t]};return new Bt(this.programCache[t],r)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),pe=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new U(null,e,!1),n._indexBuffer=new U(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,r.p.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,r.p.FLOAT).addAttribute("aColor",n._buffer,4,!0,r.p.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,r.p.FLOAT).addIndex(n._indexBuffer),n}return d(e,t),e}(V),fe="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",me="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ye=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:fe,fragment:me,geometryClass:pe,vertexSize:6},t),n=e.vertex,i=e.fragment,r=e.vertexSize,s=e.geometryClass;return function(t){function e(e){var o=t.call(this,e)||this;return o.shaderGenerator=new de(n,i),o.geometryClass=s,o.vertexSize=r,o}return d(e,t),e}(ce)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return fe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return me},enumerable:!1,configurable:!0}),t}().create(),ve={},ge=function(t){Object.defineProperty(ve,t,{get:function(){return Object(s.deprecation)("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),S[t]}})};for(var _e in S)ge(_e);var be={},xe=function(t){Object.defineProperty(be,t,{get:function(){return Object(s.deprecation)("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),ne[t]}})};for(var _e in ne)xe(_e)},function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return s})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return i})),n.d(e,"m",(function(){return w})),n.d(e,"n",(function(){return A}));
/*!
 * @pixi/math - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var i,r=2*Math.PI,s=180/Math.PI,o=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(i||(i={}));var a=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=i.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=i,this.height=Math.max(r-i,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=i-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=i,this.height=r-i,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),h=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=i.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,r=this.y-e;return(i*=i)+(r*=r)<=n},t.prototype.getBounds=function(){return new a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),u=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=n,this.height=r,this.type=i.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(e-this.y)/this.height;return(n*=n)+(i*=i)<=1},t.prototype.getBounds=function(){return new a(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),l=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){for(var s=[],o=0,a=r.length;o<a;o++)s.push(r[o].x,r[o].y);r=s}this.points=r,this.type=i.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,i=this.points.length/2,r=0,s=i-1;r<i;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],u=this.points[2*s+1];a>e!=u>e&&t<(e-a)/(u-a)*(h-o)+o&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),c=function(){function t(t,e,n,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=20),this.x=t,this.y=e,this.width=n,this.height=r,this.radius=s,this.type=i.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),i=e-(this.y+this.radius),r=this.radius*this.radius;if(n*n+i*i<=r)return!0;if((n=t-(this.x+this.width-this.radius))*n+i*i<=r)return!0;if(n*n+(i=e-(this.y+this.height-this.radius))*i<=r)return!0;if((n=t-(this.x+this.radius))*n+i*i<=r)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),d=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),p=function(){function t(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),this._x=n,this._y=i,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t,e,n,i,r,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,i,r,s){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new d;var n=t.x,i=t.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new d;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,r=t.y;return e.x=this.d*n*i+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*r+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.c,s=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=r*e-this.d*n,this.d=r*n+this.d*e,this.tx=s*e-this.ty*n,this.ty=s*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,i=this.c,r=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*n+t.b*r,this.c=t.c*e+t.d*i,this.d=t.c*n+t.d*r,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,n,i,r,s,o,a,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(n*this.a+i*this.c),this.ty=e-(n*this.b+i*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,i=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-i,s),h=Math.atan2(n,e),u=Math.abs(a+h);return u<1e-5||Math.abs(r-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(i*i+s*s),t.position.x=this.tx+(o.x*e+o.y*i),t.position.y=this.ty+(o.x*n+o.y*s),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,s=t*i-e*n;return this.a=i/s,this.b=-e/s,this.c=-n/s,this.d=t/s,this.tx=(n*this.ty-i*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),m=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],y=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],v=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],g=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],_=[],b=[],x=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];_.push(e);for(var n=0;n<16;n++)for(var i=x(m[t]*m[n]+v[t]*y[n]),r=x(y[t]*m[n]+g[t]*y[n]),s=x(m[t]*v[n]+v[t]*g[n]),o=x(y[t]*v[n]+g[t]*g[n]),a=0;a<16;a++)if(m[a]===i&&y[a]===r&&v[a]===s&&g[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new f;h.set(m[t],y[t],v[t],g[t],0,0),b.push(h)}}();var A={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return m[t]},uY:function(t){return y[t]},vX:function(t){return v[t]},vY:function(t){return g[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return _[t][e]},sub:function(t,e){return _[t][A.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?A.S:A.N:2*Math.abs(e)<=Math.abs(t)?t>0?A.E:A.W:e>0?t>0?A.SE:A.SW:t>0?A.NE:A.NW},matrixAppendRotationInv:function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=b[A.inv(e)];r.tx=n,r.ty=i,t.append(r)}},w=function(){function t(){this.worldTransform=new f,this.localTransform=new f,this.position=new p(this.onChange,this,0,0),this.scale=new p(this.onChange,this,1,1),this.pivot=new p(this.onChange,this,0,0),this.skew=new p(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"BaseTextureCache",(function(){return X})),n.d(e,"CanvasRenderTarget",(function(){return Y})),n.d(e,"DATA_URI",(function(){return z})),n.d(e,"ProgramCache",(function(){return U})),n.d(e,"TextureCache",(function(){return k})),n.d(e,"clearTextureCache",(function(){return H})),n.d(e,"correctBlendMode",(function(){return A})),n.d(e,"createIndicesForQuads",(function(){return S})),n.d(e,"decomposeDataUri",(function(){return q})),n.d(e,"deprecation",(function(){return G})),n.d(e,"destroyTextureCache",(function(){return j})),n.d(e,"determineCrossOrigin",(function(){return $})),n.d(e,"getBufferType",(function(){return I})),n.d(e,"getResolutionOfUrl",(function(){return K})),n.d(e,"hex2rgb",(function(){return v})),n.d(e,"hex2string",(function(){return g})),n.d(e,"interleaveTypedArrays",(function(){return C})),n.d(e,"isPow2",(function(){return M})),n.d(e,"isWebGLSupported",(function(){return m})),n.d(e,"log2",(function(){return R})),n.d(e,"nextPow2",(function(){return P})),n.d(e,"premultiplyBlendMode",(function(){return x})),n.d(e,"premultiplyRgba",(function(){return w})),n.d(e,"premultiplyTint",(function(){return T})),n.d(e,"premultiplyTintToRgba",(function(){return E})),n.d(e,"removeItems",(function(){return D})),n.d(e,"rgb2hex",(function(){return b})),n.d(e,"sayHello",(function(){return f})),n.d(e,"sign",(function(){return B})),n.d(e,"skipHello",(function(){return p})),n.d(e,"string2hex",(function(){return _})),n.d(e,"trimCanvas",(function(){return V})),n.d(e,"uid",(function(){return L})),n.d(e,"url",(function(){return l}));var i=n(4);n.d(e,"isMobile",(function(){return i.a}));var r=n(16),s=n.n(r);n.d(e,"EventEmitter",(function(){return s.a}));var o=n(17),a=n.n(o);n.d(e,"earcut",(function(){return a.a}));var h=n(13),u=n(0),l={parse:h.parse,format:h.format,resolve:h.resolve};i.b.RETINA_PREFIX=/@([0-9\.]+)x/,i.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var c,d=!1;function p(){d=!0}function f(t){var e;if(!d){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.0.2 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,n)}else self.console&&self.console.log("PixiJS 6.0.2 - "+t+" - http://www.pixijs.com/");d=!0}}function m(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:i.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil);if(n){var s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,r}catch(t){return!1}}()),c}var y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function v(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function g(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function _(t){return"string"==typeof t&&"#"===(t=y[t.toLowerCase()]||t)[0]&&(t=t.substr(1)),parseInt(t,16)}function b(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var x=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[u.b.NORMAL_NPM]=u.b.NORMAL,t[u.b.ADD_NPM]=u.b.ADD,t[u.b.SCREEN_NPM]=u.b.SCREEN,e[u.b.NORMAL]=u.b.NORMAL_NPM,e[u.b.ADD]=u.b.ADD_NPM,e[u.b.SCREEN]=u.b.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();function A(t,e){return x[e?1:0][t]}function w(t,e,n,i){return n=n||new Float32Array(4),i||void 0===i?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function T(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,i=t>>8&255,r=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(r=r*e+.5|0)}function E(t,e,n,i){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(i||void 0===i)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function S(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var i=0,r=0;i<n;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}function I(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var O={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function C(t,e){for(var n=0,i=0,r={},s=0;s<t.length;s++)i+=e[s],n+=t[s].length;var o=new ArrayBuffer(4*n),a=null,h=0;for(s=0;s<t.length;s++){var u=e[s],l=t[s],c=I(l);r[c]||(r[c]=new O[c](o)),a=r[c];for(var d=0;d<l.length;d++){a[(d/u|0)*i+h+d%u]=l[d]}h+=u}return new Float32Array(o)}function P(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function M(t){return!(t&t-1||!t)}function R(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}function D(t,e,n){var i,r=t.length;if(!(e>=r||0===n)){var s=r-(n=e+n>r?r-e:n);for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}}function B(t){return 0===t?0:t<0?-1:1}var N=0;function L(){return++N}var F={};function G(t,e,n){if(void 0===n&&(n=3),!F[e]){var i=(new Error).stack;void 0===i?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),F[e]=!0}}var U={},k=Object.create(null),X=Object.create(null);function j(){var t;for(t in k)k[t].destroy();for(t in X)X[t].destroy()}function H(){var t;for(t in k)delete k[t];for(t in X)delete X[t]}var Y=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||i.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function V(t){var e,n,i,r=t.width,s=t.height,o=t.getContext("2d"),a=o.getImageData(0,0,r,s).data,h=a.length,u={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(n=e/4%r,i=~~(e/4/r),null===u.top&&(u.top=i),(null===u.left||n<u.left)&&(u.left=n),(null===u.right||u.right<n)&&(u.right=n+1),(null===u.bottom||u.bottom<i)&&(u.bottom=i));return null!==u.top&&(r=u.right-u.left,s=u.bottom-u.top+1,l=o.getImageData(u.left,u.top,r,s)),{height:s,width:r,data:l}}var W,z=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function q(t){var e=z.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function $(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,W||(W=document.createElement("a")),W.href=t;var n=l.parse(W.href),i=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&i&&n.protocol===e.protocol?"":"anonymous"}function K(t,e){var n=i.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}},function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return b}));var i=/iPhone/i,r=/iPod/i,s=/iPad/i,o=/\biOS-universal(?:.+)Mac\b/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,u=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,c=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,y=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,g=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var _=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,_=n.split("[FBAN");void 0!==_[1]&&(n=_[0]),void 0!==(_=n.split("Twitter"))[1]&&(n=_[0]);var b=function(t){return function(e){return e.test(t)}}(n),x={apple:{phone:b(i)&&!b(c),ipod:b(r),tablet:!b(i)&&(b(s)||g(e))&&!b(c),universal:b(o),device:(b(i)||b(r)||b(s)||b(o)||g(e))&&!b(c)},amazon:{phone:b(u),tablet:!b(u)&&b(l),device:b(u)||b(l)},android:{phone:!b(c)&&b(u)||!b(c)&&b(a),tablet:!b(c)&&!b(u)&&!b(a)&&(b(l)||b(h)),device:!b(c)&&(b(u)||b(l)||b(a)||b(h))||b(/\bokhttp\b/i)},windows:{phone:b(c),tablet:b(d),device:b(c)||b(d)},other:{blackberry:b(p),blackberry10:b(f),opera:b(m),firefox:b(v),chrome:b(y),device:b(p)||b(f)||b(m)||b(v)||b(y)},any:!1,phone:!1,tablet:!1};return x.any=x.apple.device||x.android.device||x.windows.device||x.other.device,x.phone=x.apple.phone||x.android.phone||x.windows.phone,x.tablet=x.apple.tablet||x.android.tablet||x.windows.tablet,x}(self.navigator);var b={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(_.tablet||_.phone){var n;if(_.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(e=!1);if(_.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:_.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!_.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i}));var i,r=n(4);
/*!
 * @pixi/ticker - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */r.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(i||(i={}));var s=function(){function t(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=i}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),o=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new s(null,null,1/0),this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=i.NORMAL),this._addListener(new s(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=i.NORMAL),this._addListener(new s(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,i.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?o.shared:new o,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return I})),n.d(e,"c",(function(){return C}));var i=n(14),r=n.n(i),s=n(8),o=n.n(s);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function a(){}function h(t,e,n,i){var r=0,s=t.length;!function o(a){a||r===s?n&&n(a):i?setTimeout((function(){e(t[r++],o)}),1):e(t[r++],o)}()}function u(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function l(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var n=0,i={_tasks:[],concurrency:e,saturated:a,unsaturated:a,buffer:e/4,empty:a,drain:a,error:a,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){n=0,i.drain=a,i.started=!1,i._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!i.paused&&n<i.concurrency&&i._tasks.length;){var e=i._tasks.shift();0===i._tasks.length&&i.empty(),(n+=1)===i.concurrency&&i.saturated(),t(e.data,u(s(e)))}},length:function(){return i._tasks.length},running:function(){return n},idle:function(){return i._tasks.length+n===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function r(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var r={data:t,callback:"function"==typeof n?n:a};e?i._tasks.unshift(r):i._tasks.push(r),setTimeout((function(){return i.process()}),1)}}function s(t){return function(){n-=1,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),n<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}var c={};function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}var f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),m=null;function y(){}var v=function(){function t(e,n,i){if("string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=y,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.a,this.onProgress=new o.a,this.onComplete=new o.a,this.onAfterMiddleware=new o.a}t.setExtensionLoadType=function(e,n){g(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){g(t._xhrTypeMap,e,n)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(n)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=n,i},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(_(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(_(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(_(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,n="",i=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===i&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=200:1223===i&&(i=204),2===(i/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(n,"text/xml")}else{var s=document.createElement("div");s.innerHTML=n,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,m||(m=document.createElement("a")),m.href=t;var n=!(t=r()(m.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&i===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?"),r=t.indexOf("#"),s=Math.min(i>-1?i:t.length,r>-1?r:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},p(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function g(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function _(t){return t.toString().replace("object ","")}v.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},v.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},v.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},v.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},v._loadTypeMap={gif:v.LOAD_TYPE.IMAGE,png:v.LOAD_TYPE.IMAGE,bmp:v.LOAD_TYPE.IMAGE,jpg:v.LOAD_TYPE.IMAGE,jpeg:v.LOAD_TYPE.IMAGE,tif:v.LOAD_TYPE.IMAGE,tiff:v.LOAD_TYPE.IMAGE,webp:v.LOAD_TYPE.IMAGE,tga:v.LOAD_TYPE.IMAGE,svg:v.LOAD_TYPE.IMAGE,"svg+xml":v.LOAD_TYPE.IMAGE,mp3:v.LOAD_TYPE.AUDIO,ogg:v.LOAD_TYPE.AUDIO,wav:v.LOAD_TYPE.AUDIO,mp4:v.LOAD_TYPE.VIDEO,webm:v.LOAD_TYPE.VIDEO},v._xhrTypeMap={xhtml:v.XHR_RESPONSE_TYPE.DOCUMENT,html:v.XHR_RESPONSE_TYPE.DOCUMENT,htm:v.XHR_RESPONSE_TYPE.DOCUMENT,xml:v.XHR_RESPONSE_TYPE.DOCUMENT,tmx:v.XHR_RESPONSE_TYPE.DOCUMENT,svg:v.XHR_RESPONSE_TYPE.DOCUMENT,tsx:v.XHR_RESPONSE_TYPE.DOCUMENT,gif:v.XHR_RESPONSE_TYPE.BLOB,png:v.XHR_RESPONSE_TYPE.BLOB,bmp:v.XHR_RESPONSE_TYPE.BLOB,jpg:v.XHR_RESPONSE_TYPE.BLOB,jpeg:v.XHR_RESPONSE_TYPE.BLOB,tif:v.XHR_RESPONSE_TYPE.BLOB,tiff:v.XHR_RESPONSE_TYPE.BLOB,webp:v.XHR_RESPONSE_TYPE.BLOB,tga:v.XHR_RESPONSE_TYPE.BLOB,json:v.XHR_RESPONSE_TYPE.JSON,text:v.XHR_RESPONSE_TYPE.TEXT,txt:v.XHR_RESPONSE_TYPE.TEXT,ttf:v.XHR_RESPONSE_TYPE.BUFFER,otf:v.XHR_RESPONSE_TYPE.BUFFER},v.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var b=window.URL||window.webkitURL;var x={caching:function(t,e){var n=this;c[t.url]?(t.data=c[t.url],t.complete()):t.onComplete.once((function(){return c[n.url]=n.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===v.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=b.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=v.TYPE.IMAGE,void(t.data.onload=function(){b.revokeObjectURL(n),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var i=[0,0,0],r=[0,0,0,0],s=0;s<i.length;++s)n<t.length?i[s]=255&t.charCodeAt(n++):i[s]=0;switch(r[0]=i[0]>>2,r[1]=(3&i[0])<<4|i[1]>>4,r[2]=(15&i[1])<<2|i[2]>>6,r[3]=63&i[2],n-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var o=0;o<r.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[o])}return e}(t.xhr.responseText),t.type=v.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},A=/(#[\w-]+)?$/,w=function(){function t(e,n){var i=this;void 0===e&&(e=""),void 0===n&&(n=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=l(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new o.a,this.onError=new o.a,this.onLoad=new o.a,this.onStart=new o.a,this.onComplete=new o.a;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}var e=t.prototype;return e.add=function(t,e,n,i){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(i=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new v(t,e,n),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var s=n.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,n=r()(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=A.exec(e)[0];-1!==(e=e.substr(0,e.length-i.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=i}return e},e._loadResource=function(t,e){var n=this;t._dequeue=e,h(this._beforeMiddleware,(function(e,i){e.call(n,t,(function(){i(t.isComplete?{}:null)}))}),(function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),h(this._afterMiddleware,(function(n,i){n.call(e,t,i)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},p(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();w._defaultBeforeMiddleware=[],w._defaultAfterMiddleware=[],w.pre=function(t){return w._defaultBeforeMiddleware.push(t),w},w.use=function(t){return w._defaultAfterMiddleware.push(t),w};var T=n(1),E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*!
 * @pixi/loaders - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var S=function(){function t(){}return t.add=function(){v.setExtensionLoadType("svg",v.LOAD_TYPE.XHR),v.setExtensionXhrType("svg",v.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==v.TYPE.IMAGE&&"svg"!==t.extension)e();else{var n=t.data,i=t.url,r=t.name,s=t.metadata;T.q.fromLoader(n,i,r,s).then((function(n){t.texture=n,e()})).catch(e)}},t}(),I=function(t){function e(n,i){for(var r=t.call(this,n,i)||this,s=0;s<e._plugins.length;++s){var o=e._plugins[s],a=o.pre,h=o.use;a&&r.pre(a),h&&r.use(h)}return r._protected=!1,r}return function(t,e){function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(w);I.registerPlugin({use:x.parsing}),I.registerPlugin(S);var O=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?I.shared:new I},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),C=v},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));
/*!
 * @pixi/runner - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var i=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,i,r,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,u=h.name,l=h.items;this._aliasCount++;for(var c=0,d=l.length;c<d;c++)l[c][u](t,e,n,i,r,s,o,a);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(i.prototype,{dispatch:{value:i.prototype.emit},run:{value:i.prototype.emit}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,n,i){void 0===n&&(n=!1),r(this,t),this._fn=e,this._once=n,this._thisArg=i,this._next=this._prev=this._owner=null}return i(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function o(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){r(this,t),this._head=this._tail=void 0}return i(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return o(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return o(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=s,e.default=a,t.exports=e.default},function(t,e){function n(t,e,n){n=n||0;var i,r,s,o,a,h,u,l=[0,0];return i=t[1][1]-t[0][1],r=t[0][0]-t[1][0],s=i*t[0][0]+r*t[0][1],o=e[1][1]-e[0][1],a=e[0][0]-e[1][0],h=o*e[0][0]+a*e[0][1],A(u=i*a-o*r,0,n)||(l[0]=(a*s-r*h)/u,l[1]=(i*h-o*s)/u),l}function i(t,e,n,i){var r=e[0]-t[0],s=e[1]-t[1],o=i[0]-n[0],a=i[1]-n[1];if(o*s-a*r==0)return!1;var h=(r*(n[1]-t[1])+s*(t[0]-n[0]))/(o*s-a*r),u=(o*(t[1]-n[1])+a*(n[0]-t[0]))/(a*r-o*s);return h>=0&&h<=1&&u>=0&&u<=1}function r(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function s(t,e,n){return r(t,e,n)>0}function o(t,e,n){return r(t,e,n)>=0}function a(t,e,n){return r(t,e,n)<0}function h(t,e,n){return r(t,e,n)<=0}t.exports={decomp:function(t){var e=function t(e){for(var n=[],i=[],r=[],s=[],o=Number.MAX_VALUE,a=0;a<e.length;++a)if(m(e,a))for(var h=0;h<e.length;++h)if(g(e,a,h)){i=t(b(e,a,h,s)),r=t(b(e,h,a,s));for(var u=0;u<r.length;u++)i.push(r[u]);i.length<o&&(n=i,o=i.length,n.push([p(e,a),p(e,h)]))}return n}(t);return e.length>0?function t(e,n){if(0===n.length)return[e];if(n instanceof Array&&n.length&&n[0]instanceof Array&&2===n[0].length&&n[0][0]instanceof Array){for(var i=[e],r=0;r<n.length;r++)for(var s=n[r],o=0;o<i.length;o++){var a=i[o],h=t(a,s);if(h){i.splice(o,1),i.push(h[0],h[1]);break}}return i}s=n,r=e.indexOf(s[0]),o=e.indexOf(s[1]);return-1!==r&&-1!==o&&[b(e,r,o),b(e,o,r)]}(t,e):[t]},quickDecomp:function t(e,n,i,r,u,l,c){l=l||100,c=c||0,u=u||25,n=void 0!==n?n:[],i=i||[],r=r||[];var y=[0,0],v=[0,0],g=[0,0],b=0,A=0,w=0,T=0,E=0,S=0,I=0,O=[],C=[],P=e,M=e;if(M.length<3)return n;if(++c>l)return console.warn("quickDecomp: max level ("+l+") reached."),n;for(var R=0;R<e.length;++R)if(m(P,R)){i.push(P[R]),b=A=Number.MAX_VALUE;for(var D=0;D<e.length;++D)s(p(P,R-1),p(P,R),p(P,D))&&h(p(P,R-1),p(P,R),p(P,D-1))&&(g=x(p(P,R-1),p(P,R),p(P,D),p(P,D-1)),a(p(P,R+1),p(P,R),g)&&(w=d(P[R],g))<A&&(A=w,v=g,S=D)),s(p(P,R+1),p(P,R),p(P,D+1))&&h(p(P,R+1),p(P,R),p(P,D))&&(g=x(p(P,R+1),p(P,R),p(P,D),p(P,D+1)),s(p(P,R-1),p(P,R),g)&&(w=d(P[R],g))<b&&(b=w,y=g,E=D));if(S===(E+1)%e.length)g[0]=(v[0]+y[0])/2,g[1]=(v[1]+y[1])/2,r.push(g),R<E?(f(O,P,R,E+1),O.push(g),C.push(g),0!==S&&f(C,P,S,P.length),f(C,P,0,R+1)):(0!==R&&f(O,P,R,P.length),f(O,P,0,E+1),O.push(g),C.push(g),f(C,P,S,R+1));else{if(S>E&&(E+=e.length),T=Number.MAX_VALUE,E<S)return n;for(D=S;D<=E;++D)o(p(P,R-1),p(P,R),p(P,D))&&h(p(P,R+1),p(P,R),p(P,D))&&(w=d(p(P,R),p(P,D)))<T&&_(P,R,D)&&(T=w,I=D%e.length);R<I?(f(O,P,R,I+1),0!==I&&f(C,P,I,M.length),f(C,P,0,R+1)):(0!==R&&f(O,P,R,M.length),f(O,P,0,I+1),f(C,P,I,R+1))}return O.length<C.length?(t(O,n,i,r,u,l,c),t(C,n,i,r,u,l,c)):(t(C,n,i,r,u,l,c),t(O,n,i,r,u,l,c)),n}return n.push(e),n},isSimple:function(t){var e,n=t;for(e=0;e<n.length-1;e++)for(var r=0;r<e-1;r++)if(i(n[e],n[e+1],n[r],n[r+1]))return!1;for(e=1;e<n.length-2;e++)if(i(n[0],n[n.length-1],n[e],n[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var n=0,i=t.length-1;t.length>3&&i>=0;--i)c(p(t,i-1),p(t,i),p(t,i+1),e)&&(t.splice(i%t.length,1),n++);return n},removeDuplicatePoints:function(t,e){for(var n=t.length-1;n>=1;--n)for(var i=t[n],r=n-1;r>=0;--r)w(i,t[r],e)&&t.splice(n,1)},makeCCW:function(t){for(var e=0,n=t,i=1;i<t.length;++i)(n[i][1]<n[e][1]||n[i][1]===n[e][1]&&n[i][0]>n[e][0])&&(e=i);return!s(p(t,e-1),p(t,e),p(t,e+1))&&(function(t){for(var e=[],n=t.length,i=0;i!==n;i++)e.push(t.pop());for(i=0;i!==n;i++)t[i]=e[i]}(t),!0)}};var u=[],l=[];function c(t,e,n,i){if(i){var s=u,o=l;s[0]=e[0]-t[0],s[1]=e[1]-t[1],o[0]=n[0]-e[0],o[1]=n[1]-e[1];var a=s[0]*o[0]+s[1]*o[1],h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),c=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(h*c))<i}return 0===r(t,e,n)}function d(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function p(t,e){var n=t.length;return t[e<0?e%n+n:e%n]}function f(t,e,n,i){for(var r=n;r<i;r++)t.push(e[r])}function m(t,e){return a(p(t,e-1),p(t,e),p(t,e+1))}var y=[],v=[];function g(t,e,i){var r,s,a=y,u=v;if(o(p(t,e+1),p(t,e),p(t,i))&&h(p(t,e-1),p(t,e),p(t,i)))return!1;s=d(p(t,e),p(t,i));for(var l=0;l!==t.length;++l)if((l+1)%t.length!==e&&l!==e&&o(p(t,e),p(t,i),p(t,l+1))&&h(p(t,e),p(t,i),p(t,l))&&(a[0]=p(t,e),a[1]=p(t,i),u[0]=p(t,l),u[1]=p(t,l+1),r=n(a,u),d(p(t,e),r)<s))return!1;return!0}function _(t,e,n){for(var r=0;r!==t.length;++r)if(r!==e&&r!==n&&(r+1)%t.length!==e&&(r+1)%t.length!==n&&i(p(t,e),p(t,n),p(t,r),p(t,r+1)))return!1;return!0}function b(t,e,n,i){var r=i||[];if(function(t){t.length=0}(r),e<n)for(var s=e;s<=n;s++)r.push(t[s]);else{for(s=0;s<=n;s++)r.push(t[s]);for(s=e;s<t.length;s++)r.push(t[s])}return r}function x(t,e,n,i,r){r=r||0;var s=e[1]-t[1],o=t[0]-e[0],a=s*t[0]+o*t[1],h=i[1]-n[1],u=n[0]-i[0],l=h*n[0]+u*n[1],c=s*u-h*o;return A(c,0,r)?[0,0]:[(u*a-o*l)/c,(s*l-h*a)/c]}function A(t,e,n){return n=n||0,Math.abs(t-e)<=n}function w(t,e,n){return A(t[0],e[0],n)&&A(t[1],e[1],n)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return ut})),n.d(e,"b",(function(){return It})),n.d(e,"c",(function(){return Ht}));var i,r,s=n(1),o=n(6),a=n(0);!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(r||(r={}));var h=((i={})[r.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,i[r.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,i[r.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,i[r.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,i[r.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,i[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,i[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,i[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,i[r.COMPRESSED_R11_EAC]=.5,i[r.COMPRESSED_SIGNED_R11_EAC]=.5,i[r.COMPRESSED_RG11_EAC]=1,i[r.COMPRESSED_SIGNED_RG11_EAC]=1,i[r.COMPRESSED_RGB8_ETC2]=.5,i[r.COMPRESSED_RGBA8_ETC2_EAC]=1,i[r.COMPRESSED_SRGB8_ETC2]=.5,i[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,i[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,i[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,i[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,i[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,i[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,i[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,i[r.COMPRESSED_RGB_ETC1_WEBGL]=.5,i[r.COMPRESSED_RGB_ATC_WEBGL]=.5,i[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,i[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,i),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function l(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function c(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var d=function(t){function e(n,i){var r=t.call(this,n,i)||this;return r.format=i.format,r.levels=i.levels||1,r._width=i.width,r._height=i.height,r._extension=e._formatToExtension(r.format),(i.levelBuffers||r.buffer)&&(r._levelBuffers=i.levelBuffers||e._createLevelBuffers(n instanceof Uint8Array?n:r.buffer.uint8View,r.format,r.levels,4,4,r.width,r.height)),r}return l(e,t),e.prototype.upload=function(t,e,n){var i=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var r=0,s=this.levels;r<s;r++){var o=this._levelBuffers[r],a=o.levelID,h=o.levelWidth,u=o.levelHeight,l=o.levelBuffer;i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,h,u,0,l)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,n,i,r,s,o){for(var a=new Array(n),u=t.byteOffset,l=s,c=o,d=l+i-1&~(i-1),p=c+r-1&~(r-1),f=d*p*h[e],m=0;m<n;m++)a[m]={levelID:m,levelWidth:n>1?l:d,levelHeight:n>1?c:p,levelBuffer:new Uint8Array(t.buffer,u,f)},u+=f,f=(d=(l=l>>1||1)+i-1&~(i-1))*(p=(c=c>>1||1)+r-1&~(r-1))*h[e];return a},e}(function(t){function e(e,n){void 0===n&&(n={width:1,height:1,autoLoad:!0});var i,r,o=this;return"string"==typeof e?(i=e,r=new Uint8Array):(i=null,r=e),(o=t.call(this,r,n)||this).origin=i,o.buffer=r?new s.t(r):null,o.origin&&!1!==n.autoLoad&&o.load(),r&&r.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return l(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,e=void 0,i=function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new s.t(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((n=Promise)||(n=Promise))((function(r,s){function o(t){try{h(i.next(t))}catch(t){s(t)}}function a(t){try{h(i.throw(t))}catch(t){s(t)}}function h(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(o,a)}h((i=i.apply(t,e||[])).next())}));var t,e,n,i},e}(s.g)),p=/iPhone/i,f=/iPod/i,m=/iPad/i,y=/\biOS-universal(?:.+)Mac\b/i,v=/\bAndroid(?:.+)Mobile\b/i,g=/Android/i,_=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,b=/Silk/i,x=/Windows Phone/i,A=/\bWindows(?:.+)ARM\b/i,w=/BlackBerry/i,T=/BB10/i,E=/Opera Mini/i,S=/\b(CriOS|Chrome)(?:.+)Mobile/i,I=/Mobile(?:.+)Firefox\b/i,O=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var C=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,i=n.split("[FBAN");void 0!==i[1]&&(n=i[0]),void 0!==(i=n.split("Twitter"))[1]&&(n=i[0]);var r=function(t){return function(e){return e.test(t)}}(n),s={apple:{phone:r(p)&&!r(x),ipod:r(f),tablet:!r(p)&&(r(m)||O(e))&&!r(x),universal:r(y),device:(r(p)||r(f)||r(m)||r(y)||O(e))&&!r(x)},amazon:{phone:r(_),tablet:!r(_)&&r(b),device:r(_)||r(b)},android:{phone:!r(x)&&r(_)||!r(x)&&r(v),tablet:!r(x)&&!r(_)&&!r(v)&&(r(b)||r(g)),device:!r(x)&&(r(_)||r(b)||r(v)||r(g))||r(/\bokhttp\b/i)},windows:{phone:r(x),tablet:r(A),device:r(x)||r(A)},other:{blackberry:r(w),blackberry10:r(T),opera:r(E),firefox:r(I),chrome:r(S),device:r(w)||r(T)||r(E)||r(I)||r(S)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(self.navigator);var P={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(C.tablet||C.phone){var n;if(C.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(e=!1);if(C.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:C.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!C.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function R(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}R((function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),h=n?n+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=arguments,h=n?n+t:t;if(!this._events[h])return!1;var u,l,c=this._events[h],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,s),!0;case 6:return c.fn.call(c.context,e,i,r,s,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=a[l];c.fn.apply(c.context,u)}else{var p,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,r);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=a[p];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var h=0,u=[],l=a.length;h<l;h++)(a[h].fn!==e||r&&!a[h].once||i&&a[h].context!==i)&&u.push(a[h]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}));var D=R((function(t,e){!function(n){var i=e&&!e.nodeType&&e,r=t&&!t.nodeType&&t,s="object"==typeof M&&M;s.global!==s&&s.window!==s&&s.self!==s||(n=s);var o,a,h=2147483647,u=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw RangeError(d[t])}function y(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function v(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+y((t=t.replace(c,".")).split("."),e).join(".")}function g(t){for(var e,n,i=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function _(t){return y(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var i=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;i+=36)t=p(t/35);return p(i+36*t/(t+38))}function A(t){var e,n,i,r,s,o,a,u,l,c,d,f=[],y=t.length,v=0,g=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&m("not-basic"),f.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<y;){for(s=v,o=1,a=36;r>=y&&m("invalid-input"),((u=(d=t.charCodeAt(r++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||u>p((h-v)/o))&&m("overflow"),v+=u*o,!(u<(l=a<=b?1:a>=b+26?26:a-b));a+=36)o>p(h/(c=36-l))&&m("overflow"),o*=c;b=x(v-s,e=f.length+1,0==s),p(v/e)>h-g&&m("overflow"),g+=p(v/e),v%=e,f.splice(v++,0,g)}return _(f)}function w(t){var e,n,i,r,s,o,a,u,l,c,d,y,v,_,A,w=[];for(y=(t=g(t)).length,e=128,n=0,s=72,o=0;o<y;++o)(d=t[o])<128&&w.push(f(d));for(i=r=w.length,r&&w.push("-");i<y;){for(a=h,o=0;o<y;++o)(d=t[o])>=e&&d<a&&(a=d);for(a-e>p((h-n)/(v=i+1))&&m("overflow"),n+=(a-e)*v,e=a,o=0;o<y;++o)if((d=t[o])<e&&++n>h&&m("overflow"),d==e){for(u=n,l=36;!(u<(c=l<=s?1:l>=s+26?26:l-s));l+=36)A=u-c,_=36-c,w.push(f(b(c+A%_,0))),u=p(A/_);w.push(f(b(u,0))),s=x(n,v,i==r),n=0,++i}++n,++e}return w.join("")}if(o={version:"1.3.2",ucs2:{decode:g,encode:_},decode:A,encode:w,toASCII:function(t){return v(t,(function(t){return l.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return v(t,(function(t){return u.test(t)?A(t.slice(4).toLowerCase()):t}))}},i&&r)if(t.exports==i)r.exports=o;else for(a in o)o.hasOwnProperty(a)&&(i[a]=o[a]);else n.punycode=o}(M)})),B=function(t){return"string"==typeof t},N=function(t){return"object"==typeof t&&null!==t},L=function(t){return null===t},F=function(t){return null==t};function G(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var U=function(t,e,n,i){e=e||"&",n=n||"=";var r={};if("string"!=typeof t||0===t.length)return r;var s=/\+/g;t=t.split(e);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var a=t.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var u,l,c,d,p=t[h].replace(s,"%20"),f=p.indexOf(n);f>=0?(u=p.substr(0,f),l=p.substr(f+1)):(u=p,l=""),c=decodeURIComponent(u),d=decodeURIComponent(l),G(r,c)?Array.isArray(r[c])?r[c].push(d):r[c]=[r[c],d]:r[c]=d}return r},k=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},X=function(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var r=encodeURIComponent(k(i))+n;return Array.isArray(t[i])?t[i].map((function(t){return r+encodeURIComponent(k(t))})).join(e):r+encodeURIComponent(k(t[i]))})).join(e):i?encodeURIComponent(k(i))+n+encodeURIComponent(k(t)):""},j=R((function(t,e){e.decode=e.parse=U,e.encode=e.stringify=X})),H=st,Y=function(t,e){return st(t,!1,!0).resolve(e)},V=function(t){B(t)&&(t=st(t));if(!(t instanceof W))return W.prototype.format.call(t);return t.format()};function W(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var z=/^([a-z0-9.+-]+:)/i,q=/:[0-9]*$/,$=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,K=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Z=["'"].concat(K),J=["%","/","?",";","#"].concat(Z),Q=["/","?","#"],tt=/^[+a-z0-9A-Z_-]{0,63}$/,et=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,nt={javascript:!0,"javascript:":!0},it={javascript:!0,"javascript:":!0},rt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function st(t,e,n){if(t&&N(t)&&t instanceof W)return t;var i=new W;return i.parse(t,e,n),i}W.prototype.parse=function(t,e,n){if(!B(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),r=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(r);s[0]=s[0].replace(/\\/g,"/");var o=t=s.join(r);if(o=o.trim(),!n&&1===t.split("#").length){var a=$.exec(o);if(a)return this.path=o,this.href=o,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?j.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=z.exec(o);if(h){var u=(h=h[0]).toLowerCase();this.protocol=u,o=o.substr(h.length)}if(n||h||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===o.substr(0,2);!l||h&&it[h]||(o=o.substr(2),this.slashes=!0)}if(!it[h]&&(l||h&&!rt[h])){for(var c,d,p=-1,f=0;f<Q.length;f++){-1!==(m=o.indexOf(Q[f]))&&(-1===p||m<p)&&(p=m)}-1!==(d=-1===p?o.lastIndexOf("@"):o.lastIndexOf("@",p))&&(c=o.slice(0,d),o=o.slice(d+1),this.auth=decodeURIComponent(c)),p=-1;for(f=0;f<J.length;f++){var m;-1!==(m=o.indexOf(J[f]))&&(-1===p||m<p)&&(p=m)}-1===p&&(p=o.length),this.host=o.slice(0,p),o=o.slice(p),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var v=this.hostname.split(/\./),g=(f=0,v.length);f<g;f++){var _=v[f];if(_&&!_.match(tt)){for(var b="",x=0,A=_.length;x<A;x++)_.charCodeAt(x)>127?b+="x":b+=_[x];if(!b.match(tt)){var w=v.slice(0,f),T=v.slice(f+1),E=_.match(et);E&&(w.push(E[1]),T.unshift(E[2])),T.length&&(o="/"+T.join(".")+o),this.hostname=w.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=D.toASCII(this.hostname));var S=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+S,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!nt[u])for(f=0,g=Z.length;f<g;f++){var O=Z[f];if(-1!==o.indexOf(O)){var C=encodeURIComponent(O);C===O&&(C=escape(O)),o=o.split(O).join(C)}}var P=o.indexOf("#");-1!==P&&(this.hash=o.substr(P),o=o.slice(0,P));var M=o.indexOf("?");if(-1!==M?(this.search=o.substr(M),this.query=o.substr(M+1),e&&(this.query=j.parse(this.query)),o=o.slice(0,M)):e&&(this.search="",this.query={}),o&&(this.pathname=o),rt[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var R=this.search||"";this.path=S+R}return this.href=this.format(),this},W.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&N(this.query)&&Object.keys(this.query).length&&(s=j.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||rt[e])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),e+r+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+i},W.prototype.resolve=function(t){return this.resolveObject(st(t,!1,!0)).format()},W.prototype.resolveObject=function(t){if(B(t)){var e=new W;e.parse(t,!1,!0),t=e}for(var n=new W,i=Object.keys(this),r=0;r<i.length;r++){var s=i[r];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var h=o[a];"protocol"!==h&&(n[h]=t[h])}return rt[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!rt[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];n[c]=t[c]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||it[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",f=n.search||"";n.path=p+f}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=y||m||n.host&&t.pathname,g=v,_=n.pathname&&n.pathname.split("/")||[],b=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!rt[n.protocol]);if(b&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),v=v&&(""===d[0]||""===_[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),n.search=t.search,n.query=t.query;else if(!F(t.search)){if(b)n.hostname=n.host=_.shift(),(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift());return n.search=t.search,n.query=t.query,L(n.pathname)&&L(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=_.slice(-1)[0],A=(n.host||t.host||_.length>1)&&("."===x||".."===x)||""===x,w=0,T=_.length;T>=0;T--)"."===(x=_[T])?_.splice(T,1):".."===x?(_.splice(T,1),w++):w&&(_.splice(T,1),w--);if(!v&&!g)for(;w--;w)_.unshift("..");!v||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),A&&"/"!==_.join("/").substr(-1)&&_.push("");var E,S=""===_[0]||_[0]&&"/"===_[0].charAt(0);b&&(n.hostname=n.host=S?"":_.length?_.shift():"",(E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=E.shift(),n.host=n.hostname=E.shift()));return(v=v||n.host&&_.length)&&!S&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),L(n.pathname)&&L(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},W.prototype.parseHost=function(){var t=this.host,e=q.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var ot={parse:H,format:V,resolve:Y};P.RETINA_PREFIX=/@([0-9\.]+)x/,P.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;(function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[a.b.NORMAL_NPM]=a.b.NORMAL,t[a.b.ADD_NPM]=a.b.ADD,t[a.b.SCREEN_NPM]=a.b.SCREEN,e[a.b.NORMAL]=a.b.NORMAL_NPM,e[a.b.ADD]=a.b.ADD_NPM,e[a.b.SCREEN]=a.b.SCREEN_NPM;var i=[];i.push(e),i.push(t)})(),function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||P.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0})}();var at,ht,ut=function(){function t(){}return t.use=function(e,n){var i=e.data;if(e.type===o.c.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var r=i.textures,s=void 0,a=void 0,h=0,u=r.length;h<u;h++){var l=r[h],c=l.src,d=l.format;if(d||(a=c),t.textureFormats[d]){s=c;break}}if(!(s=s||a))return void n(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},f=ot.resolve(e.url.replace(this.baseUrl,""),s),m=i.cacheID;this.add(m,f,p,(function(t){if(t.error)n(t.error);else{var i=t.texture,r=void 0===i?null:i,s=t.textures,o=void 0===s?{}:s;Object.assign(e,{texture:r,textures:o}),n()}}))}else n()},t.add=function(){var e=document.createElement("canvas").getContext("webgl");if(e){var n={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};for(var i in t.textureExtensions=n,t.textureFormats={},n){var r=n[i];r&&Object.assign(t.textureFormats,Object.getPrototypeOf(r))}}else console.error("WebGL not available for compressed textures. Silently failing.")},t}();function lt(t,e,n){var i={textures:{},texture:null};return e?(e.map((function(t){return new s.q(new s.a(t,Object.assign({mipmap:a.j.OFF,alphaMode:a.a.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(e,n){var r=e.baseTexture,o=t+"-"+(n+1);s.a.addToCache(r,o),s.q.addToCache(e,o),0===n&&(s.a.addToCache(r,t),s.q.addToCache(e,t),i.texture=e),i.textures[o]=e})),i):i}o.c.setExtensionXhrType("dds",o.c.XHR_RESPONSE_TYPE.BUFFER);var ct,dt,pt=3,ft=4,mt=7,yt=19,vt=2,gt=0,_t=1,bt=2,xt=3;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(ct||(ct={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(dt||(dt={}));var At,wt,Tt,Et=((at={})[827611204]=r.COMPRESSED_RGBA_S3TC_DXT1_EXT,at[861165636]=r.COMPRESSED_RGBA_S3TC_DXT3_EXT,at[894720068]=r.COMPRESSED_RGBA_S3TC_DXT5_EXT,at),St=((ht={})[ct.DXGI_FORMAT_BC1_TYPELESS]=r.COMPRESSED_RGBA_S3TC_DXT1_EXT,ht[ct.DXGI_FORMAT_BC1_UNORM]=r.COMPRESSED_RGBA_S3TC_DXT1_EXT,ht[ct.DXGI_FORMAT_BC2_TYPELESS]=r.COMPRESSED_RGBA_S3TC_DXT3_EXT,ht[ct.DXGI_FORMAT_BC2_UNORM]=r.COMPRESSED_RGBA_S3TC_DXT3_EXT,ht[ct.DXGI_FORMAT_BC3_TYPELESS]=r.COMPRESSED_RGBA_S3TC_DXT5_EXT,ht[ct.DXGI_FORMAT_BC3_UNORM]=r.COMPRESSED_RGBA_S3TC_DXT5_EXT,ht[ct.DXGI_FORMAT_BC1_UNORM_SRGB]=r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,ht[ct.DXGI_FORMAT_BC2_UNORM_SRGB]=r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,ht[ct.DXGI_FORMAT_BC3_UNORM_SRGB]=r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,ht),It=function(){function t(){}return t.use=function(e,n){if("dds"===e.extension&&e.data)try{Object.assign(e,lt(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void n(t)}n()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),i=n[pt],r=n[ft],s=n[mt],o=new Uint32Array(t,yt*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=o[1];if(4&a){var u=o[vt];if(808540228!==u){var l=Et[u],c=new Uint8Array(t,128);return[new d(c,{format:l,width:r,height:i,levels:s})]}var p=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),f=p[gt],m=p[_t],y=p[bt],v=p[xt],g=St[f];if(void 0===g)throw new Error("DDSLoader cannot parse texture data with DXGI format "+f);if(4===y)throw new Error("DDSLoader does not support cubemap textures");if(m===dt.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var _=new Array;if(1===v)_.push(new Uint8Array(t,148));else{for(var b=h[g],x=0,A=r,w=i,T=0;T<s;T++){x+=Math.max(1,A+3&-4)*Math.max(1,w+3&-4)*b,A>>>=1,w>>>=1}var E=148;for(T=0;T<v;T++)_.push(new Uint8Array(t,E,x)),E+=x}return _.map((function(t){return new d(t,{format:g,width:r,height:i,levels:s})}))}if(64&a)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&a)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&a)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&a)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();o.c.setExtensionXhrType("ktx",o.c.XHR_RESPONSE_TYPE.BUFFER);var Ot=[171,75,84,88,32,49,49,187,13,10,26,10],Ct=12,Pt=16,Mt=24,Rt=28,Dt=36,Bt=40,Nt=44,Lt=48,Ft=52,Gt=56,Ut=60,kt=((At={})[a.p.UNSIGNED_BYTE]=1,At[a.p.UNSIGNED_SHORT]=2,At[a.p.FLOAT]=4,At[a.p.HALF_FLOAT]=8,At),Xt=((wt={})[a.g.RGBA]=4,wt[a.g.RGB]=3,wt[a.g.LUMINANCE]=1,wt[a.g.LUMINANCE_ALPHA]=2,wt[a.g.ALPHA]=1,wt),jt=((Tt={})[a.p.UNSIGNED_SHORT_4_4_4_4]=2,Tt[a.p.UNSIGNED_SHORT_5_5_5_1]=2,Tt[a.p.UNSIGNED_SHORT_5_6_5]=2,Tt),Ht=function(){function t(){}return t.use=function(e,n){if("ktx"===e.extension&&e.data)try{var i=e.name||e.url;Object.assign(e,lt(i,t.parse(i,e.data),e.metadata))}catch(t){return void n(t)}n()},t.parse=function(e,n){var i=new DataView(n);if(!t.validate(e,i))return null;var r=67305985===i.getUint32(Ct,!0),s=i.getUint32(Pt,r),o=i.getUint32(Mt,r),a=i.getUint32(Rt,r),u=i.getUint32(Dt,r),l=i.getUint32(Bt,r)||1,c=i.getUint32(Nt,r)||1,p=i.getUint32(Lt,r)||1,f=i.getUint32(Ft,r),m=i.getUint32(Gt,r),y=i.getUint32(Ut,r);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==f)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==p)throw new Error("WebGL does not support array textures");var v,g=u+3&-4,_=l+3&-4,b=new Array(p),x=u*l;if(0===s&&(x=g*_),void 0===(v=0!==s?kt[s]?kt[s]*Xt[o]:jt[s]:h[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var A=x*v,w=u,T=l,E=g,S=_,I=64+y,O=0;O<m;O++){for(var C=i.getUint32(I,r),P=I+4,M=0;M<p;M++){var R=b[M];R||(R=b[M]=new Array(m)),R[O]={levelID:O,levelWidth:m>1?w:E,levelHeight:m>1?T:S,levelBuffer:new Uint8Array(n,P,A)},P+=A}I=(I+=C+4)%4!=0?I+4-I%4:I,A=(E=(w=w>>1||1)+4-1&-4)*(S=(T=T>>1||1)+4-1&-4)*v}if(0!==s)throw new Error("TODO: Uncompressed");return b.map((function(t){return new d(null,{format:a,width:u,height:l,levels:m,levelBuffers:t})}))},t.validate=function(t,e){for(var n=0;n<Ot.length;n++)if(e.getUint8(n)!==Ot[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t}()}).call(this,n(11))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(24);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(35).default)("2f4dd710",i,!1,{})},function(t,e,n){"use strict";var i=n(28),r=n(30);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=_(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(31);function _(t,e,n){if(t&&r.isObject(t)&&t instanceof s)return t;var i=new s;return i.parse(t,e,n),i}s.prototype.parse=function(t,e,n){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var _=t=u.join(a);if(_=_.trim(),!n&&1===t.split("#").length){var b=h.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=o.exec(_);if(x){var A=(x=x[0]).toLowerCase();this.protocol=A,_=_.substr(x.length)}if(n||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===_.substr(0,2);!w||x&&y[x]||(_=_.substr(2),this.slashes=!0)}if(!y[x]&&(w||x&&!v[x])){for(var T,E,S=-1,I=0;I<d.length;I++){-1!==(O=_.indexOf(d[I]))&&(-1===S||O<S)&&(S=O)}-1!==(E=-1===S?_.lastIndexOf("@"):_.lastIndexOf("@",S))&&(T=_.slice(0,E),_=_.slice(E+1),this.auth=decodeURIComponent(T)),S=-1;for(I=0;I<c.length;I++){var O;-1!==(O=_.indexOf(c[I]))&&(-1===S||O<S)&&(S=O)}-1===S&&(S=_.length),this.host=_.slice(0,S),_=_.slice(S),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var P=this.hostname.split(/\./),M=(I=0,P.length);I<M;I++){var R=P[I];if(R&&!R.match(p)){for(var D="",B=0,N=R.length;B<N;B++)R.charCodeAt(B)>127?D+="x":D+=R[B];if(!D.match(p)){var L=P.slice(0,I),F=P.slice(I+1),G=R.match(f);G&&(L.push(G[1]),F.unshift(G[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=i.toASCII(this.hostname));var U=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+U,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!m[A])for(I=0,M=l.length;I<M;I++){var X=l[I];if(-1!==_.indexOf(X)){var j=encodeURIComponent(X);j===X&&(j=escape(X)),_=_.split(X).join(j)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var Y=_.indexOf("?");if(-1!==Y?(this.search=_.substr(Y),this.query=_.substr(Y+1),e&&(this.query=g.parse(this.query)),_=_.slice(0,Y)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var V=this.search||"";this.path=U+V}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(o=g.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==s?(s="//"+(s||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):s||(s=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+i},s.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(r.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var n=new s,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||_||n.host&&t.pathname,A=x,w=n.pathname&&n.pathname.split("/")||[],T=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===w[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),n.search=t.search,n.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(T)n.hostname=n.host=w.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift());return n.search=t.search,n.query=t.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=w.slice(-1)[0],S=(n.host||t.host||w.length>1)&&("."===E||".."===E)||""===E,I=0,O=w.length;O>=0;O--)"."===(E=w[O])?w.splice(O,1):".."===E?(w.splice(O,1),I++):I&&(w.splice(O,1),I--);if(!x&&!A)for(;I--;I)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var C,P=""===w[0]||w[0]&&"/"===w[0].charAt(0);T&&(n.hostname=n.host=P?"":w.length?w.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift()));return(x=x||n.host&&w.length)&&!P&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";t.exports=function(t,e){if(t){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=n.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[n.key[s]]=i[s]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,(function(t,e,i){e&&(r[n.q.name][e]=i)})),r}}},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new s(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(26),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(11))},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r="~";function s(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||t,s),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,i,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var h,u,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,i),!0;case 5:return l.fn.call(l.context,e,n,i,s),!0;case 6:return l.fn.call(l.context,e,n,i,s,o),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,i);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];l[u].fn.apply(l[u].context,h)}}return!0},u.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return h(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||i&&!o.once||n&&o.context!==n||h(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==e||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:h(this,s)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&h(this,e)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u},function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,a,h,u,l,p,f,y=e&&e.length,v=y?e[0]*n:t.length,g=r(t,0,v,n,!0),_=[];if(!g||g.next===g.prev)return _;if(y&&(g=function(t,e,n,i){var o,a,h,u,l,p=[];for(o=0,a=e.length;o<a;o++)h=e[o]*i,u=o<a-1?e[o+1]*i:t.length,(l=r(t,h,u,i,!1))===l.next&&(l.steiner=!0),p.push(m(l));for(p.sort(c),o=0;o<p.length;o++)d(p[o],n),n=s(n,n.next);return n}(t,e,g,n)),t.length>80*n){i=h=t[0],a=u=t[1];for(var b=n;b<v;b+=n)(l=t[b])<i&&(i=l),(p=t[b+1])<a&&(a=p),l>h&&(h=l),p>u&&(u=p);f=0!==(f=Math.max(h-i,u-a))?1/f:0}return o(g,_,n,i,a,f),_}function r(t,e,n,i,r){var s,o;if(r===O(t,e,n,i)>0)for(s=e;s<n;s+=i)o=E(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=E(s,t[s],t[s+1],o);return o&&_(o,o.next)&&(S(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(S(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function o(t,e,n,i,r,c,d){if(t){!d&&c&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,s,o,a,h,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;a>0||h>0&&i;)0!==a&&(0===h||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(o>1)}(r)}(t,i,r,c);for(var p,m,y=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?h(t,i,r,c):a(t))e.push(p.i/n),e.push(t.i/n),e.push(m.i/n),S(t),t=m.next,y=m.next;else if((t=m)===y){d?1===d?o(t=u(s(t),e,n),e,n,i,r,c,2):2===d&&l(t,e,n,i,r,c):o(s(t),e,n,i,r,c,1);break}}}function a(t){var e=t.prev,n=t,i=t.next;if(g(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(y(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,n,i){var r=t.prev,s=t,o=t.next;if(g(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,u=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=f(a,h,e,n,i),d=f(u,l,e,n,i),p=t.prevZ,m=t.nextZ;p&&p.z>=c&&m&&m.z<=d;){if(p!==t.prev&&p!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==t.prev&&m!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=d;){if(m!==t.prev&&m!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function u(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!_(r,o)&&b(r,i,i.next,o)&&w(r,o)&&w(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),S(i),S(i.next),i=t=o),i=i.next}while(i!==t);return s(i)}function l(t,e,n,i,r,a){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&v(h,u)){var l=T(h,u);return h=s(h,h.next),l=s(l,l.next),o(h,e,n,i,r,a),void o(l,e,n,i,r,a)}u=u.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var n,i=e,r=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>o){if(o=a,a===r){if(s===i.y)return i;if(s===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n;var h,u=n,l=n.x,c=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=l&&r!==i.x&&y(s<c?r:o,s,l,c,s<c?o:r,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(r-i.x),w(i,t)&&(h<d||h===d&&(i.x>n.x||i.x===n.x&&p(n,i)))&&(n=i,d=h)),i=i.next}while(i!==u);return n}(t,e)){var n=T(e,t);s(e,e.next),s(n,n.next)}}function p(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function f(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||_(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,i){var r=A(g(t,e,n)),s=A(g(t,e,i)),o=A(g(n,i,t)),a=A(g(n,i,e));return r!==s&&o!==a||(!(0!==r||!x(t,n,e))||(!(0!==s||!x(t,i,e))||(!(0!==o||!x(n,t,i))||!(0!==a||!x(n,e,i)))))}function x(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function w(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function T(t,e){var n=new I(t.i,t.x,t.y),i=new I(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function E(t,e,n,i){var r=new I(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,n,i){for(var r=0,s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}t.exports=i,t.exports.default=i,i.deviation=function(t,e,n,i){var r=e&&e.length,s=r?e[0]*n:t.length,o=Math.abs(O(t,0,s,n));if(r)for(var a=0,h=e.length;a<h;a++){var u=e[a]*n,l=a<h-1?e[a+1]*n:t.length;o-=Math.abs(O(t,u,l,n))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*n,p=i[a+1]*n,f=i[a+2]*n;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[r][s][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},function(t,e,n){"use strict";(function(t,n){
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function r(t){return null==t}function s(t){return null!=t}function o(t){return!0===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function h(t){return null!==t&&"object"==typeof t}var u=Object.prototype.toString;function l(t){return"[object Object]"===u.call(t)}function c(t){return"[object RegExp]"===u.call(t)}function d(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return s(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function f(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===u?JSON.stringify(t,null,2):String(t)}function m(t){var e=parseFloat(t);return isNaN(e)?t:e}function y(t,e){for(var n=Object.create(null),i=t.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}y("slot,component",!0);var v=y("key,ref,slot,slot-scope,is");function g(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var _=Object.prototype.hasOwnProperty;function b(t,e){return _.call(t,e)}function x(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var A=/-(\w)/g,w=x((function(t){return t.replace(A,(function(t,e){return e?e.toUpperCase():""}))})),T=x((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),E=/\B([A-Z])/g,S=x((function(t){return t.replace(E,"-$1").toLowerCase()}));var I=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function O(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function C(t,e){for(var n in e)t[n]=e[n];return t}function P(t){for(var e={},n=0;n<t.length;n++)t[n]&&C(e,t[n]);return e}function M(t,e,n){}var R=function(t,e,n){return!1},D=function(t){return t};function B(t,e){if(t===e)return!0;var n=h(t),i=h(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var r=Array.isArray(t),s=Array.isArray(e);if(r&&s)return t.length===e.length&&t.every((function(t,n){return B(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(r||s)return!1;var o=Object.keys(t),a=Object.keys(e);return o.length===a.length&&o.every((function(n){return B(t[n],e[n])}))}catch(t){return!1}}function N(t,e){for(var n=0;n<t.length;n++)if(B(t[n],e))return n;return-1}function L(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var F=["component","directive","filter"],G=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:M,parsePlatformTagName:D,mustUseProp:R,async:!0,_lifecycleHooks:G},k=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function X(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var j=new RegExp("[^"+k.source+".$_\\d]");var H,Y="__proto__"in{},V="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,z=W&&WXEnvironment.platform.toLowerCase(),q=V&&window.navigator.userAgent.toLowerCase(),$=q&&/msie|trident/.test(q),K=q&&q.indexOf("msie 9.0")>0,Z=q&&q.indexOf("edge/")>0,J=(q&&q.indexOf("android"),q&&/iphone|ipad|ipod|ios/.test(q)||"ios"===z),Q=(q&&/chrome\/\d+/.test(q),q&&/phantomjs/.test(q),q&&q.match(/firefox\/(\d+)/)),tt={}.watch,et=!1;if(V)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){et=!0}}),window.addEventListener("test-passive",null,nt)}catch(t){}var it=function(){return void 0===H&&(H=!V&&!W&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),H},rt=V&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function st(t){return"function"==typeof t&&/native code/.test(t.toString())}var ot,at="undefined"!=typeof Symbol&&st(Symbol)&&"undefined"!=typeof Reflect&&st(Reflect.ownKeys);ot="undefined"!=typeof Set&&st(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ht=M,ut=0,lt=function(){this.id=ut++,this.subs=[]};lt.prototype.addSub=function(t){this.subs.push(t)},lt.prototype.removeSub=function(t){g(this.subs,t)},lt.prototype.depend=function(){lt.target&&lt.target.addDep(this)},lt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},lt.target=null;var ct=[];function dt(t){ct.push(t),lt.target=t}function pt(){ct.pop(),lt.target=ct[ct.length-1]}var ft=function(t,e,n,i,r,s,o,a){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},mt={child:{configurable:!0}};mt.child.get=function(){return this.componentInstance},Object.defineProperties(ft.prototype,mt);var yt=function(t){void 0===t&&(t="");var e=new ft;return e.text=t,e.isComment=!0,e};function vt(t){return new ft(void 0,void 0,void 0,String(t))}function gt(t){var e=new ft(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var _t=Array.prototype,bt=Object.create(_t);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=_t[t];X(bt,t,(function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var r,s=e.apply(this,n),o=this.__ob__;switch(t){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&o.observeArray(r),o.dep.notify(),s}))}));var xt=Object.getOwnPropertyNames(bt),At=!0;function wt(t){At=t}var Tt=function(t){this.value=t,this.dep=new lt,this.vmCount=0,X(t,"__ob__",this),Array.isArray(t)?(Y?function(t,e){t.__proto__=e}(t,bt):function(t,e,n){for(var i=0,r=n.length;i<r;i++){var s=n[i];X(t,s,e[s])}}(t,bt,xt),this.observeArray(t)):this.walk(t)};function Et(t,e){var n;if(h(t)&&!(t instanceof ft))return b(t,"__ob__")&&t.__ob__ instanceof Tt?n=t.__ob__:At&&!it()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Tt(t)),e&&n&&n.vmCount++,n}function St(t,e,n,i,r){var s=new lt,o=Object.getOwnPropertyDescriptor(t,e);if(!o||!1!==o.configurable){var a=o&&o.get,h=o&&o.set;a&&!h||2!==arguments.length||(n=t[e]);var u=!r&&Et(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):n;return lt.target&&(s.depend(),u&&(u.dep.depend(),Array.isArray(e)&&Ct(e))),e},set:function(e){var i=a?a.call(t):n;e===i||e!=e&&i!=i||a&&!h||(h?h.call(t,e):n=e,u=!r&&Et(e),s.notify())}})}}function It(t,e,n){if(Array.isArray(t)&&d(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var i=t.__ob__;return t._isVue||i&&i.vmCount?n:i?(St(i.value,e,n),i.dep.notify(),n):(t[e]=n,n)}function Ot(t,e){if(Array.isArray(t)&&d(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||b(t,e)&&(delete t[e],n&&n.dep.notify())}}function Ct(t){for(var e=void 0,n=0,i=t.length;n<i;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Ct(e)}Tt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)St(t,e[n])},Tt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Et(t[e])};var Pt=U.optionMergeStrategies;function Mt(t,e){if(!e)return t;for(var n,i,r,s=at?Reflect.ownKeys(e):Object.keys(e),o=0;o<s.length;o++)"__ob__"!==(n=s[o])&&(i=t[n],r=e[n],b(t,n)?i!==r&&l(i)&&l(r)&&Mt(i,r):It(t,n,r));return t}function Rt(t,e,n){return n?function(){var i="function"==typeof e?e.call(n,n):e,r="function"==typeof t?t.call(n,n):t;return i?Mt(i,r):r}:e?t?function(){return Mt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Dt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function Bt(t,e,n,i){var r=Object.create(t||null);return e?C(r,e):r}Pt.data=function(t,e,n){return n?Rt(t,e,n):e&&"function"!=typeof e?t:Rt(t,e)},G.forEach((function(t){Pt[t]=Dt})),F.forEach((function(t){Pt[t+"s"]=Bt})),Pt.watch=function(t,e,n,i){if(t===tt&&(t=void 0),e===tt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};for(var s in C(r,t),e){var o=r[s],a=e[s];o&&!Array.isArray(o)&&(o=[o]),r[s]=o?o.concat(a):Array.isArray(a)?a:[a]}return r},Pt.props=Pt.methods=Pt.inject=Pt.computed=function(t,e,n,i){if(!t)return e;var r=Object.create(null);return C(r,t),e&&C(r,e),r},Pt.provide=Rt;var Nt=function(t,e){return void 0===e?t:e};function Lt(t,e,n){if("function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var i,r,s={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(r=n[i])&&(s[w(r)]={type:null});else if(l(n))for(var o in n)r=n[o],s[w(o)]=l(r)?r:{type:r};else 0;t.props=s}}(e),function(t,e){var n=t.inject;if(n){var i=t.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(l(n))for(var s in n){var o=n[s];i[s]=l(o)?C({from:s},o):{from:o}}else 0}}(e),function(t){var e=t.directives;if(e)for(var n in e){var i=e[n];"function"==typeof i&&(e[n]={bind:i,update:i})}}(e),!e._base&&(e.extends&&(t=Lt(t,e.extends,n)),e.mixins))for(var i=0,r=e.mixins.length;i<r;i++)t=Lt(t,e.mixins[i],n);var s,o={};for(s in t)a(s);for(s in e)b(t,s)||a(s);function a(i){var r=Pt[i]||Nt;o[i]=r(t[i],e[i],n,i)}return o}function Ft(t,e,n,i){if("string"==typeof n){var r=t[e];if(b(r,n))return r[n];var s=w(n);if(b(r,s))return r[s];var o=T(s);return b(r,o)?r[o]:r[n]||r[s]||r[o]}}function Gt(t,e,n,i){var r=e[t],s=!b(n,t),o=n[t],a=Xt(Boolean,r.type);if(a>-1)if(s&&!b(r,"default"))o=!1;else if(""===o||o===S(t)){var h=Xt(String,r.type);(h<0||a<h)&&(o=!0)}if(void 0===o){o=function(t,e,n){if(!b(e,"default"))return;var i=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof i&&"Function"!==Ut(e.type)?i.call(t):i}(i,r,t);var u=At;wt(!0),Et(o),wt(u)}return o}function Ut(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function kt(t,e){return Ut(t)===Ut(e)}function Xt(t,e){if(!Array.isArray(e))return kt(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(kt(e[n],t))return n;return-1}function jt(t,e,n){dt();try{if(e)for(var i=e;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{if(!1===r[s].call(i,t,e,n))return}catch(t){Yt(t,i,"errorCaptured hook")}}Yt(t,e,n)}finally{pt()}}function Ht(t,e,n,i,r){var s;try{(s=n?t.apply(e,n):t.call(e))&&!s._isVue&&p(s)&&!s._handled&&(s.catch((function(t){return jt(t,i,r+" (Promise/async)")})),s._handled=!0)}catch(t){jt(t,i,r)}return s}function Yt(t,e,n){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,n)}catch(e){e!==t&&Vt(e,null,"config.errorHandler")}Vt(t,e,n)}function Vt(t,e,n){if(!V&&!W||"undefined"==typeof console)throw t;console.error(t)}var Wt,zt=!1,qt=[],$t=!1;function Kt(){$t=!1;var t=qt.slice(0);qt.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&st(Promise)){var Zt=Promise.resolve();Wt=function(){Zt.then(Kt),J&&setTimeout(M)},zt=!0}else if($||"undefined"==typeof MutationObserver||!st(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Wt=void 0!==n&&st(n)?function(){n(Kt)}:function(){setTimeout(Kt,0)};else{var Jt=1,Qt=new MutationObserver(Kt),te=document.createTextNode(String(Jt));Qt.observe(te,{characterData:!0}),Wt=function(){Jt=(Jt+1)%2,te.data=String(Jt)},zt=!0}function ee(t,e){var n;if(qt.push((function(){if(t)try{t.call(e)}catch(t){jt(t,e,"nextTick")}else n&&n(e)})),$t||($t=!0,Wt()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){n=t}))}var ne=new ot;function ie(t){!function t(e,n){var i,r,s=Array.isArray(e);if(!s&&!h(e)||Object.isFrozen(e)||e instanceof ft)return;if(e.__ob__){var o=e.__ob__.dep.id;if(n.has(o))return;n.add(o)}if(s)for(i=e.length;i--;)t(e[i],n);else for(r=Object.keys(e),i=r.length;i--;)t(e[r[i]],n)}(t,ne),ne.clear()}var re=x((function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:n,capture:i,passive:e}}));function se(t,e){function n(){var t=arguments,i=n.fns;if(!Array.isArray(i))return Ht(i,null,arguments,e,"v-on handler");for(var r=i.slice(),s=0;s<r.length;s++)Ht(r[s],null,t,e,"v-on handler")}return n.fns=t,n}function oe(t,e,n,i,s,a){var h,u,l,c;for(h in t)u=t[h],l=e[h],c=re(h),r(u)||(r(l)?(r(u.fns)&&(u=t[h]=se(u,a)),o(c.once)&&(u=t[h]=s(c.name,u,c.capture)),n(c.name,u,c.capture,c.passive,c.params)):u!==l&&(l.fns=u,t[h]=l));for(h in e)r(t[h])&&i((c=re(h)).name,e[h],c.capture)}function ae(t,e,n){var i;t instanceof ft&&(t=t.data.hook||(t.data.hook={}));var a=t[e];function h(){n.apply(this,arguments),g(i.fns,h)}r(a)?i=se([h]):s(a.fns)&&o(a.merged)?(i=a).fns.push(h):i=se([a,h]),i.merged=!0,t[e]=i}function he(t,e,n,i,r){if(s(e)){if(b(e,n))return t[n]=e[n],r||delete e[n],!0;if(b(e,i))return t[n]=e[i],r||delete e[i],!0}return!1}function ue(t){return a(t)?[vt(t)]:Array.isArray(t)?function t(e,n){var i,h,u,l,c=[];for(i=0;i<e.length;i++)r(h=e[i])||"boolean"==typeof h||(u=c.length-1,l=c[u],Array.isArray(h)?h.length>0&&(le((h=t(h,(n||"")+"_"+i))[0])&&le(l)&&(c[u]=vt(l.text+h[0].text),h.shift()),c.push.apply(c,h)):a(h)?le(l)?c[u]=vt(l.text+h):""!==h&&c.push(vt(h)):le(h)&&le(l)?c[u]=vt(l.text+h.text):(o(e._isVList)&&s(h.tag)&&r(h.key)&&s(n)&&(h.key="__vlist"+n+"_"+i+"__"),c.push(h)));return c}(t):void 0}function le(t){return s(t)&&s(t.text)&&!1===t.isComment}function ce(t,e){if(t){for(var n=Object.create(null),i=at?Reflect.ownKeys(t):Object.keys(t),r=0;r<i.length;r++){var s=i[r];if("__ob__"!==s){for(var o=t[s].from,a=e;a;){if(a._provided&&b(a._provided,o)){n[s]=a._provided[o];break}a=a.$parent}if(!a)if("default"in t[s]){var h=t[s].default;n[s]="function"==typeof h?h.call(e):h}else 0}}return n}}function de(t,e){if(!t||!t.length)return{};for(var n={},i=0,r=t.length;i<r;i++){var s=t[i],o=s.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,s.context!==e&&s.fnContext!==e||!o||null==o.slot)(n.default||(n.default=[])).push(s);else{var a=o.slot,h=n[a]||(n[a]=[]);"template"===s.tag?h.push.apply(h,s.children||[]):h.push(s)}}for(var u in n)n[u].every(pe)&&delete n[u];return n}function pe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function fe(t,e,n){var r,s=Object.keys(e).length>0,o=t?!!t.$stable:!s,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&n&&n!==i&&a===n.$key&&!s&&!n.$hasNormal)return n;for(var h in r={},t)t[h]&&"$"!==h[0]&&(r[h]=me(e,h,t[h]))}else r={};for(var u in e)u in r||(r[u]=ye(e,u));return t&&Object.isExtensible(t)&&(t._normalized=r),X(r,"$stable",o),X(r,"$key",a),X(r,"$hasNormal",s),r}function me(t,e,n){var i=function(){var t=arguments.length?n.apply(null,arguments):n({});return(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:ue(t))&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0}),i}function ye(t,e){return function(){return t[e]}}function ve(t,e){var n,i,r,o,a;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),i=0,r=t.length;i<r;i++)n[i]=e(t[i],i);else if("number"==typeof t)for(n=new Array(t),i=0;i<t;i++)n[i]=e(i+1,i);else if(h(t))if(at&&t[Symbol.iterator]){n=[];for(var u=t[Symbol.iterator](),l=u.next();!l.done;)n.push(e(l.value,n.length)),l=u.next()}else for(o=Object.keys(t),n=new Array(o.length),i=0,r=o.length;i<r;i++)a=o[i],n[i]=e(t[a],a,i);return s(n)||(n=[]),n._isVList=!0,n}function ge(t,e,n,i){var r,s=this.$scopedSlots[t];s?(n=n||{},i&&(n=C(C({},i),n)),r=s(n)||e):r=this.$slots[t]||e;var o=n&&n.slot;return o?this.$createElement("template",{slot:o},r):r}function _e(t){return Ft(this.$options,"filters",t)||D}function be(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function xe(t,e,n,i,r){var s=U.keyCodes[e]||n;return r&&i&&!U.keyCodes[e]?be(r,i):s?be(s,t):i?S(i)!==e:void 0}function Ae(t,e,n,i,r){if(n)if(h(n)){var s;Array.isArray(n)&&(n=P(n));var o=function(o){if("class"===o||"style"===o||v(o))s=t;else{var a=t.attrs&&t.attrs.type;s=i||U.mustUseProp(e,a,o)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var h=w(o),u=S(o);h in s||u in s||(s[o]=n[o],r&&((t.on||(t.on={}))["update:"+o]=function(t){n[o]=t}))};for(var a in n)o(a)}else;return t}function we(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e||Ee(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),i}function Te(t,e,n){return Ee(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ee(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&Se(t[i],e+"_"+i,n);else Se(t,e,n)}function Se(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Ie(t,e){if(e)if(l(e)){var n=t.on=t.on?C({},t.on):{};for(var i in e){var r=n[i],s=e[i];n[i]=r?[].concat(r,s):s}}else;return t}function Oe(t,e,n,i){e=e||{$stable:!n};for(var r=0;r<t.length;r++){var s=t[r];Array.isArray(s)?Oe(s,e,n):s&&(s.proxy&&(s.fn.proxy=!0),e[s.key]=s.fn)}return i&&(e.$key=i),e}function Ce(t,e){for(var n=0;n<e.length;n+=2){var i=e[n];"string"==typeof i&&i&&(t[e[n]]=e[n+1])}return t}function Pe(t,e){return"string"==typeof t?e+t:t}function Me(t){t._o=Te,t._n=m,t._s=f,t._l=ve,t._t=ge,t._q=B,t._i=N,t._m=we,t._f=_e,t._k=xe,t._b=Ae,t._v=vt,t._e=yt,t._u=Oe,t._g=Ie,t._d=Ce,t._p=Pe}function Re(t,e,n,r,s){var a,h=this,u=s.options;b(r,"_uid")?(a=Object.create(r))._original=r:(a=r,r=r._original);var l=o(u._compiled),c=!l;this.data=t,this.props=e,this.children=n,this.parent=r,this.listeners=t.on||i,this.injections=ce(u.inject,r),this.slots=function(){return h.$slots||fe(t.scopedSlots,h.$slots=de(n,r)),h.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return fe(t.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=fe(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,i){var s=Ue(a,t,e,n,i,c);return s&&!Array.isArray(s)&&(s.fnScopeId=u._scopeId,s.fnContext=r),s}:this._c=function(t,e,n,i){return Ue(a,t,e,n,i,c)}}function De(t,e,n,i,r){var s=gt(t);return s.fnContext=n,s.fnOptions=i,e.slot&&((s.data||(s.data={})).slot=e.slot),s}function Be(t,e){for(var n in e)t[w(n)]=e[n]}Me(Re.prototype);var Ne={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;Ne.prepatch(n,n)}else{(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;s(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns);return new t.componentOptions.Ctor(n)}(t,$e)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,r,s){0;var o=r.data.scopedSlots,a=t.$scopedSlots,h=!!(o&&!o.$stable||a!==i&&!a.$stable||o&&t.$scopedSlots.$key!==o.$key),u=!!(s||t.$options._renderChildren||h);t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r);if(t.$options._renderChildren=s,t.$attrs=r.data.attrs||i,t.$listeners=n||i,e&&t.$options.props){wt(!1);for(var l=t._props,c=t.$options._propKeys||[],d=0;d<c.length;d++){var p=c[d],f=t.$options.props;l[p]=Gt(p,f,e,t)}wt(!0),t.$options.propsData=e}n=n||i;var m=t.$options._parentListeners;t.$options._parentListeners=n,qe(t,n,m),u&&(t.$slots=de(s,r.context),t.$forceUpdate());0}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,Qe(i,"mounted")),t.data.keepAlive&&(n._isMounted?((e=i)._inactive=!1,en.push(e)):Je(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,n){if(n&&(e._directInactive=!0,Ze(e)))return;if(!e._inactive){e._inactive=!0;for(var i=0;i<e.$children.length;i++)t(e.$children[i]);Qe(e,"deactivated")}}(e,!0):e.$destroy())}},Le=Object.keys(Ne);function Fe(t,e,n,a,u){if(!r(t)){var l=n.$options._base;if(h(t)&&(t=l.extend(t)),"function"==typeof t){var c;if(r(t.cid)&&void 0===(t=function(t,e){if(o(t.error)&&s(t.errorComp))return t.errorComp;if(s(t.resolved))return t.resolved;var n=Xe;n&&s(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n);if(o(t.loading)&&s(t.loadingComp))return t.loadingComp;if(n&&!s(t.owners)){var i=t.owners=[n],a=!0,u=null,l=null;n.$on("hook:destroyed",(function(){return g(i,n)}));var c=function(t){for(var e=0,n=i.length;e<n;e++)i[e].$forceUpdate();t&&(i.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},d=L((function(n){t.resolved=je(n,e),a?i.length=0:c(!0)})),f=L((function(e){s(t.errorComp)&&(t.error=!0,c(!0))})),m=t(d,f);return h(m)&&(p(m)?r(t.resolved)&&m.then(d,f):p(m.component)&&(m.component.then(d,f),s(m.error)&&(t.errorComp=je(m.error,e)),s(m.loading)&&(t.loadingComp=je(m.loading,e),0===m.delay?t.loading=!0:u=setTimeout((function(){u=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,c(!1))}),m.delay||200)),s(m.timeout)&&(l=setTimeout((function(){l=null,r(t.resolved)&&f(null)}),m.timeout)))),a=!1,t.loading?t.loadingComp:t.resolved}}(c=t,l)))return function(t,e,n,i,r){var s=yt();return s.asyncFactory=t,s.asyncMeta={data:e,context:n,children:i,tag:r},s}(c,e,n,a,u);e=e||{},An(t),s(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var r=e.on||(e.on={}),o=r[i],a=e.model.callback;s(o)?(Array.isArray(o)?-1===o.indexOf(a):o!==a)&&(r[i]=[a].concat(o)):r[i]=a}(t.options,e);var d=function(t,e,n){var i=e.options.props;if(!r(i)){var o={},a=t.attrs,h=t.props;if(s(a)||s(h))for(var u in i){var l=S(u);he(o,h,u,l,!0)||he(o,a,u,l,!1)}return o}}(e,t);if(o(t.options.functional))return function(t,e,n,r,o){var a=t.options,h={},u=a.props;if(s(u))for(var l in u)h[l]=Gt(l,u,e||i);else s(n.attrs)&&Be(h,n.attrs),s(n.props)&&Be(h,n.props);var c=new Re(n,h,o,r,t),d=a.render.call(null,c._c,c);if(d instanceof ft)return De(d,n,c.parent,a,c);if(Array.isArray(d)){for(var p=ue(d)||[],f=new Array(p.length),m=0;m<p.length;m++)f[m]=De(p[m],n,c.parent,a,c);return f}}(t,d,e,n,a);var f=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var m=e.slot;e={},m&&(e.slot=m)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<Le.length;n++){var i=Le[n],r=e[i],s=Ne[i];r===s||r&&r._merged||(e[i]=r?Ge(s,r):s)}}(e);var y=t.options.name||u;return new ft("vue-component-"+t.cid+(y?"-"+y:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:d,listeners:f,tag:u,children:a},c)}}}function Ge(t,e){var n=function(n,i){t(n,i),e(n,i)};return n._merged=!0,n}function Ue(t,e,n,i,u,l){return(Array.isArray(n)||a(n))&&(u=i,i=n,n=void 0),o(l)&&(u=2),function(t,e,n,i,a){if(s(n)&&s(n.__ob__))return yt();s(n)&&s(n.is)&&(e=n.is);if(!e)return yt();0;Array.isArray(i)&&"function"==typeof i[0]&&((n=n||{}).scopedSlots={default:i[0]},i.length=0);2===a?i=ue(i):1===a&&(i=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(i));var u,l;if("string"==typeof e){var c;l=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),u=U.isReservedTag(e)?new ft(U.parsePlatformTagName(e),n,i,void 0,void 0,t):n&&n.pre||!s(c=Ft(t.$options,"components",e))?new ft(e,n,i,void 0,void 0,t):Fe(c,n,t,i,e)}else u=Fe(e,n,t,i);return Array.isArray(u)?u:s(u)?(s(l)&&function t(e,n,i){e.ns=n,"foreignObject"===e.tag&&(n=void 0,i=!0);if(s(e.children))for(var a=0,h=e.children.length;a<h;a++){var u=e.children[a];s(u.tag)&&(r(u.ns)||o(i)&&"svg"!==u.tag)&&t(u,n,i)}}(u,l),s(n)&&function(t){h(t.style)&&ie(t.style);h(t.class)&&ie(t.class)}(n),u):yt()}(t,e,n,i,u)}var ke,Xe=null;function je(t,e){return(t.__esModule||at&&"Module"===t[Symbol.toStringTag])&&(t=t.default),h(t)?e.extend(t):t}function He(t){return t.isComment&&t.asyncFactory}function Ye(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(s(n)&&(s(n.componentOptions)||He(n)))return n}}function Ve(t,e){ke.$on(t,e)}function We(t,e){ke.$off(t,e)}function ze(t,e){var n=ke;return function i(){var r=e.apply(null,arguments);null!==r&&n.$off(t,i)}}function qe(t,e,n){ke=t,oe(e,n||{},Ve,We,ze,t),ke=void 0}var $e=null;function Ke(t){var e=$e;return $e=t,function(){$e=e}}function Ze(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Je(t,e){if(e){if(t._directInactive=!1,Ze(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Je(t.$children[n]);Qe(t,"activated")}}function Qe(t,e){dt();var n=t.$options[e],i=e+" hook";if(n)for(var r=0,s=n.length;r<s;r++)Ht(n[r],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),pt()}var tn=[],en=[],nn={},rn=!1,sn=!1,on=0;var an=0,hn=Date.now;if(V&&!$){var un=window.performance;un&&"function"==typeof un.now&&hn()>document.createEvent("Event").timeStamp&&(hn=function(){return un.now()})}function ln(){var t,e;for(an=hn(),sn=!0,tn.sort((function(t,e){return t.id-e.id})),on=0;on<tn.length;on++)(t=tn[on]).before&&t.before(),e=t.id,nn[e]=null,t.run();var n=en.slice(),i=tn.slice();on=tn.length=en.length=0,nn={},rn=sn=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Je(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&Qe(i,"updated")}}(i),rt&&U.devtools&&rt.emit("flush")}var cn=0,dn=function(t,e,n,i,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++cn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ot,this.newDepIds=new ot,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!j.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=M)),this.value=this.lazy?void 0:this.get()};dn.prototype.get=function(){var t;dt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;jt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ie(t),pt(),this.cleanupDeps()}return t},dn.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},dn.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},dn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==nn[e]){if(nn[e]=!0,sn){for(var n=tn.length-1;n>on&&tn[n].id>t.id;)n--;tn.splice(n+1,0,t)}else tn.push(t);rn||(rn=!0,ee(ln))}}(this)},dn.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||h(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){jt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},dn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},dn.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},dn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var pn={enumerable:!0,configurable:!0,get:M,set:M};function fn(t,e,n){pn.get=function(){return this[e][n]},pn.set=function(t){this[e][n]=t},Object.defineProperty(t,n,pn)}function mn(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},i=t._props={},r=t.$options._propKeys=[];t.$parent&&wt(!1);var s=function(s){r.push(s);var o=Gt(s,e,n,t);St(i,s,o),s in t||fn(t,"_props",s)};for(var o in e)s(o);wt(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]="function"!=typeof e[n]?M:I(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;l(e=t._data="function"==typeof e?function(t,e){dt();try{return t.call(e,e)}catch(t){return jt(t,e,"data()"),{}}finally{pt()}}(e,t):e||{})||(e={});var n=Object.keys(e),i=t.$options.props,r=(t.$options.methods,n.length);for(;r--;){var s=n[r];0,i&&b(i,s)||(o=void 0,36!==(o=(s+"").charCodeAt(0))&&95!==o&&fn(t,"_data",s))}var o;Et(e,!0)}(t):Et(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),i=it();for(var r in e){var s=e[r],o="function"==typeof s?s:s.get;0,i||(n[r]=new dn(t,o||M,M,yn)),r in t||vn(t,r,s)}}(t,e.computed),e.watch&&e.watch!==tt&&function(t,e){for(var n in e){var i=e[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)bn(t,n,i[r]);else bn(t,n,i)}}(t,e.watch)}var yn={lazy:!0};function vn(t,e,n){var i=!it();"function"==typeof n?(pn.get=i?gn(e):_n(n),pn.set=M):(pn.get=n.get?i&&!1!==n.cache?gn(e):_n(n.get):M,pn.set=n.set||M),Object.defineProperty(t,e,pn)}function gn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),lt.target&&e.depend(),e.value}}function _n(t){return function(){return t.call(this,this)}}function bn(t,e,n,i){return l(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,i)}var xn=0;function An(t){var e=t.options;if(t.super){var n=An(t.super);if(n!==t.superOptions){t.superOptions=n;var i=function(t){var e,n=t.options,i=t.sealedOptions;for(var r in n)n[r]!==i[r]&&(e||(e={}),e[r]=n[r]);return e}(t);i&&C(t.extendOptions,i),(e=t.options=Lt(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function wn(t){this._init(t)}function Tn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,r=t._Ctor||(t._Ctor={});if(r[i])return r[i];var s=t.name||n.options.name;var o=function(t){this._init(t)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.cid=e++,o.options=Lt(n.options,t),o.super=n,o.options.props&&function(t){var e=t.options.props;for(var n in e)fn(t.prototype,"_props",n)}(o),o.options.computed&&function(t){var e=t.options.computed;for(var n in e)vn(t.prototype,n,e[n])}(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,F.forEach((function(t){o[t]=n[t]})),s&&(o.options.components[s]=o),o.superOptions=n.options,o.extendOptions=t,o.sealedOptions=C({},o.options),r[i]=o,o}}function En(t){return t&&(t.Ctor.options.name||t.tag)}function Sn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!c(t)&&t.test(e)}function In(t,e){var n=t.cache,i=t.keys,r=t._vnode;for(var s in n){var o=n[s];if(o){var a=En(o.componentOptions);a&&!e(a)&&On(n,s,i,r)}}}function On(t,e,n,i){var r=t[e];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),t[e]=null,g(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=xn++,e._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Lt(An(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&qe(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=de(e._renderChildren,r),t.$scopedSlots=i,t._c=function(e,n,i,r){return Ue(t,e,n,i,r,!1)},t.$createElement=function(e,n,i,r){return Ue(t,e,n,i,r,!0)};var s=n&&n.data;St(t,"$attrs",s&&s.attrs||i,null,!0),St(t,"$listeners",e._parentListeners||i,null,!0)}(e),Qe(e,"beforeCreate"),function(t){var e=ce(t.$options.inject,t);e&&(wt(!1),Object.keys(e).forEach((function(n){St(t,n,e[n])})),wt(!0))}(e),mn(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),Qe(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(wn),function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=It,t.prototype.$delete=Ot,t.prototype.$watch=function(t,e,n){if(l(e))return bn(this,t,e,n);(n=n||{}).user=!0;var i=new dn(this,t,e,n);if(n.immediate)try{e.call(this,i.value)}catch(t){jt(t,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(wn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var i=this;if(Array.isArray(t))for(var r=0,s=t.length;r<s;r++)i.$on(t[r],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var i=0,r=t.length;i<r;i++)n.$off(t[i],e);return n}var s,o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;for(var a=o.length;a--;)if((s=o[a])===e||s.fn===e){o.splice(a,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?O(n):n;for(var i=O(arguments,1),r='event handler for "'+t+'"',s=0,o=n.length;s<o;s++)Ht(n[s],e,i,e,r)}return e}}(wn),function(t){t.prototype._update=function(t,e){var n=this,i=n.$el,r=n._vnode,s=Ke(n);n._vnode=t,n.$el=r?n.__patch__(r,t):n.__patch__(n.$el,t,e,!1),s(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Qe(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||g(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Qe(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(wn),function(t){Me(t.prototype),t.prototype.$nextTick=function(t){return ee(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,r=n._parentVnode;r&&(e.$scopedSlots=fe(r.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=r;try{Xe=e,t=i.call(e._renderProxy,e.$createElement)}catch(n){jt(n,e,"render"),t=e._vnode}finally{Xe=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof ft||(t=yt()),t.parent=r,t}}(wn);var Cn=[String,RegExp,Array],Pn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Cn,exclude:Cn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)On(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){In(t,(function(t){return Sn(e,t)}))})),this.$watch("exclude",(function(e){In(t,(function(t){return!Sn(e,t)}))}))},render:function(){var t=this.$slots.default,e=Ye(t),n=e&&e.componentOptions;if(n){var i=En(n),r=this.include,s=this.exclude;if(r&&(!i||!Sn(r,i))||s&&i&&Sn(s,i))return e;var o=this.cache,a=this.keys,h=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;o[h]?(e.componentInstance=o[h].componentInstance,g(a,h),a.push(h)):(o[h]=e,a.push(h),this.max&&a.length>parseInt(this.max)&&On(o,a[0],a,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:ht,extend:C,mergeOptions:Lt,defineReactive:St},t.set=It,t.delete=Ot,t.nextTick=ee,t.observable=function(t){return Et(t),t},t.options=Object.create(null),F.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,C(t.options.components,Pn),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=O(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Lt(this.options,t),this}}(t),Tn(t),function(t){F.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}(t)}(wn),Object.defineProperty(wn.prototype,"$isServer",{get:it}),Object.defineProperty(wn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(wn,"FunctionalRenderContext",{value:Re}),wn.version="2.6.12";var Mn=y("style,class"),Rn=y("input,textarea,option,select,progress"),Dn=y("contenteditable,draggable,spellcheck"),Bn=y("events,caret,typing,plaintext-only"),Nn=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Ln="http://www.w3.org/1999/xlink",Fn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Gn=function(t){return Fn(t)?t.slice(6,t.length):""},Un=function(t){return null==t||!1===t};function kn(t){for(var e=t.data,n=t,i=t;s(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=Xn(i.data,e));for(;s(n=n.parent);)n&&n.data&&(e=Xn(e,n.data));return function(t,e){if(s(t)||s(e))return jn(t,Hn(e));return""}(e.staticClass,e.class)}function Xn(t,e){return{staticClass:jn(t.staticClass,e.staticClass),class:s(t.class)?[t.class,e.class]:e.class}}function jn(t,e){return t?e?t+" "+e:t:e||""}function Hn(t){return Array.isArray(t)?function(t){for(var e,n="",i=0,r=t.length;i<r;i++)s(e=Hn(t[i]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):h(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var Yn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Vn=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Wn=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),zn=function(t){return Vn(t)||Wn(t)};var qn=Object.create(null);var $n=y("text,number,password,search,email,tel,url");var Kn=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(t,e){return document.createElementNS(Yn[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Zn={create:function(t,e){Jn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Jn(t,!0),Jn(e))},destroy:function(t){Jn(t,!0)}};function Jn(t,e){var n=t.data.ref;if(s(n)){var i=t.context,r=t.componentInstance||t.elm,o=i.$refs;e?Array.isArray(o[n])?g(o[n],r):o[n]===r&&(o[n]=void 0):t.data.refInFor?Array.isArray(o[n])?o[n].indexOf(r)<0&&o[n].push(r):o[n]=[r]:o[n]=r}}var Qn=new ft("",{},[]),ti=["create","activate","update","remove","destroy"];function ei(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&s(t.data)===s(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,i=s(n=t.data)&&s(n=n.attrs)&&n.type,r=s(n=e.data)&&s(n=n.attrs)&&n.type;return i===r||$n(i)&&$n(r)}(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function ni(t,e,n){var i,r,o={};for(i=e;i<=n;++i)s(r=t[i].key)&&(o[r]=i);return o}var ii={create:ri,update:ri,destroy:function(t){ri(t,Qn)}};function ri(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,i,r,s=t===Qn,o=e===Qn,a=oi(t.data.directives,t.context),h=oi(e.data.directives,e.context),u=[],l=[];for(n in h)i=a[n],r=h[n],i?(r.oldValue=i.value,r.oldArg=i.arg,hi(r,"update",e,t),r.def&&r.def.componentUpdated&&l.push(r)):(hi(r,"bind",e,t),r.def&&r.def.inserted&&u.push(r));if(u.length){var c=function(){for(var n=0;n<u.length;n++)hi(u[n],"inserted",e,t)};s?ae(e,"insert",c):c()}l.length&&ae(e,"postpatch",(function(){for(var n=0;n<l.length;n++)hi(l[n],"componentUpdated",e,t)}));if(!s)for(n in a)h[n]||hi(a[n],"unbind",t,t,o)}(t,e)}var si=Object.create(null);function oi(t,e){var n,i,r=Object.create(null);if(!t)return r;for(n=0;n<t.length;n++)(i=t[n]).modifiers||(i.modifiers=si),r[ai(i)]=i,i.def=Ft(e.$options,"directives",i.name);return r}function ai(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function hi(t,e,n,i,r){var s=t.def&&t.def[e];if(s)try{s(n.elm,t,n,i,r)}catch(i){jt(i,n.context,"directive "+t.name+" "+e+" hook")}}var ui=[Zn,ii];function li(t,e){var n=e.componentOptions;if(!(s(n)&&!1===n.Ctor.options.inheritAttrs||r(t.data.attrs)&&r(e.data.attrs))){var i,o,a=e.elm,h=t.data.attrs||{},u=e.data.attrs||{};for(i in s(u.__ob__)&&(u=e.data.attrs=C({},u)),u)o=u[i],h[i]!==o&&ci(a,i,o);for(i in($||Z)&&u.value!==h.value&&ci(a,"value",u.value),h)r(u[i])&&(Fn(i)?a.removeAttributeNS(Ln,Gn(i)):Dn(i)||a.removeAttribute(i))}}function ci(t,e,n){t.tagName.indexOf("-")>-1?di(t,e,n):Nn(e)?Un(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Dn(e)?t.setAttribute(e,function(t,e){return Un(e)||"false"===e?"false":"contenteditable"===t&&Bn(e)?e:"true"}(e,n)):Fn(e)?Un(n)?t.removeAttributeNS(Ln,Gn(e)):t.setAttributeNS(Ln,e,n):di(t,e,n)}function di(t,e,n){if(Un(n))t.removeAttribute(e);else{if($&&!K&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var pi={create:li,update:li};function fi(t,e){var n=e.elm,i=e.data,o=t.data;if(!(r(i.staticClass)&&r(i.class)&&(r(o)||r(o.staticClass)&&r(o.class)))){var a=kn(e),h=n._transitionClasses;s(h)&&(a=jn(a,Hn(h))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var mi,yi={create:fi,update:fi};function vi(t,e,n){var i=mi;return function r(){var s=e.apply(null,arguments);null!==s&&bi(t,r,n,i)}}var gi=zt&&!(Q&&Number(Q[1])<=53);function _i(t,e,n,i){if(gi){var r=an,s=e;e=s._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=r||t.timeStamp<=0||t.target.ownerDocument!==document)return s.apply(this,arguments)}}mi.addEventListener(t,e,et?{capture:n,passive:i}:n)}function bi(t,e,n,i){(i||mi).removeEventListener(t,e._wrapper||e,n)}function xi(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};mi=e.elm,function(t){if(s(t.__r)){var e=$?"change":"input";t[e]=[].concat(t.__r,t[e]||[]),delete t.__r}s(t.__c)&&(t.change=[].concat(t.__c,t.change||[]),delete t.__c)}(n),oe(n,i,_i,bi,vi,e.context),mi=void 0}}var Ai,wi={create:xi,update:xi};function Ti(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,i,o=e.elm,a=t.data.domProps||{},h=e.data.domProps||{};for(n in s(h.__ob__)&&(h=e.data.domProps=C({},h)),a)n in h||(o[n]="");for(n in h){if(i=h[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),i===a[n])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===n&&"PROGRESS"!==o.tagName){o._value=i;var u=r(i)?"":String(i);Ei(o,u)&&(o.value=u)}else if("innerHTML"===n&&Wn(o.tagName)&&r(o.innerHTML)){(Ai=Ai||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var l=Ai.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}else if(i!==a[n])try{o[n]=i}catch(t){}}}}function Ei(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,i=t._vModifiers;if(s(i)){if(i.number)return m(n)!==m(e);if(i.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var Si={create:Ti,update:Ti},Ii=x((function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var i=t.split(n);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}));function Oi(t){var e=Ci(t.style);return t.staticStyle?C(t.staticStyle,e):e}function Ci(t){return Array.isArray(t)?P(t):"string"==typeof t?Ii(t):t}var Pi,Mi=/^--/,Ri=/\s*!important$/,Di=function(t,e,n){if(Mi.test(e))t.style.setProperty(e,n);else if(Ri.test(n))t.style.setProperty(S(e),n.replace(Ri,""),"important");else{var i=Ni(e);if(Array.isArray(n))for(var r=0,s=n.length;r<s;r++)t.style[i]=n[r];else t.style[i]=n}},Bi=["Webkit","Moz","ms"],Ni=x((function(t){if(Pi=Pi||document.createElement("div").style,"filter"!==(t=w(t))&&t in Pi)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Bi.length;n++){var i=Bi[n]+e;if(i in Pi)return i}}));function Li(t,e){var n=e.data,i=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(i.staticStyle)&&r(i.style))){var o,a,h=e.elm,u=i.staticStyle,l=i.normalizedStyle||i.style||{},c=u||l,d=Ci(e.data.style)||{};e.data.normalizedStyle=s(d.__ob__)?C({},d):d;var p=function(t,e){var n,i={};if(e)for(var r=t;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=Oi(r.data))&&C(i,n);(n=Oi(t.data))&&C(i,n);for(var s=t;s=s.parent;)s.data&&(n=Oi(s.data))&&C(i,n);return i}(e,!0);for(a in c)r(p[a])&&Di(h,a,"");for(a in p)(o=p[a])!==c[a]&&Di(h,a,null==o?"":o)}}var Fi={create:Li,update:Li},Gi=/\s+/;function Ui(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Gi).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function ki(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Gi).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Xi(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&C(e,ji(t.name||"v")),C(e,t),e}return"string"==typeof t?ji(t):void 0}}var ji=x((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Hi=V&&!K,Yi="transition",Vi="transitionend",Wi="animation",zi="animationend";Hi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Yi="WebkitTransition",Vi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Wi="WebkitAnimation",zi="webkitAnimationEnd"));var qi=V?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function $i(t){qi((function(){qi(t)}))}function Ki(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Ui(t,e))}function Zi(t,e){t._transitionClasses&&g(t._transitionClasses,e),ki(t,e)}function Ji(t,e,n){var i=tr(t,e),r=i.type,s=i.timeout,o=i.propCount;if(!r)return n();var a="transition"===r?Vi:zi,h=0,u=function(){t.removeEventListener(a,l),n()},l=function(e){e.target===t&&++h>=o&&u()};setTimeout((function(){h<o&&u()}),s+1),t.addEventListener(a,l)}var Qi=/\b(transform|all)(,|$)/;function tr(t,e){var n,i=window.getComputedStyle(t),r=(i[Yi+"Delay"]||"").split(", "),s=(i[Yi+"Duration"]||"").split(", "),o=er(r,s),a=(i[Wi+"Delay"]||"").split(", "),h=(i[Wi+"Duration"]||"").split(", "),u=er(a,h),l=0,c=0;return"transition"===e?o>0&&(n="transition",l=o,c=s.length):"animation"===e?u>0&&(n="animation",l=u,c=h.length):c=(n=(l=Math.max(o,u))>0?o>u?"transition":"animation":null)?"transition"===n?s.length:h.length:0,{type:n,timeout:l,propCount:c,hasTransform:"transition"===n&&Qi.test(i[Yi+"Property"])}}function er(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return nr(e)+nr(t[n])})))}function nr(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function ir(t,e){var n=t.elm;s(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=Xi(t.data.transition);if(!r(i)&&!s(n._enterCb)&&1===n.nodeType){for(var o=i.css,a=i.type,u=i.enterClass,l=i.enterToClass,c=i.enterActiveClass,d=i.appearClass,p=i.appearToClass,f=i.appearActiveClass,y=i.beforeEnter,v=i.enter,g=i.afterEnter,_=i.enterCancelled,b=i.beforeAppear,x=i.appear,A=i.afterAppear,w=i.appearCancelled,T=i.duration,E=$e,S=$e.$vnode;S&&S.parent;)E=S.context,S=S.parent;var I=!E._isMounted||!t.isRootInsert;if(!I||x||""===x){var O=I&&d?d:u,C=I&&f?f:c,P=I&&p?p:l,M=I&&b||y,R=I&&"function"==typeof x?x:v,D=I&&A||g,B=I&&w||_,N=m(h(T)?T.enter:T);0;var F=!1!==o&&!K,G=or(R),U=n._enterCb=L((function(){F&&(Zi(n,P),Zi(n,C)),U.cancelled?(F&&Zi(n,O),B&&B(n)):D&&D(n),n._enterCb=null}));t.data.show||ae(t,"insert",(function(){var e=n.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),R&&R(n,U)})),M&&M(n),F&&(Ki(n,O),Ki(n,C),$i((function(){Zi(n,O),U.cancelled||(Ki(n,P),G||(sr(N)?setTimeout(U,N):Ji(n,a,U)))}))),t.data.show&&(e&&e(),R&&R(n,U)),F||G||U()}}}function rr(t,e){var n=t.elm;s(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=Xi(t.data.transition);if(r(i)||1!==n.nodeType)return e();if(!s(n._leaveCb)){var o=i.css,a=i.type,u=i.leaveClass,l=i.leaveToClass,c=i.leaveActiveClass,d=i.beforeLeave,p=i.leave,f=i.afterLeave,y=i.leaveCancelled,v=i.delayLeave,g=i.duration,_=!1!==o&&!K,b=or(p),x=m(h(g)?g.leave:g);0;var A=n._leaveCb=L((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),_&&(Zi(n,l),Zi(n,c)),A.cancelled?(_&&Zi(n,u),y&&y(n)):(e(),f&&f(n)),n._leaveCb=null}));v?v(w):w()}function w(){A.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),_&&(Ki(n,u),Ki(n,c),$i((function(){Zi(n,u),A.cancelled||(Ki(n,l),b||(sr(x)?setTimeout(A,x):Ji(n,a,A)))}))),p&&p(n,A),_||b||A())}}function sr(t){return"number"==typeof t&&!isNaN(t)}function or(t){if(r(t))return!1;var e=t.fns;return s(e)?or(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function ar(t,e){!0!==e.data.show&&ir(e)}var hr=function(t){var e,n,i={},h=t.modules,u=t.nodeOps;for(e=0;e<ti.length;++e)for(i[ti[e]]=[],n=0;n<h.length;++n)s(h[n][ti[e]])&&i[ti[e]].push(h[n][ti[e]]);function l(t){var e=u.parentNode(t);s(e)&&u.removeChild(e,t)}function c(t,e,n,r,a,h,l){if(s(t.elm)&&s(h)&&(t=h[l]=gt(t)),t.isRootInsert=!a,!function(t,e,n,r){var a=t.data;if(s(a)){var h=s(t.componentInstance)&&a.keepAlive;if(s(a=a.hook)&&s(a=a.init)&&a(t,!1),s(t.componentInstance))return d(t,e),p(n,t.elm,r),o(h)&&function(t,e,n,r){var o,a=t;for(;a.componentInstance;)if(a=a.componentInstance._vnode,s(o=a.data)&&s(o=o.transition)){for(o=0;o<i.activate.length;++o)i.activate[o](Qn,a);e.push(a);break}p(n,t.elm,r)}(t,e,n,r),!0}}(t,e,n,r)){var c=t.data,m=t.children,y=t.tag;s(y)?(t.elm=t.ns?u.createElementNS(t.ns,y):u.createElement(y,t),g(t),f(t,m,e),s(c)&&v(t,e),p(n,t.elm,r)):o(t.isComment)?(t.elm=u.createComment(t.text),p(n,t.elm,r)):(t.elm=u.createTextNode(t.text),p(n,t.elm,r))}}function d(t,e){s(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(v(t,e),g(t)):(Jn(t),e.push(t))}function p(t,e,n){s(t)&&(s(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function f(t,e,n){if(Array.isArray(e)){0;for(var i=0;i<e.length;++i)c(e[i],n,t.elm,null,!0,e,i)}else a(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return s(t.tag)}function v(t,n){for(var r=0;r<i.create.length;++r)i.create[r](Qn,t);s(e=t.data.hook)&&(s(e.create)&&e.create(Qn,t),s(e.insert)&&n.push(t))}function g(t){var e;if(s(e=t.fnScopeId))u.setStyleScope(t.elm,e);else for(var n=t;n;)s(e=n.context)&&s(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent;s(e=$e)&&e!==t.context&&e!==t.fnContext&&s(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function _(t,e,n,i,r,s){for(;i<=r;++i)c(n[i],s,t,e,!1,n,i)}function b(t){var e,n,r=t.data;if(s(r))for(s(e=r.hook)&&s(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(s(e=t.children))for(n=0;n<t.children.length;++n)b(t.children[n])}function x(t,e,n){for(;e<=n;++e){var i=t[e];s(i)&&(s(i.tag)?(A(i),b(i)):l(i.elm))}}function A(t,e){if(s(e)||s(t.data)){var n,r=i.remove.length+1;for(s(e)?e.listeners+=r:e=function(t,e){function n(){0==--n.listeners&&l(t)}return n.listeners=e,n}(t.elm,r),s(n=t.componentInstance)&&s(n=n._vnode)&&s(n.data)&&A(n,e),n=0;n<i.remove.length;++n)i.remove[n](t,e);s(n=t.data.hook)&&s(n=n.remove)?n(t,e):e()}else l(t.elm)}function w(t,e,n,i){for(var r=n;r<i;r++){var o=e[r];if(s(o)&&ei(t,o))return r}}function T(t,e,n,a,h,l){if(t!==e){s(e.elm)&&s(a)&&(e=a[h]=gt(e));var d=e.elm=t.elm;if(o(t.isAsyncPlaceholder))s(e.asyncFactory.resolved)?I(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var p,f=e.data;s(f)&&s(p=f.hook)&&s(p=p.prepatch)&&p(t,e);var y=t.children,v=e.children;if(s(f)&&m(e)){for(p=0;p<i.update.length;++p)i.update[p](t,e);s(p=f.hook)&&s(p=p.update)&&p(t,e)}r(e.text)?s(y)&&s(v)?y!==v&&function(t,e,n,i,o){var a,h,l,d=0,p=0,f=e.length-1,m=e[0],y=e[f],v=n.length-1,g=n[0],b=n[v],A=!o;for(0;d<=f&&p<=v;)r(m)?m=e[++d]:r(y)?y=e[--f]:ei(m,g)?(T(m,g,i,n,p),m=e[++d],g=n[++p]):ei(y,b)?(T(y,b,i,n,v),y=e[--f],b=n[--v]):ei(m,b)?(T(m,b,i,n,v),A&&u.insertBefore(t,m.elm,u.nextSibling(y.elm)),m=e[++d],b=n[--v]):ei(y,g)?(T(y,g,i,n,p),A&&u.insertBefore(t,y.elm,m.elm),y=e[--f],g=n[++p]):(r(a)&&(a=ni(e,d,f)),r(h=s(g.key)?a[g.key]:w(g,e,d,f))?c(g,i,t,m.elm,!1,n,p):ei(l=e[h],g)?(T(l,g,i,n,p),e[h]=void 0,A&&u.insertBefore(t,l.elm,m.elm)):c(g,i,t,m.elm,!1,n,p),g=n[++p]);d>f?_(t,r(n[v+1])?null:n[v+1].elm,n,p,v,i):p>v&&x(e,d,f)}(d,y,v,n,l):s(v)?(s(t.text)&&u.setTextContent(d,""),_(d,null,v,0,v.length-1,n)):s(y)?x(y,0,y.length-1):s(t.text)&&u.setTextContent(d,""):t.text!==e.text&&u.setTextContent(d,e.text),s(f)&&s(p=f.hook)&&s(p=p.postpatch)&&p(t,e)}}}function E(t,e,n){if(o(n)&&s(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var S=y("attrs,class,staticClass,staticStyle,key");function I(t,e,n,i){var r,a=e.tag,h=e.data,u=e.children;if(i=i||h&&h.pre,e.elm=t,o(e.isComment)&&s(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(s(h)&&(s(r=h.hook)&&s(r=r.init)&&r(e,!0),s(r=e.componentInstance)))return d(e,n),!0;if(s(a)){if(s(u))if(t.hasChildNodes())if(s(r=h)&&s(r=r.domProps)&&s(r=r.innerHTML)){if(r!==t.innerHTML)return!1}else{for(var l=!0,c=t.firstChild,p=0;p<u.length;p++){if(!c||!I(c,u[p],n,i)){l=!1;break}c=c.nextSibling}if(!l||c)return!1}else f(e,u,n);if(s(h)){var m=!1;for(var y in h)if(!S(y)){m=!0,v(e,n);break}!m&&h.class&&ie(h.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,a){if(!r(e)){var h,l=!1,d=[];if(r(t))l=!0,c(e,d);else{var p=s(t.nodeType);if(!p&&ei(t,e))T(t,e,d,null,null,a);else{if(p){if(1===t.nodeType&&t.hasAttribute("data-server-rendered")&&(t.removeAttribute("data-server-rendered"),n=!0),o(n)&&I(t,e,d))return E(e,d,!0),t;h=t,t=new ft(u.tagName(h).toLowerCase(),{},[],void 0,h)}var f=t.elm,y=u.parentNode(f);if(c(e,d,f._leaveCb?null:y,u.nextSibling(f)),s(e.parent))for(var v=e.parent,g=m(e);v;){for(var _=0;_<i.destroy.length;++_)i.destroy[_](v);if(v.elm=e.elm,g){for(var A=0;A<i.create.length;++A)i.create[A](Qn,v);var w=v.data.hook.insert;if(w.merged)for(var S=1;S<w.fns.length;S++)w.fns[S]()}else Jn(v);v=v.parent}s(y)?x([t],0,0):s(t.tag)&&b(t)}}return E(e,d,l),e.elm}s(t)&&b(t)}}({nodeOps:Kn,modules:[pi,yi,wi,Si,Fi,V?{create:ar,activate:ar,remove:function(t,e){!0!==t.data.show?rr(t,e):e()}}:{}].concat(ui)});K&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&yr(t,"input")}));var ur={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?ae(n,"postpatch",(function(){ur.componentUpdated(t,e,n)})):lr(t,e,n.context),t._vOptions=[].map.call(t.options,pr)):("textarea"===n.tag||$n(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",fr),t.addEventListener("compositionend",mr),t.addEventListener("change",mr),K&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){lr(t,e,n.context);var i=t._vOptions,r=t._vOptions=[].map.call(t.options,pr);if(r.some((function(t,e){return!B(t,i[e])})))(t.multiple?e.value.some((function(t){return dr(t,r)})):e.value!==e.oldValue&&dr(e.value,r))&&yr(t,"change")}}};function lr(t,e,n){cr(t,e,n),($||Z)&&setTimeout((function(){cr(t,e,n)}),0)}function cr(t,e,n){var i=e.value,r=t.multiple;if(!r||Array.isArray(i)){for(var s,o,a=0,h=t.options.length;a<h;a++)if(o=t.options[a],r)s=N(i,pr(o))>-1,o.selected!==s&&(o.selected=s);else if(B(pr(o),i))return void(t.selectedIndex!==a&&(t.selectedIndex=a));r||(t.selectedIndex=-1)}}function dr(t,e){return e.every((function(e){return!B(e,t)}))}function pr(t){return"_value"in t?t._value:t.value}function fr(t){t.target.composing=!0}function mr(t){t.target.composing&&(t.target.composing=!1,yr(t.target,"input"))}function yr(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function vr(t){return!t.componentInstance||t.data&&t.data.transition?t:vr(t.componentInstance._vnode)}var gr={model:ur,show:{bind:function(t,e,n){var i=e.value,r=(n=vr(n)).data&&n.data.transition,s=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&r?(n.data.show=!0,ir(n,(function(){t.style.display=s}))):t.style.display=i?s:"none"},update:function(t,e,n){var i=e.value;!i!=!e.oldValue&&((n=vr(n)).data&&n.data.transition?(n.data.show=!0,i?ir(n,(function(){t.style.display=t.__vOriginalDisplay})):rr(n,(function(){t.style.display="none"}))):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,i,r){r||(t.style.display=t.__vOriginalDisplay)}}},_r={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function br(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?br(Ye(e.children)):t}function xr(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var r=n._parentListeners;for(var s in r)e[w(s)]=r[s];return e}function Ar(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var wr=function(t){return t.tag||He(t)},Tr=function(t){return"show"===t.name},Er={name:"transition",props:_r,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(wr)).length){0;var i=this.mode;0;var r=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return r;var s=br(r);if(!s)return r;if(this._leaving)return Ar(t,r);var o="__transition-"+this._uid+"-";s.key=null==s.key?s.isComment?o+"comment":o+s.tag:a(s.key)?0===String(s.key).indexOf(o)?s.key:o+s.key:s.key;var h=(s.data||(s.data={})).transition=xr(this),u=this._vnode,l=br(u);if(s.data.directives&&s.data.directives.some(Tr)&&(s.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(s,l)&&!He(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var c=l.data.transition=C({},h);if("out-in"===i)return this._leaving=!0,ae(c,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Ar(t,r);if("in-out"===i){if(He(s))return u;var d,p=function(){d()};ae(h,"afterEnter",p),ae(h,"enterCancelled",p),ae(c,"delayLeave",(function(t){d=t}))}}return r}}},Sr=C({tag:String,moveClass:String},_r);function Ir(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Or(t){t.data.newPos=t.elm.getBoundingClientRect()}function Cr(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,r=e.top-n.top;if(i||r){t.data.moved=!0;var s=t.elm.style;s.transform=s.WebkitTransform="translate("+i+"px,"+r+"px)",s.transitionDuration="0s"}}delete Sr.mode;var Pr={Transition:Er,TransitionGroup:{props:Sr,beforeMount:function(){var t=this,e=this._update;this._update=function(n,i){var r=Ke(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,n,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],o=xr(this),a=0;a<r.length;a++){var h=r[a];if(h.tag)if(null!=h.key&&0!==String(h.key).indexOf("__vlist"))s.push(h),n[h.key]=h,(h.data||(h.data={})).transition=o;else;}if(i){for(var u=[],l=[],c=0;c<i.length;c++){var d=i[c];d.data.transition=o,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?u.push(d):l.push(d)}this.kept=t(e,null,u),this.removed=l}return t(e,null,s)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Ir),t.forEach(Or),t.forEach(Cr),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,i=n.style;Ki(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Vi,n._moveCb=function t(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(Vi,t),n._moveCb=null,Zi(n,e))})}})))},methods:{hasMove:function(t,e){if(!Hi)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){ki(n,t)})),Ui(n,e),n.style.display="none",this.$el.appendChild(n);var i=tr(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};wn.config.mustUseProp=function(t,e,n){return"value"===n&&Rn(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},wn.config.isReservedTag=zn,wn.config.isReservedAttr=Mn,wn.config.getTagNamespace=function(t){return Wn(t)?"svg":"math"===t?"math":void 0},wn.config.isUnknownElement=function(t){if(!V)return!0;if(zn(t))return!1;if(t=t.toLowerCase(),null!=qn[t])return qn[t];var e=document.createElement(t);return t.indexOf("-")>-1?qn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:qn[t]=/HTMLUnknownElement/.test(e.toString())},C(wn.options.directives,gr),C(wn.options.components,Pr),wn.prototype.__patch__=V?hr:M,wn.prototype.$mount=function(t,e){return function(t,e,n){var i;return t.$el=e,t.$options.render||(t.$options.render=yt),Qe(t,"beforeMount"),i=function(){t._update(t._render(),n)},new dn(t,i,M,{before:function(){t._isMounted&&!t._isDestroyed&&Qe(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Qe(t,"mounted")),t}(this,t=t&&V?function(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}(t):void 0,e)},V&&setTimeout((function(){U.devtools&&rt&&rt.emit("init",wn)}),0),e.a=wn}).call(this,n(11),n(15).setImmediate)},function(t,e,n){"use strict";(function(t){var i=n(20),r=n(21),s=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function a(){}function h(t){if(!(this instanceof h))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,h._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void c(e.promise,t)}l(e.promise,i)}else(1===t._state?l:c)(e.promise,t._value)}))):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof h)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void f((i=n,r=e,function(){i.apply(r,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){c(t,e)}var i,r}function c(t,e){t._state=2,t._value=e,d(t)}function d(t){2===t._state&&0===t._deferreds.length&&h._immediateFn((function(){t._handled||h._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function p(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function f(t,e){var n=!1;try{t((function(t){n||(n=!0,l(e,t))}),(function(t){n||(n=!0,c(e,t))}))}catch(t){if(n)return;n=!0,c(e,t)}}h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){var n=new this.constructor(a);return u(this,new p(t,e,n)),n},h.prototype.finally=i.a,h.all=function(t){return new h((function(e,n){if(!o(t))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var r=i.length;function s(t,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(e){s(t,e)}),n)}i[t]=o,0==--r&&e(i)}catch(t){n(t)}}for(var a=0;a<i.length;a++)s(a,i[a])}))},h.allSettled=r.a,h.resolve=function(t){return t&&"object"==typeof t&&t.constructor===h?t:new h((function(e){e(t)}))},h.reject=function(t){return new h((function(e,n){n(t)}))},h.race=function(t){return new h((function(e,n){if(!o(t))return n(new TypeError("Promise.race accepts an array"));for(var i=0,r=t.length;i<r;i++)h.resolve(t[i]).then(e,n)}))},h._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){s(t,0)},h._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=h}).call(this,n(15).setImmediate)},function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}},function(t,e,n){"use strict";e.a=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var r=i.length;function s(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if("function"==typeof o)return void o.call(n,(function(e){s(t,e)}),(function(n){i[t]={status:"rejected",reason:n},0==--r&&e(i)}))}i[t]={status:"fulfilled",value:n},0==--r&&e(i)}for(var o=0;o<i.length;o++)s(o,i[o])}))}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,h=o(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))r.call(n,l)&&(h[l]=n[l]);if(i){a=i(n);for(var c=0;c<a.length;c++)s.call(n,a[c])&&(h[a[c]]=n[a[c]])}}return h}},function(t,e,n){"use strict";var i=n(12);n.n(i).a},function(t,e,n){(t.exports=n(25)(!0)).push([t.i,"\n#app {\r\n    position: fixed;\r\n    left: 0px;\r\n    top: 0px;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgb(48, 48, 48);\n}\n.head {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    position: fixed;\r\n    width: 100%;\r\n    height: 40px;\r\n    background-color: rgba(0, 0, 0, 0.3);\n}\n.head-left, .head-center, .head-right {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 33%;\n}\n.head-left {\r\n    justify-content: flex-start;\n}\n.head-center {\r\n    width: 34%;\r\n    justify-content: center;\n}\n.head-right {\r\n    justify-content: flex-end;\n}\n.button {\r\n    width: 30px;\r\n    height: 30px;\r\n    margin: 5px;\r\n    transition: all .3s;\n}\n.button:hover {\r\n    background-color: rgb(0, 60, 60);\n}\n.code {\r\n    font-size: 20px;\r\n    text-decoration: none;\r\n    color: rgb(160, 160, 160);\r\n    margin: 0px 20px 0px 20px;\r\n    padding: 2px 3px 2px 3px;\r\n    transition: all .3s;\n}\n.code:hover {\r\n    background-color: rgb(0, 60, 60);\n}\n.demo-select {\r\n    background-color: rgba(0, 0, 0, 0);\r\n    color: rgb(160, 160, 160);\r\n    outline: none;\r\n    border: none;\r\n    padding-left: 50px;\r\n    padding-right: 50px;\n}\n.demo-select option {\r\n    background-color: rgb(48, 48, 48);\n}\n.options {\r\n    position: fixed;\r\n    width: 20%;\r\n    height: 100%;\r\n    background-color: rgba(48, 48, 48);\r\n    top: 40px;\r\n    right: -16%;\r\n    opacity: 0.7;\r\n    transition: all ease-out 0.4s;\r\n    border-left: solid 2px rgb(44, 44, 44);\r\n    overflow: scroll;\r\n    /* Hide scrollbar for IE, Edge and Firefox */\r\n    -ms-overflow-style: none;\r\n    scrollbar-width: none;\n}\r\n\r\n/* Hide scrollbar for Chrome, Safari and Opera */\n.options::-webkit-scrollbar {\r\n    display: none;\n}\n.options:hover {\r\n    right: 0px;\r\n    opacity: 1;\n}\n.folder-name {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 25px;\r\n    background-color: rgb(40, 40, 40);\r\n    color: rgb(160, 160, 160);\r\n    border-bottom: solid 2px rgb(25, 25, 25);\n}\n.option {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 30px;\r\n    color: rgb(160, 160, 160);\r\n    border-bottom: solid 2px rgb(40, 40, 40);\n}\n.option:hover {\r\n    background-color: rgb(40, 40, 40);\n}\n.option-name {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    width: 100%;\r\n    padding-left: 4px;\n}\n.select {\r\n    position: absolute;\r\n    right: 5px;\r\n    background-color: rgba(0, 0, 0, 0);\r\n    color: rgb(160, 160, 160);\r\n    outline: none;\r\n    border: none;\n}\n.select option {\r\n    background-color: rgb(48, 48, 48);\n}\n.checkbox {\r\n    position: absolute;\r\n    right: 4px;\r\n    outline: none;\r\n    border: none;\n}\n.range-container {\r\n    position: absolute;\r\n    right: 4px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 50%;\r\n    height: 20px;\n}\n.range-range {\r\n    width: calc(95% - 30px);\r\n    height: 80%;\n}\n.range-value {\r\n    text-overflow: clip;\r\n    width: 30px;\r\n    height: 80%;\r\n    border: none;\r\n    background-color: rgba(0, 0, 0, 0);\r\n    color: rgb(160, 160, 160);\n}\n.info-field {\r\n    position: absolute;\r\n    bottom: 3px;\r\n    left: 3px;\n}\n.info {\r\n    color: rgb(160, 160, 160);\r\n    font-size: x-large;\n}\n#canvas-container {\r\n    width: 100%;\r\n    height: 100%;\n}\n.noselect {\r\n    -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n    -khtml-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\n}\ninput[type='range'] {\r\n    overflow: hidden;\r\n    -webkit-appearance: none;\r\n    background-color: rgb(80, 80, 100);\n}\ninput[type='range']::-webkit-slider-thumb {\r\n    width: 1px;\r\n    height: 0px;\r\n    -webkit-appearance: none;\r\n    box-shadow: -100vw 0 0 100vw rgb(60, 60, 80);\n}\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\n}\ninput[type=number] {\r\n  -moz-appearance: textfield;\n}\r\n\r\n","",{version:3,sources:["App.vue?vue&type=style&index=0&lang=css&"],names:[],mappings:";AACA;IACI,eAAe;IACf,SAAS;IACT,QAAQ;IACR,WAAW;IACX,YAAY;IACZ,iCAAiC;AACrC;AACA;IACI,aAAa;IACb,8BAA8B;IAC9B,eAAe;IACf,WAAW;IACX,YAAY;IACZ,oCAAoC;AACxC;AACA;IACI,aAAa;IACb,mBAAmB;IACnB,UAAU;AACd;AACA;IACI,2BAA2B;AAC/B;AACA;IACI,UAAU;IACV,uBAAuB;AAC3B;AACA;IACI,yBAAyB;AAC7B;AACA;IACI,WAAW;IACX,YAAY;IACZ,WAAW;IACX,mBAAmB;AACvB;AACA;IACI,gCAAgC;AACpC;AACA;IACI,eAAe;IACf,qBAAqB;IACrB,yBAAyB;IACzB,yBAAyB;IACzB,wBAAwB;IACxB,mBAAmB;AACvB;AACA;IACI,gCAAgC;AACpC;AACA;IACI,kCAAkC;IAClC,yBAAyB;IACzB,aAAa;IACb,YAAY;IACZ,kBAAkB;IAClB,mBAAmB;AACvB;AACA;IACI,iCAAiC;AACrC;AACA;IACI,eAAe;IACf,UAAU;IACV,YAAY;IACZ,kCAAkC;IAClC,SAAS;IACT,WAAW;IACX,YAAY;IACZ,6BAA6B;IAC7B,sCAAsC;IACtC,gBAAgB;IAChB,4CAA4C;IAC5C,wBAAwB;IACxB,qBAAqB;AACzB;;AAEA,gDAAgD;AAChD;IACI,aAAa;AACjB;AACA;IACI,UAAU;IACV,UAAU;AACd;AACA;IACI,aAAa;IACb,mBAAmB;IACnB,WAAW;IACX,YAAY;IACZ,iCAAiC;IACjC,yBAAyB;IACzB,wCAAwC;AAC5C;AACA;IACI,aAAa;IACb,mBAAmB;IACnB,WAAW;IACX,YAAY;IACZ,yBAAyB;IACzB,wCAAwC;AAC5C;AACA;IACI,iCAAiC;AACrC;AACA;IACI,aAAa;IACb,mBAAmB;IACnB,YAAY;IACZ,WAAW;IACX,iBAAiB;AACrB;AACA;IACI,kBAAkB;IAClB,UAAU;IACV,kCAAkC;IAClC,yBAAyB;IACzB,aAAa;IACb,YAAY;AAChB;AACA;IACI,iCAAiC;AACrC;AACA;IACI,kBAAkB;IAClB,UAAU;IACV,aAAa;IACb,YAAY;AAChB;AACA;IACI,kBAAkB;IAClB,UAAU;IACV,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;IACnB,UAAU;IACV,YAAY;AAChB;AACA;IACI,uBAAuB;IACvB,WAAW;AACf;AACA;IACI,mBAAmB;IACnB,WAAW;IACX,WAAW;IACX,YAAY;IACZ,kCAAkC;IAClC,yBAAyB;AAC7B;AACA;IACI,kBAAkB;IAClB,WAAW;IACX,SAAS;AACb;AACA;IACI,yBAAyB;IACzB,kBAAkB;AACtB;AACA;IACI,WAAW;IACX,YAAY;AAChB;AACA;IACI,2BAA2B;IAC3B,yBAAyB;IACzB,wBAAwB;IACxB,sBAAsB;IACtB,qBAAqB;IACrB,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,wBAAwB;IACxB,kCAAkC;AACtC;AACA;IACI,UAAU;IACV,WAAW;IACX,wBAAwB;IACxB,4CAA4C;AAChD;AACA;;EAEE,wBAAwB;EACxB,SAAS;AACX;AACA;EACE,0BAA0B;AAC5B",file:"App.vue?vue&type=style&index=0&lang=css&",sourcesContent:["\n#app {\r\n    position: fixed;\r\n    left: 0px;\r\n    top: 0px;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgb(48, 48, 48);\n}\n.head {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    position: fixed;\r\n    width: 100%;\r\n    height: 40px;\r\n    background-color: rgba(0, 0, 0, 0.3);\n}\n.head-left, .head-center, .head-right {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 33%;\n}\n.head-left {\r\n    justify-content: flex-start;\n}\n.head-center {\r\n    width: 34%;\r\n    justify-content: center;\n}\n.head-right {\r\n    justify-content: flex-end;\n}\n.button {\r\n    width: 30px;\r\n    height: 30px;\r\n    margin: 5px;\r\n    transition: all .3s;\n}\n.button:hover {\r\n    background-color: rgb(0, 60, 60);\n}\n.code {\r\n    font-size: 20px;\r\n    text-decoration: none;\r\n    color: rgb(160, 160, 160);\r\n    margin: 0px 20px 0px 20px;\r\n    padding: 2px 3px 2px 3px;\r\n    transition: all .3s;\n}\n.code:hover {\r\n    background-color: rgb(0, 60, 60);\n}\n.demo-select {\r\n    background-color: rgba(0, 0, 0, 0);\r\n    color: rgb(160, 160, 160);\r\n    outline: none;\r\n    border: none;\r\n    padding-left: 50px;\r\n    padding-right: 50px;\n}\n.demo-select option {\r\n    background-color: rgb(48, 48, 48);\n}\n.options {\r\n    position: fixed;\r\n    width: 20%;\r\n    height: 100%;\r\n    background-color: rgba(48, 48, 48);\r\n    top: 40px;\r\n    right: -16%;\r\n    opacity: 0.7;\r\n    transition: all ease-out 0.4s;\r\n    border-left: solid 2px rgb(44, 44, 44);\r\n    overflow: scroll;\r\n    /* Hide scrollbar for IE, Edge and Firefox */\r\n    -ms-overflow-style: none;\r\n    scrollbar-width: none;\n}\r\n\r\n/* Hide scrollbar for Chrome, Safari and Opera */\n.options::-webkit-scrollbar {\r\n    display: none;\n}\n.options:hover {\r\n    right: 0px;\r\n    opacity: 1;\n}\n.folder-name {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 25px;\r\n    background-color: rgb(40, 40, 40);\r\n    color: rgb(160, 160, 160);\r\n    border-bottom: solid 2px rgb(25, 25, 25);\n}\n.option {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 30px;\r\n    color: rgb(160, 160, 160);\r\n    border-bottom: solid 2px rgb(40, 40, 40);\n}\n.option:hover {\r\n    background-color: rgb(40, 40, 40);\n}\n.option-name {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    width: 100%;\r\n    padding-left: 4px;\n}\n.select {\r\n    position: absolute;\r\n    right: 5px;\r\n    background-color: rgba(0, 0, 0, 0);\r\n    color: rgb(160, 160, 160);\r\n    outline: none;\r\n    border: none;\n}\n.select option {\r\n    background-color: rgb(48, 48, 48);\n}\n.checkbox {\r\n    position: absolute;\r\n    right: 4px;\r\n    outline: none;\r\n    border: none;\n}\n.range-container {\r\n    position: absolute;\r\n    right: 4px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 50%;\r\n    height: 20px;\n}\n.range-range {\r\n    width: calc(95% - 30px);\r\n    height: 80%;\n}\n.range-value {\r\n    text-overflow: clip;\r\n    width: 30px;\r\n    height: 80%;\r\n    border: none;\r\n    background-color: rgba(0, 0, 0, 0);\r\n    color: rgb(160, 160, 160);\n}\n.info-field {\r\n    position: absolute;\r\n    bottom: 3px;\r\n    left: 3px;\n}\n.info {\r\n    color: rgb(160, 160, 160);\r\n    font-size: x-large;\n}\n#canvas-container {\r\n    width: 100%;\r\n    height: 100%;\n}\n.noselect {\r\n    -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n    -khtml-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\n}\ninput[type='range'] {\r\n    overflow: hidden;\r\n    -webkit-appearance: none;\r\n    background-color: rgb(80, 80, 100);\n}\ninput[type='range']::-webkit-slider-thumb {\r\n    width: 1px;\r\n    height: 0px;\r\n    -webkit-appearance: none;\r\n    box-shadow: -100vw 0 0 100vw rgb(60, 60, 80);\n}\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\n}\ninput[type=number] {\r\n  -moz-appearance: textfield;\n}\r\n\r\n"]}])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),s=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[n].concat(s).concat([r]).join("\n")}var o;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(r=0;r<t.length;r++){var o=t[r];null!=o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,s,o,a,h=1,u={},l=!1,c=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){f(t.data)},i=function(t){s.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,i=function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(f,0,t)}:(o="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(o+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return u[h]=r,i(h),h++},d.clearImmediate=p}function p(t){delete u[t]}function f(t){if(l)setTimeout(f,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(11),n(27))},function(t,e){var n,i,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var h,u=[],l=!1,c=-1;function d(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&p())}function p(){if(!l){var t=a(d);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){(function(t,i){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof i&&i;o.global!==o&&o.window!==o&&o.self;var a,h=2147483647,u=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw new RangeError(d[t])}function y(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function v(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+y((t=t.replace(c,".")).split("."),e).join(".")}function g(t){for(var e,n,i=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function _(t){return y(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var i=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;i+=36)t=p(t/35);return p(i+36*t/(t+38))}function A(t){var e,n,i,r,s,o,a,u,l,c,d,f=[],y=t.length,v=0,g=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&m("not-basic"),f.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<y;){for(s=v,o=1,a=36;r>=y&&m("invalid-input"),((u=(d=t.charCodeAt(r++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||u>p((h-v)/o))&&m("overflow"),v+=u*o,!(u<(l=a<=b?1:a>=b+26?26:a-b));a+=36)o>p(h/(c=36-l))&&m("overflow"),o*=c;b=x(v-s,e=f.length+1,0==s),p(v/e)>h-g&&m("overflow"),g+=p(v/e),v%=e,f.splice(v++,0,g)}return _(f)}function w(t){var e,n,i,r,s,o,a,u,l,c,d,y,v,_,A,w=[];for(y=(t=g(t)).length,e=128,n=0,s=72,o=0;o<y;++o)(d=t[o])<128&&w.push(f(d));for(i=r=w.length,r&&w.push("-");i<y;){for(a=h,o=0;o<y;++o)(d=t[o])>=e&&d<a&&(a=d);for(a-e>p((h-n)/(v=i+1))&&m("overflow"),n+=(a-e)*v,e=a,o=0;o<y;++o)if((d=t[o])<e&&++n>h&&m("overflow"),d==e){for(u=n,l=36;!(u<(c=l<=s?1:l>=s+26?26:l-s));l+=36)A=u-c,_=36-c,w.push(f(b(c+A%_,0))),u=p(A/_);w.push(f(b(u,0))),s=x(n,v,i==r),n=0,++i}++n,++e}return w.join("")}a={version:"1.4.1",ucs2:{decode:g,encode:_},decode:A,encode:w,toASCII:function(t){return v(t,(function(t){return l.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return v(t,(function(t){return u.test(t)?A(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n(29)(t),n(11))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(32),e.encode=e.stringify=n(33)},function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,s){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,d,p,f,m=t[l].replace(a,"%20"),y=m.indexOf(n);y>=0?(c=m.substr(0,y),d=m.substr(y+1)):(c=m,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),i(o,p)?r(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?s(o(t),(function(o){var a=encodeURIComponent(i(o))+n;return r(t[o])?s(t[o],(function(t){return a+encodeURIComponent(i(t))})).join(e):a+encodeURIComponent(i(t[o]))})).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var o=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";n.r(e),n.d(e,"App",(function(){return ut})),n.d(e,"Demo",(function(){return lt})),n.d(e,"Demos",(function(){return Fr})),n.d(e,"DemoByName",(function(){return Gr})),n.d(e,"app",(function(){return Ur}));var i,r,s,o,a=n(18),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"noselect",attrs:{id:"app"}},[n("div",{staticClass:"head"},[n("div",{staticClass:"head-left"},[n("div",{staticClass:"button",attrs:{title:"Play/Pause(p)"},on:{click:t.togglePlay}},[n("svg",{attrs:{fill:"#a0a0a0",width:"100%",height:"100%",viewBox:"0 0 36 36"}},[t.paused?n("path",{attrs:{d:"M11,10 L18,13.74 18,22.28 11,26 M18,13.74 L26,18 26,18 18,22.28"}}):n("path",{attrs:{d:"M11,10 L17,10 17,26 11,26 M20,10 L26,10 26,26 20,26"}})])]),t._v(" "),n("div",{staticClass:"button",attrs:{title:"Single step(o)"},on:{click:t.singleStep}},[n("svg",{staticStyle:{margin:"7px"},attrs:{fill:"#a0a0a0",width:"16px",height:"16px",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M0,256L256,0v128L128,256l128,128v128L0,256z M512,512V384L384,256l128-128V0L256,256L512,512z",transform:"rotate(180, 256, 256)"}})])]),t._v(" "),n("div",{staticClass:"button",attrs:{title:"Restart(r)"},on:{click:t.onRestart}},[n("svg",{staticStyle:{margin:"3px"},attrs:{fill:"#a0a0a0",width:"24px",height:"24px",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}})])])]),t._v(" "),n("div",{staticClass:"head-center"},[n("select",{staticClass:"demo-select",on:{change:function(e){t.onSelectDemo(e.target.value)}}},t._l(t.demos,(function(e,i){return n("option",{key:i},[t._v(" "+t._s(e.options.name)+" ")])})),0),t._v(" "),n("a",{staticClass:"code",attrs:{href:t.codeUrl,target:"_blank"}},[t._v(" { } ")])]),t._v(" "),n("div",{staticClass:"head-right"})]),t._v(" "),n("a",{staticClass:"info-field"},[t._l(t.info,(function(e){return[n("div",{key:e,staticClass:"info"},[t._v("\n                "+t._s(e)+"\n            ")])]}))],2),t._v(" "),n("div",{attrs:{id:"canvas-container"}}),t._v(" "),n("div",{staticClass:"options"},[n("div",{staticClass:"folder-name"},[t._v("Runner")]),t._v(" "),n("div",{staticClass:"option"},[n("div",{staticClass:"option-name"},[t._v("Runner type")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.runnerOptions.type,expression:"runnerOptions.type"}],staticClass:"select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.runnerOptions,"type",e.target.multiple?n:n[0])},function(e){return t.onSetSleeping(t.sleeping)}]}},[n("option",{domProps:{value:t.RunnerType.fixed}},[t._v("Fixed")]),t._v(" "),n("option",{domProps:{value:t.RunnerType.dynamic}},[t._v("Dynamic")])])]),t._v(" "),n("div",{staticClass:"option"},[n("div",{staticClass:"option-name"},[t._v("Timescale")]),t._v(" "),n("div",{staticClass:"range-container"},[n("div",{staticClass:"range-value"},[t._v(" "+t._s(t.runnerOptions.timescale)+" ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.runnerOptions.timescale,expression:"runnerOptions.timescale"}],staticClass:"range-range",attrs:{type:"range",min:"0.5",max:"5",step:"0.25"},domProps:{value:t.runnerOptions.timescale},on:{__r:function(e){return t.$set(t.runnerOptions,"timescale",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.runnerOptions.correction,expression:"runnerOptions.correction"}],staticClass:"checkbox",attrs:{type:"checkbox",id:"runner-correction"},domProps:{checked:Array.isArray(t.runnerOptions.correction)?t._i(t.runnerOptions.correction,null)>-1:t.runnerOptions.correction},on:{change:function(e){var n=t.runnerOptions.correction,i=e.target,r=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&t.$set(t.runnerOptions,"correction",n.concat([null])):s>-1&&t.$set(t.runnerOptions,"correction",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.runnerOptions,"correction",r)}}}),t._v(" "),n("label",{staticClass:"option-name",attrs:{for:"runner-correction"}},[t._v(" Correction(for dynamic) ")])]),t._v(" "),n("div",{staticClass:"folder-name"},[t._v("Engine")]),t._v(" "),n("div",{staticClass:"option"},[n("div",{staticClass:"option-name"},[t._v("Sleeping")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.sleeping,expression:"sleeping"}],staticClass:"select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.sleeping=e.target.multiple?n:n[0]},function(e){return t.onSetSleeping(t.sleeping)}]}},[n("option",{domProps:{value:t.SleepingType.NO_SLEEPING}},[t._v("No sleeping")]),t._v(" "),n("option",{domProps:{value:t.SleepingType.BODY_SLEEPING}},[t._v("Body sleeping")]),t._v(" "),n("option",{attrs:{disabled:""},domProps:{value:t.SleepingType.ISLAND_SLEEPING}},[t._v("Island sleeping")])])]),t._v(" "),n("div",{staticClass:"option"},[n("a",{staticClass:"option-name"},[t._v("GravityX")]),t._v(" "),n("div",{staticClass:"range-container"},[n("div",{staticClass:"range-value"},[t._v(" "+t._s(t.gravity.x)+" ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.gravity.x,expression:"gravity.x"}],staticClass:"range-range",attrs:{type:"range",min:"-20",max:"20",step:"1"},domProps:{value:t.gravity.x},on:{__r:function(e){return t.$set(t.gravity,"x",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"option"},[n("a",{staticClass:"option-name"},[t._v("GravityY")]),t._v(" "),n("div",{staticClass:"range-container"},[n("div",{staticClass:"range-value"},[t._v(" "+t._s(t.gravity.y)+" ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.gravity.y,expression:"gravity.y"}],staticClass:"range-range",attrs:{type:"range",min:"-20",max:"20",step:"1"},domProps:{value:t.gravity.y},on:{__r:function(e){return t.$set(t.gravity,"y",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"folder-name"},[t._v("Solver")]),t._v(" "),t._l(t.solverOptions,(function(e,i){return[n("div",{key:i,staticClass:"option"},[n("a",{staticClass:"option-name"},[t._v(t._s(i))]),t._v(" "),n("div",{staticClass:"range-container"},[n("div",{staticClass:"range-value"},[t._v(" "+t._s(e)+" ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.solverOptions[i],expression:"solverOptions[option]"}],staticClass:"range-range",attrs:{type:"range",id:i,min:"constraintIterations"===i?2:1,max:"30",step:"1"},domProps:{value:t.solverOptions[i]},on:{__r:function(e){return t.$set(t.solverOptions,i,e.target.value)}}})])])]})),t._v(" "),n("div",{staticClass:"folder-name"},[t._v("Render")]),t._v(" "),t._l(t.renderOptions,(function(e,i){return[n("div",{key:i,staticClass:"option"},[n("input",{staticClass:"checkbox",attrs:{type:"checkbox",id:i},domProps:{checked:e},on:{change:t.setRenderOption}}),t._v(" "),n("label",{staticClass:"option-name",attrs:{for:i}},[t._v(t._s(i))])])]}))],2),t._v(" "),n("input",{staticStyle:{position:"absolute",opacity:"0"},attrs:{id:"focus",type:"text"}})])};h._withStripped=!0;class u{static sign(t){return t>=0?1:-1}static nextId(t="id"){const e=this.IDs.get(t);return void 0===this.IDs.get(t)?(this.IDs.set(t,0),0):(this.IDs.set(t,e+1),e+1)}static combineId(t,e){return t<e?(t<<16)+e:(e<<16)+t}static clamp(t,e,n){return e>t?e:n<t?n:t}static normaliseAngle(t){return(t%this.PI2+this.PI3)%this.PI2-this.PI}static angleDiff(t,e){return this.normaliseAngle(t-e)}static clampAngle(t,e,n){if(Math.abs(n-e)<.001)return n;const i=this.angleDiff(t,e),r=this.angleDiff(t,n);return i>0&&r<0?t:Math.abs(r)>Math.abs(i)?t-i:t-r}}u.IDs=new Map,u.PI05=.5*Math.PI,u.PI=Math.PI,u.PI2=2*Math.PI,u.PI3=3*Math.PI;class l{constructor(t=0,e=0){this.x=t,this.y=e}clone(t){return t?(t.x=this.x,t.y=this.y,t):new l(this.x,this.y)}set(t,e){return this.x=t,this.y=e,this}rotate(t,e=this){const n=Math.cos(t),i=Math.sin(t),r=this.x,s=this.y;return e.x=r*n-s*i,e.y=r*i+s*n,e}neg(t=this){return t.x=-this.x,t.y=-this.y,t}rotate90(t=this){const e=this.x;return t.x=-this.y,t.y=e,t}rotate270(t=this){const e=this.x;return t.x=this.y,t.y=-e,t}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}lengthSquared(){return Math.pow(this.x,2)+Math.pow(this.y,2)}normalise(t=this){const e=this.length();return t.x=this.x/e,t.y=this.y/e,t}scale(t,e=this){return e.x=this.x*t,e.y=this.y*t,e}divide(t,e=this){return e.x=this.x/t,e.y=this.y/t,e}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}static angle(t,e){return e?Math.atan2(e.y-t.y,e.x-t.x):Math.atan2(t.y,t.x)}static dist(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static distSquared(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}static dot(t,e){return t.x*e.x+t.y*e.y}static cross(t,e){return t.x*e.y-t.y*e.x}static add(t,e,n){return n.x=t.x+e.x,n.y=t.y+e.y,n}static subtract(t,e,n){return n.x=t.x-e.x,n.y=t.y-e.y,n}static mult(t,e,n=t){return n.x=t.x*e.x,n.y=t.y*e.y,n}static isCollinear(t,e){return Math.abs(t.x/t.y-e.x/e.y)<1e-4||0===t.y&&0===e.y}static interpolate(t,e,n,i){return i.x=t.x+n*(e.x-t.x),i.y=t.y+n*(e.y-t.y),i}static lineLineIntersection(t,e,n,i,r){const s=l.lineLineIntersectionFraction(t,e,n,i);return s<0?void 0:(r.x=t.x+s*(e.x-t.x),r.y=t.y+s*(e.y-t.y),r)}static lineLineIntersectionFraction(t,e,n,i){const r=e.x-t.x,s=e.y-t.y,o=i.x-n.x,a=i.y-n.y,h=t.y-n.y,u=t.x-n.x,l=r*a-o*s;let c=(r*h-s*u)/l;if(c<0||c>1)return-1;let d=(o*h-a*u)/l;return d<0||d>1?-1:d}static zeroT(t,e){const n=l.subtract(e,t,l.prTemp[0]);return-u.clamp(l.dot(n,l.add(t,e,l.prTemp[1]))/n.lengthSquared(),-1,1)}static interpolateT(t,e,n,i=new l){const r=.5*n;return l.add(t.scale(.5-r,l.prTemp[0]),e.scale(.5+r,l.prTemp[1]),i)}static distSquaredToZero(t,e){return l.interpolateT(t,e,l.zeroT(t,e),l.prTemp[0]).lengthSquared()}static side(t,e,n){return(e.y-t.y)*(t.x+e.x-2*n.x)>(e.x-t.x)*(t.y+e.y-2*n.y)}static zeroSide(t,e){return(e.y-t.y)*(t.x+e.x)>(e.x-t.x)*(t.y+e.y)}}l.zero=new l,l.temp=[new l,new l,new l,new l,new l,new l,new l],l.prTemp=[new l,new l];class c{constructor(){this.events=new Map,this.namesByIds=new Map}on(t,e){const n=u.nextId(),i=u.nextId();this.namesByIds.set(n,[t,i]);let r=this.events.get(t);return r||(r=new Map,this.events.set(t,r)),r.set(i,e),n}off(t){var e;const n=this.namesByIds.get(t);if(!n)return!1;const i=n[0],r=n[1];return null===(e=this.events.get(i))||void 0===e?void 0:e.delete(r)}trigger(t,e=[]){const n=this.events.get(t);if(n)for(const t of n.values())t(...e)}clear(){this.events.clear(),this.namesByIds.clear()}}class d{constructor(t=0,e=0,n=0,i=0){this.minX=t,this.minY=e,this.maxX=n,this.maxY=i}clone(t=new d){return t.minX=this.minX,t.minY=this.minY,t.maxX=this.maxX,t.maxY=this.maxY,t}fromVertices(t){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0;for(const e of t)e.x>this.maxX&&(this.maxX=e.x),e.x<this.minX&&(this.minX=e.x),e.y>this.maxY&&(this.maxY=e.y),e.y<this.minY&&(this.minY=e.y);return this}set(t,e){return this.minX=t.x,this.minY=t.y,this.maxX=e.x,this.maxY=e.y,this}setNum(t,e,n,i){return this.minX=t,this.minY=e,this.maxX=n,this.maxY=i,this}translate(t){this.minX+=t.x,this.minY+=t.y,this.maxX+=t.x,this.maxY+=t.y}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}overlaps(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.maxY>=t.minY&&this.minY<=t.maxY}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}d.temp=[new d];class p{constructor(t=4294967295,e=1,n=0){this.mask=4294967295,this.category=1,this.group=0,this.mask=t,this.category=e,this.group=n}static canCollide(t,e){return t.group===e.group&&t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)}static nextCategory(t){return t.category=t.category<<1,t.category}static nextGroup(t=!1){return t?this.nonCollidingGroup--:this.group++}}p.group=1,p.nonCollidingGroup=-1;class f{constructor(t){this.vertex=new l,this.normalImpulse=0,this.tangentImpulse=0,this.offsetA=new l,this.offsetB=new l,this.tangentShare=0,this.normalShare=0,this.pair=t}}class m{constructor(t,e){this.isActive=!1,this.isActivePrev=!1,this.friction=0,this.restitution=0,this.surfaceVelocity=0,this.depth=0,this.separation=0,this.normal=new l,this.penetration=new l,this.contactsCount=0,this.contacts=[new f(this),new f(this)],this.broadphaseCellsCount=0,this.isSleeping=!1,this.isSensor=!1,this.ratioA=0,this.ratioB=0,this.shapeA=t,this.shapeB=e,this.id=u.combineId(this.shapeA.id,this.shapeB.id)}update(){this.normal.scale(this.depth,this.penetration),this.friction=Math.min(this.shapeA.friction,this.shapeB.friction),this.restitution=Math.max(this.shapeA.restitution,this.shapeB.restitution),this.surfaceVelocity=this.shapeA.surfaceVelocity+this.shapeB.surfaceVelocity;const t=1/(this.shapeA.body.inverseMass+this.shapeB.body.inverseMass);this.ratioA=t*this.shapeA.body.inverseMass,this.ratioB=t*this.shapeB.body.inverseMass;for(let t=0;t<this.contactsCount;++t){const e=this.contacts[t];e.offsetA.x=e.vertex.x-this.shapeA.body.center.x,e.offsetA.y=e.vertex.y-this.shapeA.body.center.y,e.offsetB.x=e.vertex.x-this.shapeB.body.center.x,e.offsetB.y=e.vertex.y-this.shapeB.body.center.y;const n=e.offsetA.x*this.normal.x+e.offsetA.y*this.normal.y,i=e.offsetB.x*this.normal.x+e.offsetB.y*this.normal.y;e.tangentShare=1/(this.contactsCount*(this.shapeA.body.inverseMass+this.shapeB.body.inverseMass+this.shapeA.body.inverseInertia*n*n+this.shapeB.body.inverseInertia*i*i));const r=e.offsetA.x*this.normal.y-e.offsetA.y*this.normal.x,s=e.offsetB.x*this.normal.y-e.offsetB.y*this.normal.x;e.normalShare=1/(this.contactsCount*(this.shapeA.body.inverseMass+this.shapeB.body.inverseMass+this.shapeA.body.inverseInertia*r*r+this.shapeB.body.inverseInertia*s*s))}}}class y{constructor(){this.map=new Map}get(t){return this.map.get(this.getId(t))}set(t,e){this.map.set(this.getId(t),e)}delete(t){this.map.delete(this.getId(t))}getId(t){return(t.x<<20)+t.y}getPositionById(t){const e=t+524288>>20;return new l(e,t-(e<<20))}clear(){this.map.clear()}keys(){const t=[];for(const e of this.map.keys())t.push(this.getPositionById(e));return t}values(){return[...this.map.values()]}entries(){const t=[];for(const e of this.map.keys())t.push([this.getPositionById(e),this.map.get(e)]);return t}}class v extends d{constructor(){super(),this.id=0}updateId(){this.id=(this.minX<<30)+(this.minY<<20)+(this.maxX<<10)+this.maxY}}v.temp=[new v];class g{constructor(t){this.grid=new y,this.gridSize=1,this.activePairs=new Set,this.manager=t,this.engine=t.engine}update(){const t=this.engine.world.bodies.values();let e,n,i,r;for(const s of t)for(const t of s.shapes){const s=this.createRegion(t.aabb,v.temp[0]),o=t.region;if(o.id===s.id)continue;const a=l.temp[2];if(o.id){for(i=s.maxX,r=s.maxY,e=s.minX;e<=i;++e)for(n=s.minY;n<=r;++n){a.set(e,n);t.region.contains(a)||this.addShapeToCell(a,t)}for(i=o.maxX,r=o.maxY,e=o.minX;e<=i;++e)for(n=o.minY;n<=r;++n){a.set(e,n);s.contains(a)||this.removeShapeFromCell(a,t)}}else for(i=s.maxX,r=s.maxY,e=s.minX;e<=i;++e)for(n=s.minY;n<=r;++n)a.set(e,n),this.addShapeToCell(a,t);s.clone(t.region),t.region.id=s.id}}createRegion(t,e){return e.minX=t.minX/this.gridSize,e.minY=t.minY/this.gridSize,e.maxX=t.maxX/this.gridSize,e.maxY=t.maxY/this.gridSize,e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.floor(e.maxX),e.maxY=Math.floor(e.maxY),e.updateId(),e}createPair(t,e){const n=t.body.id>e.body.id,i=n?t:e,s=n?e:t,o=i.body,a=s.body;if(o===a||o.type!==r.dynamic&&a.type!==r.dynamic)return;const h=u.combineId(i.id,s.id),l=this.manager.pairs.get(h),c=l||new m(i,s);return this.activePairs.add(c),l||this.manager.pairs.set(h,c),c}getPair(t,e){const n=u.combineId(t.id,e.id);return this.manager.pairs.get(n)}createCell(t){const e=new Map;return this.grid.set(t,e),e}addShapeToCell(t,e){const n=this.grid.get(t);if(n){for(const t of n.values()){const n=this.createPair(t,e);n&&(n.broadphaseCellsCount+=1)}n.set(e.id,e)}else this.createCell(t).set(e.id,e)}removeShapeFromCell(t,e){const n=this.grid.get(t);if(n){n.delete(e.id);for(const t of n.values()){const n=this.getPair(e,t);n&&(n.broadphaseCellsCount-=1,n.broadphaseCellsCount<=0&&(n.isActive&&this.manager.endedPairs.push(n),this.activePairs.delete(n)))}0===n.size&&this.grid.delete(t)}}removeShape(t){if(t&&t.region)for(let e=t.region.minX;e<=t.region.maxX;++e)for(let n=t.region.minY;n<=t.region.maxY;++n){const i=l.temp[2].set(e,n);this.removeShapeFromCell(i,t)}}removeBody(t){for(const e of t.shapes)this.removeShape(e)}*pointTest(t){const e=l.temp[0].set(Math.floor(t.x/this.gridSize),Math.floor(t.y/this.gridSize)),n=this.grid.get(e);if(n)for(const t of null==n?void 0:n.values())yield t}*aabbTest(t){const e=this.createRegion(t,v.temp[0]),n=new Set;let i;for(let t=e.minX;t<=e.maxX;++t)for(i=e.minY;i<=e.maxY;++i){const e=l.temp[0].set(Math.floor(t/this.gridSize),Math.floor(i/this.gridSize)),r=this.grid.get(e);if(r)for(const t of null==r?void 0:r.values())n.has(t)||(n.add(t),yield t)}}}!function(t){t[t.CIRCLE=Math.pow(2,0)]="CIRCLE",t[t.CONVEX=Math.pow(2,1)]="CONVEX",t[t.EDGE=Math.pow(2,2)]="EDGE"}(i||(i={}));class _{constructor(t={},e){var n,i,r,s,o,a,h,c;this.id=u.nextId(),this.name="shape",this.type=0,this.position=new l,this.aabb=new d,this.area=0,this.density=100,this.mass=0,this.inertia=0,this.areaInertia=0,this.filter=new p,this.region=new v,this.radius=null!==(n=t.radius)&&void 0!==n?n:2*A.SLOP,t.filter&&(this.filter.category=null!==(i=t.filter.category)&&void 0!==i?i:this.filter.category,this.filter.mask=null!==(r=t.filter.mask)&&void 0!==r?r:this.filter.mask,this.filter.group=null!==(s=t.filter.group)&&void 0!==s?s:this.filter.group),this.restitution=null!==(o=t.restitution)&&void 0!==o?o:.1,this.friction=null!==(a=t.friction)&&void 0!==a?a:.4,this.surfaceVelocity=null!==(h=t.surfaceVelocity)&&void 0!==h?h:0,this.isSensor=null!==(c=t.isSensor)&&void 0!==c&&c,this.userData=e}setMass(t){this.setDensity(t/this.area)}setDensity(t){var e,n;this.density=t,this.mass=this.density*this.area,this.inertia=this.mass*this.areaInertia,null===(e=this.body)||void 0===e||e.updateMass(),null===(n=this.body)||void 0===n||n.updateInertia()}}!function(t){t[t.dynamic=0]="dynamic",t[t.static=1]="static",t[t.kinematic=2]="kinematic"}(r||(r={}));class b{constructor(t={},e){this.id=u.nextId(),this.name="body",this.shapes=new Set,this.events=new c,this.positionImpulse=new l,this.constraintImpulse=new l,this.constraintAngleImpulse=0,this.pairsCount=0,this.angularAcceleration=0,this.angle=0,this.anglePrev=0,this.angularVelocity=0,this.torque=0,this.center=new l,this.position=new l,this.positionPrev=new l,this.acceleration=new l,this.velocity=new l,this.force=new l,this.dir=new l(1,0),this.constraintDir=new l(1,0),this.constraintAngle=0,this.type=r.dynamic,this.velocityDamping=0,this.mass=0,this.inverseMass=0,this.inertia=0,this.inverseInertia=0,this.area=0,this.sleepState=s.AWAKE,this.sleepyTimer=0,this.motion=0,this.speedSquared=0,this.angSpeedSquared=0,this.constraints=new Set,this.set(t),this.userData=e,this.updateArea(),this.updateMass(),this.updateInertia()}set(t){for(const e of Object.entries(t))switch(e[0]){case"position":this.setPosition(e[1]);break;case"angle":this.setAngle(e[1]);break;case"type":this.setType(e[1]);break;case"velocityDamping":this.velocityDamping=e[1];break;case"fixedRotation":this.setFixedRotation(e[1])}}updateVelocity(t){this.speedSquared=this.velocity.lengthSquared(),this.angSpeedSquared=Math.pow(this.angularVelocity,2),this.motion=this.speedSquared+this.angSpeedSquared,this.force.scale(this.inverseMass*t,this.acceleration),this.velocity.scale(1-this.velocityDamping).add(this.acceleration.scale(t)),this.angularAcceleration=this.torque*this.inverseInertia*t,this.angularVelocity=this.angularVelocity*(1-this.velocityDamping)+this.angularAcceleration*t,this.force.set(0,0),this.torque=0}updatePosition(){this.position.clone(this.positionPrev),this.translate(this.velocity),this.anglePrev=this.angle,this.rotate(this.angularVelocity);for(const t of this.shapes)t.updateAABB()}addShape(t,e=new l,n=0){return t.rotate(this.angle+n),t.translate(this.position),t.translate(e),t.updateAABB(),t.body=this,this.shapes.add(t),this.updateArea(),this.updateMass(),this.updateCenterOfMass(),this.updateInertia(),this.events.trigger("add-shape",[{shape:t,body:this}]),t}removeShape(t){return this.shapes.delete(t),t.body=void 0,this.updateArea(),this.updateMass(),this.updateCenterOfMass(),this.updateInertia(),this.events.trigger("add-shape",[{shape:t,body:this}]),t}updateArea(){this.area=0;for(const t of this.shapes)this.area+=t.area}updateInertia(){if(this.inertia=0,this.type===r.dynamic)for(const t of this.shapes){t.updateInertia();const e=l.distSquared(this.center,t.position);this.inertia+=t.inertia+e*t.mass}else this.inertia=0,this.inverseInertia=0;this.inverseInertia=0===this.inertia?0:1/this.inertia}updateMass(){if(this.type===r.dynamic){this.mass=0;for(const t of this.shapes)this.mass+=t.mass;this.inverseMass=0===this.mass?0:1/this.mass}else this.mass=0,this.inverseMass=0}updateCenterOfMass(){const t=l.temp[0],e=l.temp[1];t.set(0,0);let n=0;for(const i of this.shapes)l.subtract(this.center,i.position,e),t.add(e.scale(i.mass,l.temp[2])),n+=i.mass;const r=t.divide(n,l.temp[1]);l.subtract(this.center,r,this.center);for(const t of this.shapes)if(t.type===i.CONVEX){const e=t;for(const t of e.vertices)l.subtract(t,this.center,e.deltaVertices[t.index])}this.updateInertia()}setPosition(t){this.translate(l.subtract(t,this.position,b.vecTemp[0]))}translate(t){this.position.add(t),this.center.add(t);for(const e of this.shapes)e.translate(t)}setAngle(t){this.rotate(t-this.angle)}rotate(t){if(0===t)return;this.angle+=t;const e=Math.cos(t),n=Math.sin(t);let r,s,o,a=this.dir.x,h=this.dir.y;this.dir.x=a*e-h*n,this.dir.y=a*n+h*e,this.constraintDir.x=this.dir.x,this.constraintDir.y=this.dir.y,this.constraintAngle=this.angle;for(const t of this.shapes)switch(a=t.position.x-this.center.x,h=t.position.y-this.center.y,t.position.x=a*e-h*n+this.center.x,t.position.y=a*n+h*e+this.center.y,t.type){case i.CONVEX:r=t.vertices;for(const i of r)s=t.deltaVertices[i.index],a=s.x,h=s.y,s.x=a*e-h*n,s.y=a*n+h*e,i.x=s.x+this.center.x,i.y=s.y+this.center.y;o=t.normals;for(const t of o)a=t.x,h=t.y,t.x=a*e-h*n,t.y=a*n+h*e;break;case i.EDGE:a=t.position.x-this.center.x,h=t.position.y-this.center.y,t.position.x=a*e-h*n+this.center.x,t.position.y=a*n+h*e+this.center.y,a=t.start.x-this.center.x,h=t.start.y-this.center.y,t.start.x=a*e-h*n+this.center.x,t.start.y=a*n+h*e+this.center.y,a=t.end.x-this.center.x,h=t.end.y-this.center.y,t.end.x=a*e-h*n+this.center.x,t.end.y=a*n+h*e+this.center.y,a=t.normal.x,h=t.normal.y,t.normal.x=a*e-h*n,t.normal.y=a*n+h*e,t.normal.neg(t.ngNormal)}}setType(t){if(this.type===t)return;const e=this.type;this.type=t,this.acceleration.set(0,0),this.velocity.set(0,0),this.force.set(0,0),this.angularAcceleration=0,this.angularVelocity=0,this.torque=0,this.positionImpulse.set(0,0),t===r.dynamic?(this.setSleeping(s.AWAKE),this.events.trigger("become-dynamic",[{previousType:e}])):t===r.static?this.events.trigger("become-static",[{previousType:e}]):t===r.kinematic&&this.events.trigger("become-kinematic",[{previousType:e}]),this.updateMass(),this.updateInertia()}setSleeping(t){const e=this.sleepState;this.sleepState=t,this.sleepState===s.SLEEPING?(this.sleepyTimer=x.SLEEPY_TIME_LIMIT,this.positionImpulse.set(0,0),this.velocity.set(0,0),this.angularVelocity=0,this.motion=0,this.sleepState!==e&&this.events.trigger("sleep-start")):this.sleepState===s.AWAKE&&(this.sleepyTimer=0,this.sleepState!==e&&this.events.trigger("sleep-end"))}applyForce(t,e){this.force.add(t),e&&(this.torque+=l.cross(e,t))}applyImpulse(t,e){const n=t.scale(this.inverseMass,b.vecTemp[0]);if(this.velocity.add(n),e){const n=l.cross(e,t)*this.inverseInertia;this.angularVelocity+=n}}setVelocity(t){t.clone(this.velocity)}setFixedRotation(t){t?(this.inertia=0,this.inverseInertia=0):this.updateInertia()}}b.vecTemp=[new l],function(t){t[t.AWAKE=0]="AWAKE",t[t.SLEEPY=1]="SLEEPY",t[t.SLEEPING=2]="SLEEPING"}(s||(s={})),function(t){t[t.NO_SLEEPING=0]="NO_SLEEPING",t[t.BODY_SLEEPING=1]="BODY_SLEEPING",t[t.ISLAND_SLEEPING=2]="ISLAND_SLEEPING"}(o||(o={}));class x{constructor(t,e={}){this.engine=t,this.type=void 0!==e.type?e.type:o.BODY_SLEEPING}setType(t){if(this.type!==t)if(this.type!==o.NO_SLEEPING){this.type=t;for(const t of this.engine.world.sleepingBodies.values())t.setSleeping(s.AWAKE)}else this.type=t}update(t){switch(this.type){case o.NO_SLEEPING:return;case o.BODY_SLEEPING:for(const e of this.engine.world.activeBodies.values())e.motion<=x.MOTION_SLEEP_LIMIT?e.sleepyTimer+=t:e.sleepyTimer>0&&(e.sleepyTimer-=t),e.sleepyTimer>=x.SLEEPY_TIME_LIMIT&&e.setSleeping(s.SLEEPING);for(const t of this.engine.world.sleepingBodies.values())0===t.force.x&&0===t.force.y||t.setSleeping(s.AWAKE);break;case o.ISLAND_SLEEPING:}}afterCollisions(){var t,e,n,i,a,h,u,l;switch(this.type){case o.NO_SLEEPING:return;case o.BODY_SLEEPING:const c=this.engine.manager.activePairs;for(const t of c){const e=t.shapeA.body,n=t.shapeB.body;if(e.sleepState!==s.SLEEPING&&n.sleepState!==s.SLEEPING)continue;const i=e.sleepState===s.SLEEPING,o=i?e:n;if(o.type!==r.dynamic)continue;(i?n:e).motion>x.COLLISION_MOTION_SLEEP_LIMIT&&o.setSleeping(s.AWAKE)}const d=this.engine.manager.endedPairs;for(const o of d)(null===(t=o.shapeA.body)||void 0===t?void 0:t.type)===r.dynamic&&(null===(e=o.shapeA.body)||void 0===e||e.setSleeping(s.AWAKE)),(null===(n=o.shapeB.body)||void 0===n?void 0:n.type)===r.dynamic&&(null===(i=o.shapeB.body)||void 0===i||i.setSleeping(s.AWAKE));const p=this.engine.manager.startedPairs;for(const t of p)(null===(a=t.shapeA.body)||void 0===a?void 0:a.type)===r.dynamic&&(null===(h=t.shapeA.body)||void 0===h||h.setSleeping(s.AWAKE)),(null===(u=t.shapeB.body)||void 0===u?void 0:u.type)===r.dynamic&&(null===(l=t.shapeB.body)||void 0===l||l.setSleeping(s.AWAKE));break;case o.ISLAND_SLEEPING:}}}x.MOTION_SLEEP_LIMIT=18e-6,x.COLLISION_MOTION_SLEEP_LIMIT=4e-5,x.SLEEPY_TIME_LIMIT=1;class A{constructor(t,e={}){var n,i,r;this.engine=t,this.options={positionIterations:null!==(n=e.positionIterations)&&void 0!==n?n:5,velocityIterations:null!==(i=e.velocityIterations)&&void 0!==i?i:5,constraintIterations:null!==(r=e.constraintIterations)&&void 0!==r?r:3}}update(){for(const t of this.engine.manager.pairsToSolve)t.update();this.preSolve();for(let t=0;t<this.options.positionIterations;++t)this.solvePosition();this.postSolvePosition(),this.preSolveConstraints();for(let t=0;t<this.options.constraintIterations;++t)this.solveConstraints();this.postSolveConstraints(),this.warmStart();for(let t=0;t<this.options.velocityIterations;++t)this.solveVelocity()}preSolve(){for(const t of this.engine.world.bodies.values())t.pairsCount=0;for(const t of this.engine.manager.activePairs)++t.shapeA.body.pairsCount,++t.shapeB.body.pairsCount}solvePosition(){const t=this.engine.manager.pairsToSolve,e=A.DEPTH_DAMPING;let n,i;for(const e of t)e.separation=e.normal.x*(e.penetration.x-e.shapeB.body.positionImpulse.x+e.shapeA.body.positionImpulse.x)+e.normal.y*(e.penetration.y-e.shapeB.body.positionImpulse.y+e.shapeA.body.positionImpulse.y);for(const o of t){const t=o.shapeA.body,a=o.shapeB.body;n=(o.separation-A.SLOP)*e,t.type===r.dynamic&&a.type===r.dynamic||(n*=2),t.type===r.dynamic&&t.sleepState!==s.SLEEPING&&(i=o.ratioA*n/t.pairsCount,t.positionImpulse.x-=o.normal.x*i,t.positionImpulse.y-=o.normal.y*i),a.type===r.dynamic&&a.sleepState!==s.SLEEPING&&(i=o.ratioB*n/a.pairsCount,a.positionImpulse.x+=o.normal.x*i,a.positionImpulse.y+=o.normal.y*i)}}postSolvePosition(){for(const t of this.engine.world.activeBodies.values())t.translate(t.positionImpulse),l.dot(t.positionImpulse,t.velocity)>0?t.positionImpulse.set(0,0):t.positionImpulse.scale(A.POSITION_IMPULSE_DAMPING)}warmStart(){const t=this.engine.manager.contactsToSolve;let e,n;for(const i of t){const t=i.pair.shapeA.body,o=i.pair.shapeB.body;e=i.pair.normal.x*i.normalImpulse-i.pair.normal.y*i.tangentImpulse,n=i.pair.normal.y*i.normalImpulse+i.pair.normal.x*i.tangentImpulse,t.type===r.dynamic&&t.sleepState!==s.SLEEPING&&(t.velocity.x-=e*t.inverseMass,t.velocity.y-=n*t.inverseMass,t.angularVelocity-=(i.offsetA.x*n-i.offsetA.y*e)*t.inverseInertia),o.type===r.dynamic&&o.sleepState!==s.SLEEPING&&(o.velocity.x+=e*o.inverseMass,o.velocity.y+=n*o.inverseMass,o.angularVelocity+=(i.offsetB.x*n-i.offsetB.y*e)*o.inverseInertia)}}solveVelocity(){let t,e,n,i,o,a,h,l,c,d,p,f,m,y,v,g,_;for(const b of this.engine.manager.pairsToSolve){const x=b.shapeA.body,A=b.shapeB.body;f=b.normal.x,m=b.normal.y;for(let e=0;e<b.contactsCount;++e){t=b.contacts[e],l=x.velocity.x-t.offsetA.y*x.angularVelocity-(A.velocity.x-t.offsetB.y*A.angularVelocity),c=x.velocity.y+t.offsetA.x*x.angularVelocity-(A.velocity.y+t.offsetB.x*A.angularVelocity),i=f*c-m*l+b.surfaceVelocity,o=i*t.tangentShare;const n=b.friction*t.normalImpulse,a=u.clamp(t.tangentImpulse+o,-n,n);o=a-t.tangentImpulse,t.tangentImpulse=a,d=-o*m,p=o*f,x.type===r.dynamic&&x.sleepState!==s.SLEEPING&&(x.velocity.x-=d*x.inverseMass,x.velocity.y-=p*x.inverseMass,x.angularVelocity-=(t.offsetA.x*p-t.offsetA.y*d)*x.inverseInertia),A.type===r.dynamic&&A.sleepState!==s.SLEEPING&&(A.velocity.x+=d*A.inverseMass,A.velocity.y+=p*A.inverseMass,A.angularVelocity+=(t.offsetB.x*p-t.offsetB.y*d)*A.inverseInertia)}y=x.velocity.x,v=x.velocity.y,a=x.angularVelocity,g=A.velocity.x,_=A.velocity.y,h=A.angularVelocity;for(let i=0;i<b.contactsCount;++i){t=b.contacts[i],l=y-t.offsetA.y*a-(g-t.offsetB.y*h),c=v+t.offsetA.x*a-(_+t.offsetB.x*h),e=l*f+c*m,n=e*(1+b.restitution)*t.normalShare;const o=Math.max(t.normalImpulse+n,0);n=o-t.normalImpulse,t.normalImpulse=o,d=f*n,p=m*n,x.type===r.dynamic&&x.sleepState!==s.SLEEPING&&(x.velocity.x-=d*x.inverseMass,x.velocity.y-=p*x.inverseMass,x.angularVelocity-=(t.offsetA.x*p-t.offsetA.y*d)*x.inverseInertia),A.type===r.dynamic&&A.sleepState!==s.SLEEPING&&(A.velocity.x+=d*A.inverseMass,A.velocity.y+=p*A.inverseMass,A.angularVelocity+=(t.offsetB.x*p-t.offsetB.y*d)*A.inverseInertia)}}}preSolveConstraints(){for(const t of this.engine.world.activeBodies.values())t.constraints.size&&(t.constraintImpulse.x*=A.CONSTRAINT_IMPULSE_DAMPING,t.constraintImpulse.y*=A.CONSTRAINT_IMPULSE_DAMPING,t.constraintAngleImpulse*=A.CONSTRAINT_IMPULSE_DAMPING,t.translate(t.constraintImpulse),t.constraintAngle+=t.constraintAngleImpulse,t.constraintDir.rotate(t.constraintAngleImpulse),t.velocity.x+=t.constraintImpulse.x,t.velocity.y+=t.constraintImpulse.y,t.angularVelocity+=t.constraintAngleImpulse)}solveConstraints(){const t=this.engine.world.allConstraints();for(const e of t)e.solve()}postSolveConstraints(){for(const t of this.engine.world.activeBodies.values())t.constraints.size&&t.setAngle(t.constraintAngle)}}A.SLOP=.005,A.DEPTH_DAMPING=.7,A.POSITION_IMPULSE_DAMPING=.4,A.CONSTRAINT_IMPULSE_DAMPING=.4;class w{constructor(){this.id=u.nextId(),this.name="composite",this.bodies=new Map,this.constraints=new Map,this.events=new c}add(...t){for(const e of t)switch(e.name){case"body":this.addBody(e);break;case"constraint":this.addConstraint(e)}}addBody(...t){for(const e of t)this.events.trigger("add-body",[{body:e}]),this.bodies.set(e.id,e)}removeBody(...t){for(const e of t)this.bodies.has(e.id)&&(this.events.trigger("remove-body",[{body:e}]),this.bodies.delete(e.id))}getBody(t){return this.bodies.get(t)}hasBody(t){return this.bodies.has(t)}allBodies(){return[...this.bodies.values()]}addConstraint(...t){for(const e of t)this.events.trigger("add-constraint",[{constraint:e}]),this.constraints.set(e.id,e)}removeConstraint(...t){for(const e of t)this.constraints.has(e.id)&&(this.events.trigger("remove-constraint",[{constraint:e}]),this.constraints.delete(e.id))}getConstraint(t){return this.constraints.get(t)}hasConstraint(t){return this.constraints.has(t)}allConstraints(){return[...this.constraints.values()]}merge(t){this.add(...t.bodies.values()),this.add(...t.constraints.values())}all(){return[...this.bodies.values(),...this.constraints.values()]}clearBodies(){this.bodies.clear()}clearConstraints(){this.constraints.clear()}clear(){this.clearBodies(),this.clearConstraints()}}class T extends w{constructor(){super(...arguments),this.sleepingBodies=new Map,this.staticBodies=new Map,this.kinematicBodies=new Map,this.activeBodies=new Map,this.eventIds=new Map}addBody(...t){super.addBody(...t);for(const e of t){e.type===r.dynamic?e.sleepState===s.SLEEPING?this.sleepingBodies.set(e.id,e):this.activeBodies.set(e.id,e):e.type===r.static?this.staticBodies.set(e.id,e):e.type===r.kinematic&&this.kinematicBodies.set(e.id,e);const t=e.events.on("sleep-start",()=>{this.activeBodies.delete(e.id),this.sleepingBodies.set(e.id,e)}),n=e.events.on("sleep-end",()=>{this.sleepingBodies.delete(e.id),this.activeBodies.set(e.id,e)}),i=e.events.on("become-dynamic",t=>{t.previousType===r.static?this.staticBodies.delete(e.id):t.previousType===r.kinematic&&this.kinematicBodies.delete(e.id),this.activeBodies.set(e.id,e)}),o=e.events.on("become-static",t=>{t.previousType===r.dynamic?e.sleepState===s.SLEEPING?this.sleepingBodies.delete(e.id):this.activeBodies.delete(e.id):t.previousType===r.kinematic&&this.kinematicBodies.delete(e.id),this.staticBodies.set(e.id,e)}),a=e.events.on("become-kinematic",t=>{t.previousType===r.dynamic?e.sleepState===s.SLEEPING?this.sleepingBodies.delete(e.id):this.activeBodies.delete(e.id):t.previousType===r.static&&this.staticBodies.delete(e.id),this.kinematicBodies.set(e.id,e)});this.eventIds.set(e.id,[t,n,i,o,a])}}removeBody(...t){super.removeBody(...t);for(const e of t){e.type===r.dynamic?e.sleepState===s.SLEEPING?this.sleepingBodies.delete(e.id):this.activeBodies.delete(e.id):e.type===r.static?this.staticBodies.delete(e.id):e.type===r.kinematic&&this.kinematicBodies.delete(e.id);for(const t of this.eventIds.get(e.id))e.events.off(t)}}getActiveBodies(){return[...this.activeBodies.values()]}getSleepingBodies(){return[...this.sleepingBodies.values()]}getStaticBodies(){return[...this.staticBodies.values()]}}class E{constructor(t){this.activePairs=[],this.manager=t,this.engine=t.engine}update(t){var e,n;this.activePairs.length=0;for(const i of t)if(i.isActivePrev=i.isActive,(null===(e=i.shapeA.body)||void 0===e?void 0:e.type)===r.dynamic||(null===(n=i.shapeB.body)||void 0===n?void 0:n.type)===r.dynamic)if(i.isSleeping=!(i.shapeA.body.sleepState!==s.SLEEPING&&i.shapeA.body.type===r.dynamic||i.shapeB.body.sleepState!==s.SLEEPING&&i.shapeB.body.type===r.dynamic),i.isSleeping)i.isActive&&this.activePairs.push(i);else{if(i.isActive=!1,!p.canCollide(i.shapeA.filter,i.shapeB.filter))continue;i.shapeA.aabb.overlaps(i.shapeB.aabb)?(i.isActive=!0,this.activePairs.push(i)):i.isActivePrev&&this.manager.endedPairs.push(i)}else i.isActive=!1}}class S extends l{constructor(t,e,n){super(t,e),this.index=n}}const I=new l(1,0);class O{constructor(){this.pointA=new S(0,0,0),this.pointB=new S(0,0,0),this.indexA=0,this.indexB=0,this.index=0,this.point=new l}compute(t,e,n){const i=t.support(n),r=e.support(n.neg(l.temp[0]));this.pointA=i,this.pointB=r,this.indexA=i.index,this.indexB=r.index,this.index=(65535&this.indexA)<<16|65535&this.indexB,this.point=new l(this.pointA.x-this.pointB.x,this.pointA.y-this.pointB.y)}clone(t){t.pointA=this.pointA,t.pointB=this.pointB,t.indexA=this.indexA,t.indexB=this.indexB,t.index=this.index,this.point.clone(t.point)}}const C=[new O,new O,new O],P=[];for(let t=0;t<=40;++t)P.push(new O);const M=(t,e,n,i)=>{const r=l.temp[1];let s=0,o=C[0],a=C[1];for(o.compute(t,e,I),a.compute(t,e,I.neg(r));;){if(l.zeroSide(o.point,a.point)){const t=o;o=a,a=t}const h=l.zeroT(o.point,a.point);-1<h&&h<1?l.subtract(a.point,o.point,r).rotate270():l.interpolateT(o.point,a.point,h,r).neg();const u=C[2];if(u.compute(t,e,r),l.zeroSide(o.point,u.point)&&l.zeroSide(u.point,a.point))return n?(R([o,a,u],t,e,i),!0):(i.push(o,a,u),!0);if(l.dot(u.point,r)<=Math.max(l.dot(o.point,r),l.dot(a.point,r))){const t=l.zeroT(o.point,a.point);return-1===t?i.push(o):1===t?i.push(a):i.push(a,o),!0}if(l.distSquaredToZero(o.point,u.point)<l.distSquaredToZero(a.point,u.point)?u.clone(a):u.clone(o),++s,s>30)return console.warn("Too many GJK iterations"),!1}},R=(t,e,n,i)=>{let r=0;for(;;){++r;let s,o,a=1/0;for(let e=0,n=t.length-1;e<t.length;n=e,++e){const i=l.distSquaredToZero(t[n].point,t[e].point);i<a&&(a=i,s=n,o=e)}const h=t[s],u=t[o];if(r>40)return console.warn("Too many EPA iterations"),void i.push(h,u);const c=P[r];if(c.compute(e,n,l.subtract(u.point,h.point,l.temp[1]).rotate90()),h.index===c.index||u.index===c.index)return void i.push(h,u);{const e=[c];for(let n=0;n<t.length;++n){let i=(s+1+n)%t.length;const r=e[e.length-1].point,o=t[i].point,a=t[(i+1)%t.length].point;l.side(r,a,o)&&e.push(t[i])}t=e}}},D=(t,e,n)=>{switch(t.type){case i.CONVEX:return((t,e,n)=>{const i=t.vertices,r=i[e];let s;return s=l.dot(n,i[e-1>=0?e-1:i.length-1])>l.dot(n,i[(e+1)%i.length])?i[(e+i.length-1)%i.length]:i[(e+1)%i.length],[r,s]})(t,e,n);case i.EDGE:return((t,e)=>e?[t.end,t.start]:[t.start,t.end])(t,e)}throw new Error},B=(t,e,n,i)=>{const r=l.dot(e[0],n)+i,s=l.dot(e[1],n)+i;let o=0;if(r<=0&&e[0].clone(t[o++]),s<=0&&e[1].clone(t[o++]),r*s<0){const n=r/(r-s);l.interpolate(e[0],e[1],n,t[o++])}return o},N=[new l,new l],L=new l,F=t=>{const e=t.shapeA,n=t.shapeB,i=[];if(!M(e,n,!0,i))return!1;const r=t.normal,s=e.radius+n.radius;if(1===i.length){const n=i[0].pointA,o=i[0].pointB;l.subtract(o,n,r);const a=r.lengthSquared();if(a>s*s||0===a)return!1;const h=Math.sqrt(a);r.divide(h),t.depth=s-h,t.contactsCount=1,l.add(n,r.scale(e.radius,L),t.contacts[0].vertex)}else{let o,a,h,u=!1;if(i[0].pointA===i[1].pointA?(n.getNormal(i[1].indexB,r),t.depth=-l.dot(r,i[0].point)+s,h=e.radius,o=D(e,i[0].indexA,r.neg(L)),a=[i[0].pointB,i[1].pointB]):(e.getNormal(i[1].indexA,r),t.depth=l.dot(r,i[0].point)+s,h=n.radius,o=D(n,i[0].indexB,r.neg(L)),a=[i[0].pointA,i[1].pointA],u=!0),t.depth<0)return!1;const c=r.rotate270(L);((t,e,n,i,r,s)=>{const o=l.dot(r,e[0]),a=-l.dot(r,e[1]),h=[t.contacts[0].vertex,t.contacts[1].vertex];let u=B(N,n,r.neg(l.temp[2]),o);if(u<2)return t.contactsCount=u,void N[0].clone(h[0]);if(u=B(h,N,r,a),t.contactsCount=u,u<2)return;l.dot(h[1],i)-l.dot(e[0],i)>s&&--t.contactsCount})(t,a,o,r,c,s);for(let e=0;e<t.contactsCount;++e)t.contacts[e].vertex.subtract(r.scale(h,L));u||r.neg()}return t.isActive=!0,!0},G={[i.CIRCLE|i.CIRCLE]:t=>{const e=t.shapeA,n=t.shapeB,i=t.normal;l.subtract(n.position,e.position,i);const r=e.radius+n.radius;if(i.lengthSquared()>Math.pow(r,2))return;t.contactsCount=1;const s=i.length();t.depth=r-s,i.divide(s),t.normal.scale(e.radius,l.temp[0]).add(e.position).clone(t.contacts[0].vertex),t.isActive=!0},[i.CONVEX|i.CIRCLE]:t=>{const e=t.shapeA.type===i.CONVEX,n=e?t.shapeA:t.shapeB,r=e?t.shapeB:t.shapeA,s=n.vertices,o=n.normals,a=r.position,h=n.radius+r.radius,u=l.temp[4],c=l.temp[1],d=l.temp[2],p=l.temp[3];let f=-1/0,m=0,y=!1;for(const t of o){const e=l.dot(t,l.subtract(a,s[t.index],c));e>f&&(m=t.index,f=e)}const v=s[m];if(l.dot(l.subtract(a,v,c),o[m])>h)return;const g=s[(m+1)%s.length];if(l.dot(l.subtract(a,v,d),l.subtract(g,v,p))<0)v.clone(u),y=!0;else{l.dot(l.subtract(a,g,d),l.subtract(v,g,p))<0?(g.clone(u),y=!0):(o[m].clone(t.normal),e||t.normal.neg(),l.subtract(a,o[m].scale(h,d),d).clone(u),t.depth=h-f)}if(y){l.subtract(u,a,t.normal);const n=t.normal.lengthSquared();if(Math.pow(h,2)<n)return;if(0===n)return;const i=Math.sqrt(n);t.depth=h-i,t.normal.divide(i),e&&t.normal.neg()}const _=(e?t.normal:t.normal.neg(d)).scale(n.radius,d);t.contactsCount=1,_.add(u).clone(t.contacts[0].vertex),t.isActive=!0},[i.CONVEX|i.CONVEX]:F,[i.EDGE|i.CIRCLE]:t=>{const e=t.shapeA.type===i.EDGE,n=e?t.shapeA:t.shapeB,r=e?t.shapeB:t.shapeA,s=l.temp[0],o=t.normal,a=n.radius+r.radius,h=n.length;l.subtract(n.start,r.position,o);const u=l.cross(n.normal,o);if(u>h){l.subtract(n.end,r.position,o);const e=o.lengthSquared();if(e>Math.pow(a,2))return;const i=Math.sqrt(e);o.divide(i),t.depth=a-i}else if(u<0){const e=o.lengthSquared();if(e>Math.pow(a,2))return;const n=Math.sqrt(e);o.divide(n),t.depth=a-n}else{const e=l.dot(n.start,n.normal)-l.dot(r.position,n.normal);if(e>0){if(e>a)return;t.depth=a-e,n.normal.clone(o)}else{if(e<-a)return;t.depth=a+e,n.normal.neg(o)}}t.contactsCount=1,o.scale(r.radius,s).add(r.position).clone(t.contacts[0].vertex),e&&o.neg(),t.isActive=!0},[i.EDGE|i.CONVEX]:F,[i.EDGE|i.EDGE]:F};class U{constructor(t){this.manager=t,this.engine=t.engine}update(t){for(const e of t)if(e.isSleeping)this.manager.activePairs.push(e);else if(e.isActive=!1,G[e.shapeA.type|e.shapeB.type](e),e.isActive){if(e.isSensor=e.shapeA.isSensor||e.shapeB.isSensor,this.manager.activePairs.push(e),!e.isSleeping&&!e.isSensor){this.manager.pairsToSolve.push(e);for(let t=0;t<e.contactsCount;++t)this.manager.contactsToSolve.push(e.contacts[t])}e.isActivePrev||this.manager.startedPairs.push(e)}else e.isActivePrev&&this.manager.endedPairs.push(e)}}class k{constructor(t,e={}){this.pairs=new Map,this.startedPairs=[],this.activePairs=[],this.endedPairs=[],this.pairsToSolve=[],this.contactsToSolve=[],this.engine=t,this.broadphase=e.broadphase||new g(this),this.midphase=e.midphase||new E(this),this.narrowphase=e.narrowphase||new U(this)}update(){this.startedPairs.length=0,this.activePairs.length=0,this.endedPairs.length=0,this.pairsToSolve.length=0,this.contactsToSolve.length=0,this.broadphase.update(),this.midphase.update(this.broadphase.activePairs),this.narrowphase.update(this.midphase.activePairs)}removeShape(t){this.broadphase.removeShape(t)}removeBody(t){this.broadphase.removeBody(t)}}class X{constructor(t={}){this.category=1,this.world=t.world||new T,this.gravity=void 0===t.gravity?new l(0,9.8):t.gravity.clone(),this.manager=new k(this,t),this.solver=t.solver||new A(this),this.sleeping=t.sleeping||new x(this),this.events=new c,this.timestamp=void 0}update(t){this.timestamp=t,this.events.trigger("before-update",[{engine:this,timestamp:t}]),this.events.trigger("update",[{engine:this,timestamp:t}]),this.sleeping.update(t.delta),this.applyGravity();for(const e of this.world.activeBodies.values())e.updateVelocity(t.delta);this.manager.update(),this.sleeping.afterCollisions(),this.manager.startedPairs.length&&this.events.trigger("started-collisions",[{pairs:this.manager.startedPairs}]),this.manager.activePairs.length&&this.events.trigger("active-collisions",[{pairs:this.manager.activePairs}]),this.manager.endedPairs.length&&this.events.trigger("ended-collisions",[{pairs:this.manager.endedPairs}]),this.solver.update(),this.manager.startedPairs.length&&this.events.trigger("started-collisions-after-solve",[{pairs:this.manager.startedPairs}]),this.manager.activePairs.length&&this.events.trigger("active-collisions-after-solve",[{pairs:this.manager.activePairs}]),this.manager.endedPairs.length&&this.events.trigger("ended-collisions-after-solve",[{pairs:this.manager.endedPairs}]);for(const t of this.world.activeBodies.values())t.updatePosition();for(const t of this.world.kinematicBodies.values())t.updatePosition();this.events.trigger("after-update",[{engine:this,timestamp:t}])}removeShape(...t){for(const e of t)this.manager.removeShape(e)}removeBody(...t){for(const e of t)this.manager.removeBody(e)}applyGravity(){for(const t of this.world.activeBodies.values())t.force.x+=this.gravity.x*t.mass,t.force.y+=this.gravity.y*t.mass}*pointTest(t){const e=this.manager.broadphase.pointTest(t);for(const n of e)n.aabb.contains(t)&&n.contains(t)&&(yield n)}*aabbTest(t){const e=this.manager.broadphase.aabbTest(t);for(const n of e)t.overlaps(n.aabb)&&(yield n)}}class j extends _{constructor(t={},e){var n,r;super(t,e),this.type=i.CIRCLE,this.position=new S(0,0,0),this.radius=(null!==(n=t.radius)&&void 0!==n?n:.5)+2*A.SLOP,this.updateArea(),t.mass&&this.setMass(t.mass),t.mass&&!t.density||this.setDensity(null!==(r=t.density)&&void 0!==r?r:100),this.inertia=this.updateInertia()}translate(t){this.position.add(t)}rotate(){}updateArea(){return this.area=Math.PI*Math.pow(this.radius,2),this.area}updateInertia(){return this.areaInertia=Math.pow(this.radius,2)/2,this.inertia=this.areaInertia*this.mass,this.inertia}updateAABB(){return this.aabb.setNum(-this.radius,-this.radius,this.radius,this.radius),this.aabb.translate(this.position),this.aabb}raycast(t,e,n,i){const r=this.position,s=this.radius,o=l.subtract(e,r,l.temp[0]),a=i.lengthSquared(),h=2*l.dot(i,o),u=o.lengthSquared()-Math.pow(s,2),c=Math.pow(h,2)-4*a*u;if(c<0)return t;if(0===c)return t;const d=Math.sqrt(c),p=1/(2*a),f=(-h-d)*p,m=(d-h)*p;if(f>=0&&f<=1){const i=t.contacts[t.contactsCount];++t.contactsCount,l.interpolate(e,n,f,i.point),l.subtract(i.point,r,i.normal),i.normal.divide(s)}if(m>=0&&m<=1){const i=t.contacts[t.contactsCount];++t.contactsCount,l.interpolate(e,n,m,i.point),l.subtract(r,i.point,i.normal),i.normal.divide(s)}}contains(t){return l.distSquared(this.position,t)<Math.pow(this.radius,2)}getPoint(t){return this.position}getNormal(t,e){return e.set(1,0)}support(t){return this.position}}var H,Y,V=n(9);class W{static create(t){const e=[];let n=0;for(const i of t){const t=new S(i.x,i.y,n);e.push(t),++n}return e}static normals(t,e=[],n=[]){for(let i=0;i<t.length;++i){const r=(i+1)%t.length,s=new S(t[i].x-t[r].x,t[i].y-t[r].y,i);s.rotate90();const o=s.length();s.divide(o),n.push(o),e.push(s)}return{normals:e,lengths:n}}static translate(t,e){for(let n=0;n<t.length;++n)t[n].add(e);return t}static rotate(t,e,n=l.zero,i=t){const r=Math.cos(e),s=Math.sin(e);for(let e=0;e<t.length;++e){const o=t[e],a=i[e],h=o.x-n.x,u=o.y-n.y;a.x=h*r-u*s+n.x,a.y=h*s+u*r+n.y}return i}static scale(t,e){for(let n=0;n<t.length;++n)t[n].scale(e);return t}static area(t){let e=0,n=t.length-1;for(let i=0;i<t.length;++i)e+=(t[n].x-t[i].x)*(t[n].y+t[i].y),n=i;return e/2}static inertia(t){let e=0,n=0;for(let i=0;i<t.length;++i){const r=(i+1)%t.length,s=Math.abs(l.cross(t[r],t[i]));e+=s*(l.dot(t[r],t[r])+l.dot(t[r],t[i])+l.dot(t[i],t[i])),n+=s}return e/n/6}static center(t){const e=new l;for(let n=0;n<t.length;++n){const i=(n+1)%t.length,r=l.cross(t[n],t[i]),s=l.add(t[n],t[i],l.temp[0]).scale(r);e.add(s)}return e.divide(6*W.area(t)),e}static contains(t,e){for(let n=0;n<t.length;++n){const i=t[n],r=t[(n+1)%t.length];if((e.x-i.x)*(r.y-i.y)+(e.y-i.y)*(i.x-r.x)>0)return!1}return!0}static isConvex(t){let e=0;if(!(t.length<3)){for(let n=0;n<t.length;++n){const i=(n+1)%t.length,r=(n+2)%t.length,s=t[n],o=t[i],a=t[r],h=l.cross(l.subtract(o,s,l.temp[0]),l.subtract(a,s,l.temp[1]));if(h<0?e|=1:h>0&&(e|=2),3===e)return!1}return 0!==e||void 0}}static decomp(t,e=!0,n=0){const i=t.map(t=>[t.x,t.y]);if(Object(V.makeCCW)(i),W.isConvex(t)){return[W.create(i.map(t=>new l(t[0],t[1])))]}{const t=[],r=Object(V.quickDecomp)(i,[],[],[],25,100,0);for(const i of r){e&&Object(V.removeCollinearPoints)(i,.01);const r=W.create(i.map(t=>new l(t[0],t[1])));Math.abs(W.area(r))>n&&t.push(r)}return t}}static hull(t){const e=[],n=[],i=[...t];i.sort((t,e)=>t.x-e.x||t.y-e.y);for(const t of i){for(;n.length>=2&&l.side(n[n.length-1],n[n.length-2],t);)n.pop();n.push(t)}for(let t=i.length-1;t>=0;--t){const n=i[t];for(;e.length>=2&&l.side(e[e.length-1],e[e.length-2],n);)e.pop();e.push(n)}return e.pop(),n.pop(),e.concat(n)}}class z extends _{constructor(t={},e){var n,r;super(t,e),this.type=i.CONVEX,this.normals=[],this.lengths=[];const s=null!==(n=t.vertices)&&void 0!==n?n:z.DEFAULT_VERTICES;this.vertices=W.create(s),this.deltaVertices=W.create(s),W.normals(this.vertices,this.normals,this.lengths),this.updateArea(),this.updateCenterOfMass(),t.mass&&this.setMass(t.mass),t.mass&&!t.density||this.setDensity(null!==(r=t.density)&&void 0!==r?r:100),this.updateInertia()}project(t){const e=this.vertices;let n=l.dot(e[0],t),i=0;const r=e.length-1,s=l.dot(e[r],t);s===n&&(i=r);for(let s=1;s<r;++s){const r=e[s],o=l.dot(r,t);o>n&&(n=o,i=r.index)}return s>n?r:i}translate(t){this.position.add(t),W.translate(this.vertices,t)}rotate(t){W.rotate(this.vertices,t,this.position),W.rotate(this.normals,t),W.rotate(this.deltaVertices,t)}updateArea(){this.area=W.area(this.deltaVertices);for(const t of this.lengths)this.area+=t*this.radius;return this.area+=Math.PI*Math.pow(this.radius,2),this.area}updateInertia(){this.areaInertia=W.inertia(this.deltaVertices);const t=Math.pow(this.radius,2),e=1/this.area,n=l.temp[0];for(const i of this.vertices){l.subtract(i,this.position,n);const r=l.subtract(this.vertices[(i.index+1)%this.vertices.length],this.position,l.temp[1]),s=this.lengths[i.index],o=this.normals[i.index],a=l.interpolate(n,r,.5,l.temp[2]);a.add(o.scale(.5*this.radius,l.temp[3]));const h=s*this.radius*e,u=(Math.pow(s,2)+t)/12,c=a.lengthSquared();this.areaInertia+=(u+c)*h}for(const i of this.vertices){l.subtract(i,this.position,n);const r=this.normals[i.index],s=this.normals[(i.index-1+this.normals.length)%this.normals.length],o=l.cross(s,r),a=l.dot(s,r),h=t*Math.atan2(o,a)*.5*e,u=t/2,c=n.lengthSquared();this.areaInertia+=(u+c)*h}return this.inertia=this.areaInertia*this.mass,this.inertia}updateAABB(){return this.aabb.fromVertices(this.vertices),this.aabb.minX-=this.radius,this.aabb.minY-=this.radius,this.aabb.maxX+=this.radius,this.aabb.maxY+=this.radius,this.aabb}updateCenterOfMass(){W.center(this.vertices).clone(this.position),this.updateInertia()}raycast(t,e,n,i){const r=this.vertices,s=this.normals;let o=t.contacts[t.contactsCount],a=r[r.length-1];for(const h of r){if(l.lineLineIntersection(a,h,e,n,o.point)&&(s[a.index].clone(o.normal),l.dot(i,o.normal)>0&&o.normal.neg(),t.contactsCount+=1,o=t.contacts[t.contactsCount]),t.contactsCount>=2)break;a=h}return t}contains(t){let e=-1/0,n=0;for(const i of this.vertices){const r=this.normals[i.index],s=l.dot(t,r)-l.dot(i,r);if(s>this.radius)return!1;s>e&&(e=s,n=i.index)}if(e<0)return!0;const i=this.vertices[n],r=this.vertices[(n+1)%this.vertices.length],s=l.subtract(t,i,l.temp[0]),o=l.subtract(r,i,l.temp[1]),a=l.dot(s,o);return a<0?s.lengthSquared()<Math.pow(this.radius,2):!(a>Math.pow(this.lengths[n],2))||l.subtract(t,r,s).lengthSquared()<Math.pow(this.radius,2)}getPoint(t){return this.vertices[t]}getNormal(t,e){return this.normals[t].clone(e)}support(t){const e=this.project(t);return this.vertices[e]}}z.DEFAULT_VERTICES=[new l(-1,-1),new l(1,-1),new l(1,1),new l(-1,1)];class q extends _{constructor(t={},e){super(t,e),this.type=i.EDGE,this.length=1,this.delta=new l,this.normal=new l,this.ngNormal=new l,this.start=new S(-.5,0,0),this.end=new S(.5,0,1),this.length=1,this.delta=new l,this.normal=new l,this.ngNormal=new l,this.set(t.start||this.start,t.end||this.end),this.updateArea(),t.mass&&this.setMass(t.mass),t.mass&&!t.density||this.setDensity(100),this.updateInertia()}set(t,e){t.clone(this.start),e.clone(this.end),l.subtract(this.end,this.start,this.delta),this.length=this.delta.length(),this.delta.divide(this.length,this.normal),this.normal.rotate90(),l.interpolate(this.start,this.end,.5,this.position),this.normal.neg(this.ngNormal)}project(t){return Number(l.dot(this.start,t)<l.dot(this.end,t))}translate(t){this.position.add(t),this.start.add(t),this.end.add(t)}rotate(t){const e=l.temp[0];l.subtract(this.position,this.start,e),e.rotate(t),l.subtract(this.position,e,this.start),l.subtract(this.position,this.end,e),e.rotate(t),l.subtract(this.position,e,this.end),this.normal.rotate(t),this.normal.neg(this.ngNormal)}updateArea(){return this.area=2*this.length*this.radius+Math.pow(this.radius,2)*Math.PI,this.area}updateInertia(){const t=this.length,e=2*this.radius,n=t*e*(Math.pow(t,2)+Math.pow(e,2))/12,i=Math.PI*Math.pow(this.radius,2),r=1.0049120846903796*Math.pow(this.radius,4),s=Math.pow(.5*this.length+4*this.radius/u.PI3,2);return this.areaInertia=(n+r+i*s)/this.area,this.inertia=this.areaInertia*this.mass,this.inertia}updateAABB(){return this.start.x<this.end.x?(this.aabb.minX=this.start.x-this.radius,this.aabb.maxX=this.end.x+this.radius):(this.aabb.minX=this.end.x-this.radius,this.aabb.maxX=this.start.x+this.radius),this.start.y<this.end.y?(this.aabb.minY=this.start.y-this.radius,this.aabb.maxY=this.end.y+this.radius):(this.aabb.minY=this.end.y-this.radius,this.aabb.maxY=this.start.y+this.radius),this.aabb}raycast(t,e,n,i){const r=t.contacts[0];l.lineLineIntersection(this.start,this.end,e,n,r.point)&&(this.normal.clone(r.normal),l.dot(i,r.normal)>0&&r.normal.neg(),++t.contactsCount)}contains(t){const e=l.subtract(t,this.start,l.temp[0]),n=l.subtract(this.end,this.start,l.temp[1]);if(Math.abs(l.dot(e,this.normal))>this.radius)return!1;const i=l.dot(e,n);return i<0?e.lengthSquared()<Math.pow(this.radius,2):!(i>Math.pow(this.length,2))||l.subtract(t,this.end,e).lengthSquared()<Math.pow(this.radius,2)}getPoint(t){return t?this.end:this.start}getNormal(t,e){return(t?this.normal:this.ngNormal).clone(e)}support(t){return this.project(t)?this.end:this.start}}class ${constructor(){this.from=new l,this.to=new l,this.delta=new l,this.intersections=new Map}reset(){for(const t of this.intersections.values())t.isActive=!1}clear(){this.intersections.clear()}}class K{constructor(){this.point=new l,this.normal=new l}}class Z{constructor(t,e){this.isActive=!1,this.contactsCount=0,this.contacts=[new K,new K],this.body=t,this.shape=e,this.id=u.combineId(t.id,e.id)}reset(){this.contactsCount=0}}class J{constructor(t={}){var e,n;this.from=new l,this.to=new l,this.delta=new l,this.aabb=new d,this.needsUpdate=!0,this.raycastResult=new $,this.set(null!==(e=t.from)&&void 0!==e?e:this.from,null!==(n=t.to)&&void 0!==n?n:this.to)}set(t,e){this.setFrom(t),this.setTo(e)}cast(t,e=t.world,n=!0,i=this.raycastResult){i.reset(),this.needsUpdate&&(this.updateAABB(),l.subtract(this.to,this.from,this.delta)),this.delta.clone(i.delta),this.to.clone(i.to),this.from.clone(i.from);const r=i.intersections;if(n){const n=t.manager.broadphase.gridSize,r=J.vecTemp[0],s=J.vecTemp[1];r.x=this.from.x/n,r.y=this.from.y/n,s.x=this.to.x/n,s.y=this.to.y/n;const o=l.subtract(s,r,J.vecTemp[2]),a=J.vecTemp[4],h=J.vecTemp[5];let u,c,d,p,f,m;o.x>0?(a.x=1,h.x=o.x,u=Math.floor(r.x+1e-4),d=Math.ceil(r.x+1e-4)):(a.x=-1,h.x=-o.x,u=Math.floor(r.x-1e-4),o.y>0&&(r.x-=1),d=Math.floor(r.x-1e-4)),o.y>0?(a.y=1,h.y=o.y,c=Math.floor(r.y+1e-4),m=Math.ceil(r.y+1e-4)):(a.y=-1,h.y=-o.y,c=Math.floor(r.y-1e-4),o.x>0&&(r.y-=1),m=Math.floor(r.y-1e-4)),this.addCell(t,e,J.vecTemp[3].set(u,c),i);const y=o.x/h.y,v=o.y/h.x;p=r.y+v*Math.abs(r.x-d),o.y<0&&(o.x>0?p+=1:d-=1);const g=v;for(let n=0;n<h.x;++n)this.addCell(t,e,J.vecTemp[3].set(d+n*a.x,Math.floor(p)),i),p+=g;f=r.x+y*Math.abs(r.y-m),o.x<0&&(o.y<0?m-=1:f+=1);const _=y;for(let n=0;n<h.y;++n)this.addCell(t,e,J.vecTemp[3].set(Math.floor(f),m+n*a.y),i),f+=_}else for(const t of e.bodies.values())for(const e of t.shapes){const n=u.combineId(t.id,e.id);let i=r.get(n);i||(i=new Z(t,e),r.set(n,i)),i.isActive=!0}for(const t of r.values())this.collide(t);return this.needsUpdate=!1,i}setFrom(t){t.clone(this.from),this.needsUpdate=!0}setTo(t){t.clone(this.to),this.needsUpdate=!0}updateAABB(){return this.aabb.minX=Math.min(this.from.x,this.to.x),this.aabb.minY=Math.min(this.from.y,this.to.y),this.aabb.maxX=Math.max(this.from.x,this.to.x),this.aabb.maxY=Math.max(this.from.y,this.to.y),this.aabb}collide(t){if(!t.isActive)return;t.isActive=!1;const e=t.shape;this.aabb.overlaps(e.aabb)&&(t.reset(),e.raycast(t,this.from,this.to,this.delta),t.contactsCount>0&&(t.isActive=!0))}addCell(t,e,n,i){const r=i.intersections,s=t.manager.broadphase.grid.get(n);if(s)for(const t of s.values()){const n=t.body;if(!e.hasBody(n.id))continue;const i=u.combineId(n.id,t.id);let s=r.get(i);s||(s=new Z(n,t),r.set(i,s)),s.isActive=!0}}}J.vecTemp=[new l,new l,new l,new l,new l,new l],function(t){t[t.DISTANCE_CONSTRAINT=Math.pow(2,0)]="DISTANCE_CONSTRAINT",t[t.Point_CONSTRAINT=Math.pow(2,1)]="Point_CONSTRAINT"}(H||(H={}));class Q{constructor(t={},e){var n,i;this.id=u.nextId(),this.name="constraint",this.type=0,this.setBodyA(t.bodyA),this.setBodyB(t.bodyB),null===(n=this.bodyA)||void 0===n||n.dir.clone(this.bodyA.constraintDir),null===(i=this.bodyB)||void 0===i||i.dir.clone(this.bodyB.constraintDir),this.bodyA&&(this.bodyA.constraintAngle=this.bodyA.angle),this.bodyB&&(this.bodyB.constraintAngle=this.bodyB.angle),this.pointA=t.pointA?t.pointA.clone():new l,this.pointB=t.pointB?t.pointB.clone():new l,this.worldPointA=this.bodyA?new l:this.pointA.clone(),this.worldPointB=this.bodyB?new l:this.pointB.clone(),this.offsetA=new l,this.offsetB=new l,this.userData=e}setBodyA(t){this.bodyA&&(this.bodyA.constraints.delete(this),this.bodyA=void 0),t&&(this.bodyA=t,t.constraints.add(this))}setBodyB(t){this.bodyB&&(this.bodyB.constraints.delete(this),this.bodyB=void 0),t&&(this.bodyB=t,t.constraints.add(this))}getWorldPointA(){return this.bodyA?(this.offsetA.x=this.pointA.x*this.bodyA.constraintDir.x-this.pointA.y*this.bodyA.constraintDir.y,this.offsetA.y=this.pointA.x*this.bodyA.constraintDir.y+this.pointA.y*this.bodyA.constraintDir.x,l.add(this.bodyA.center,this.offsetA,this.worldPointA)):this.pointA.clone(this.worldPointA),this.worldPointA}getWorldPointB(){return this.bodyB?(this.offsetB.x=this.pointB.x*this.bodyB.constraintDir.x-this.pointB.y*this.bodyB.constraintDir.y,this.offsetB.y=this.pointB.x*this.bodyB.constraintDir.y+this.pointB.y*this.bodyB.constraintDir.x,l.add(this.bodyB.center,this.offsetB,this.worldPointB)):this.pointB.clone(this.worldPointB),this.worldPointB}}Q.vecTemp=[new l,new l,new l,new l,new l,new l,new l];class tt extends Q{constructor(t={},e){var n,i,r;super(t,e),this.type=H.DISTANCE_CONSTRAINT,this.normal=new l,this.stiffness=null!==(n=t.stiffness)&&void 0!==n?n:.1,this.damping=null!==(i=t.damping)&&void 0!==i?i:0,this.curLength=l.dist(this.getWorldPointA(),this.getWorldPointB()),this.length=null!==(r=t.length)&&void 0!==r?r:this.curLength,void 0!==t.minLength&&(this.minLength=t.minLength,this.minLength>this.length&&([this.minLength,this.length]=[this.length,this.minLength]))}solve(){const t=this.getWorldPointA(),e=this.getWorldPointB(),n=l.subtract(t,e,Q.vecTemp[0]);this.curLength=n.length();const i=Math.max(this.curLength,.001);if(void 0!==this.minLength&&i>this.minLength&&i<this.length)return;const o=void 0!==this.minLength&&i<this.minLength?i-this.minLength:i-this.length,a=n.divide(i,this.normal),h=Q.vecTemp[2];if(this.damping){l.subtract(this.bodyB?this.bodyB.velocity:l.zero,this.bodyA?this.bodyA.velocity:l.zero,h).scale(this.damping);const t=l.dot(h,a);a.scale(t,h)}const u=l.cross(this.offsetA,a),c=l.cross(this.offsetB,a),d=.5/((this.bodyA?this.bodyA.inverseMass+this.bodyA.inverseInertia*u*u:0)+(this.bodyB?this.bodyB.inverseMass+this.bodyB.inverseInertia*c*c:0)),p=a.scale(this.stiffness*o*d,Q.vecTemp[1]);if(this.bodyA&&this.bodyA.type===r.dynamic){this.bodyA.setSleeping(s.AWAKE);const t=p.x*this.bodyA.inverseMass,e=p.y*this.bodyA.inverseMass,n=l.cross(this.offsetA,p)*this.bodyA.inverseInertia;if(this.bodyA.translate(l.temp[0].set(-t,-e)),n&&this.bodyA.constraintDir.rotate(-n),this.bodyA.constraintAngle-=n,this.bodyA.velocity.x-=t,this.bodyA.velocity.y-=e,this.bodyA.angularVelocity-=n,this.bodyA.constraintImpulse.x-=t,this.bodyA.constraintImpulse.y-=e,this.bodyA.constraintAngleImpulse-=n,this.damping){const t=h.scale(this.bodyA.inverseMass,Q.vecTemp[3]);this.bodyA.velocity.x+=t.x,this.bodyA.velocity.y+=t.y}}if(this.bodyB&&this.bodyB.type===r.dynamic){this.bodyB.setSleeping(s.AWAKE);const t=p.x*this.bodyB.inverseMass,e=p.y*this.bodyB.inverseMass,n=l.cross(this.offsetB,p)*this.bodyB.inverseInertia;if(this.bodyB.translate(l.temp[0].set(t,e)),n&&this.bodyB.constraintDir.rotate(n),this.bodyB.constraintAngle+=n,this.bodyB.velocity.x+=t,this.bodyB.velocity.y+=e,this.bodyB.angularVelocity+=n,this.bodyB.constraintImpulse.x+=t,this.bodyB.constraintImpulse.y+=e,this.bodyB.constraintAngleImpulse+=n,this.damping){const t=h.scale(this.bodyB.inverseMass,Q.vecTemp[3]);this.bodyB.velocity.x-=t.x,this.bodyB.velocity.y-=t.y}}}}class et extends Q{constructor(t={},e){var n;super(t,e),this.stiffness=null!==(n=t.stiffness)&&void 0!==n?n:.1}solve(){const t=this.getWorldPointA(),e=this.getWorldPointB(),n=.5/((this.bodyA?this.bodyA.inverseMass:0)+(this.bodyB?this.bodyB.inverseMass:0)),i=l.subtract(t,e,Q.vecTemp[0]).scale(this.stiffness*n,Q.vecTemp[1]);if(this.bodyA&&this.bodyA.type===r.dynamic){this.bodyA.setSleeping(s.AWAKE);const t=i.x*this.bodyA.inverseMass,e=i.y*this.bodyA.inverseMass,n=l.cross(this.offsetA,i)*this.bodyA.inverseInertia;this.bodyA.translate(l.temp[0].set(-t,-e)),this.bodyA.constraintDir.rotate(-n),this.bodyA.constraintAngle-=n,this.bodyA.velocity.x-=t,this.bodyA.velocity.y-=e,this.bodyA.angularVelocity-=n,this.bodyA.constraintImpulse.x-=t,this.bodyA.constraintImpulse.y-=e,this.bodyA.constraintAngleImpulse-=n}if(this.bodyB&&this.bodyB.type===r.dynamic){this.bodyB.setSleeping(s.AWAKE);const t=i.x*this.bodyB.inverseMass,e=i.y*this.bodyB.inverseMass,n=l.cross(this.offsetB,i)*this.bodyB.inverseInertia;this.bodyB.translate(l.temp[0].set(t,e)),this.bodyB.constraintDir.rotate(n),this.bodyB.constraintAngle+=n,this.bodyB.velocity.x+=t,this.bodyB.velocity.y+=e,this.bodyB.angularVelocity+=n,this.bodyB.constraintImpulse.x+=t,this.bodyB.constraintImpulse.y+=e,this.bodyB.constraintAngleImpulse+=n}}}class nt{}nt.Shape=class{static circle(t,e={}){return e.radius=t,new j(e)}static capsule(t,e,n={}){return n.start=new l(.5*-t,0),n.end=new l(.5*t,0),n.radius=e,new q(n)}static rectangle(t,e,n={}){return n.vertices=[new l(-t/2,-e/2),new l(t/2,-e/2),new l(t/2,e/2),new l(-t/2,e/2)],new z(n)}static polygon(t=4,e=1,n={}){t<3&&console.warn("Sides must be at least 3");const i=u.PI2/t,r=.5*(i+Math.PI),s=[];for(let n=0;n<t;++n){const t=r+i*n;s.push(new l(Math.cos(t)*e,Math.sin(t)*e))}return n.vertices=s,new z(n)}static fromVertices(t,e={}){const n=[],i=W.decomp(t);for(const t of i)e.vertices=t,n.push(new z(e));return n}static ellipse(t,e,n=6,i={}){const r=4*n,s=u.PI2/r,o=.5*(s+Math.PI),a=[];for(let n=0;n<r;++n){const i=o+s*n;a.push(new l(Math.cos(i)*t,Math.sin(i)*e))}return i.vertices=a,new z(i)}},nt.Body=class{static circle(t,e,n={},i={}){n.position=t;const r=new b(n);return i.radius=e,r.addShape(new j(i)),r}static capsule(t,e,n,i,r={},s={}){r.position=t,r.angle=e;const o=new b(r),a=nt.Shape.capsule(n,i,s);return o.addShape(a),o}static rectangle(t,e,n,i,r={},s={}){r.position=t,r.angle=e,s.vertices=[new l(-n/2,-i/2),new l(n/2,-i/2),new l(n/2,i/2),new l(-n/2,i/2)];const o=new b(r);return o.addShape(new z(s)),o}static polygon(t,e=4,n=1,i={},r={}){i.position=t;const s=new b(i),o=nt.Shape.polygon(e,n,r);return s.addShape(o),s}static fromVertices(t,e,n={},i={}){n.position=t;const r=new b(n),s=nt.Shape.fromVertices(e,i);for(const t of s)r.addShape(t);return r}static ellipse(t,e,n,i=6,r={},s={}){r.position=t;const o=new b(r),a=nt.Shape.ellipse(e,n,i,s);return o.addShape(a),o}},nt.Composite=class{static car(t,e=1,n=new w){const i=p.nextGroup(!0),r=new b({position:t});r.addShape(new z({vertices:[new l(-1.5*e,-.2*e),new l(-1.2*e,-.9*e),new l(0,-.9*e),new l(1.5*e,0),new l(1.5*e,.5*e),new l(-1.5*e,.5*e)],filter:{group:i}}));const s=new b({position:new l(t.x+e,t.y+.5*e)});s.addShape(new j({radius:.4*e,filter:{group:i}}));const o=new b({position:new l(t.x-e,t.y+.5*e)});o.addShape(new j({radius:.4*e,filter:{group:i}}));const a=new tt({bodyA:r,bodyB:s,pointA:new l(e,.5*e),stiffness:1}),h=new tt({bodyA:r,bodyB:o,pointA:new l(-e,.5*e),stiffness:1});return n.addBody(r,s,o),n.addConstraint(a,h),n}};class it{constructor(t,e,n=[new tt({stiffness:.2,length:0})]){this.events=new c,this.engine=t,this.mouse=e,this.constraints=n,t.world.addConstraint(...this.constraints),this.mouse.events.on("mouse-down",t=>{this.mouseDown(t)}),this.mouse.events.on("mouse-up",t=>{this.mouseUp(t)}),this.mouse.events.on("mouse-move",t=>{this.mouseMove(t)})}mouseDown(t){if(!t.mouse.leftButtonPressed)return;const e=this.engine.pointTest(this.mouse.position);for(const n of e){const e=n.body;if(e.type===r.dynamic){this.body=e,this.shape=n;for(const i of this.constraints)i.pointB.x=t.mouse.position.x,i.pointB.y=t.mouse.position.y,i.setBodyA(e),l.subtract(t.mouse.position,e.center,i.pointA).rotate(-e.angle),this.events.trigger("catch-body",[{body:e,shape:n}]);break}}}mouseUp(t){if(!t.mouse.leftButtonPressed&&this.body&&this.shape){for(const t of this.constraints)t.setBodyA();this.events.trigger("throw-body",[{body:this.body,shape:this.shape}]),this.body=void 0,this.shape=void 0}}mouseMove(t){for(const e of this.constraints)e.pointB.x=t.mouse.position.x,e.pointB.y=t.mouse.position.y}}class rt{}rt.rect=(t,e,n,i,r,s,o=!0,a=1)=>{r&&Math.abs(r%u.PI05)>.025?(t.save(),t.translate(e.x,e.y),t.rotate(r),o?(t.fillStyle=s,t.fillRect(.5*-n,.5*-i,n,i)):(t.strokeStyle=s,t.lineWidth=a,t.strokeRect(.5*-n,.5*-i,n,i)),t.restore()):o?(t.fillStyle=s,t.fillRect(e.x-.5*n,e.y-.5*i,n,i)):(t.strokeStyle=s,t.lineWidth=a,t.strokeRect(e.x-.5*n,e.y-.5*i,n,i))},rt.circle=(t,e,n,i,r=!0,s=1)=>{t.beginPath(),t.arc(e.x,e.y,n,0,u.PI2),r?(t.fillStyle=i,t.fill()):(t.lineWidth=s,t.strokeStyle=i,t.stroke()),t.closePath()},rt.roundedRect=(t,e,n,i,r,s,o,a=!0,h=1)=>{s||rt.rect(t,e,n,i,r,o,a,h),t.save(),t.translate(e.x,e.y),r&&t.rotate(r);const u=.5*n,l=.5*i,c=Math.min(u,l)*(s=Math.min(Math.max(s,0),1));t.beginPath(),t.moveTo(-u,-l+c),t.arcTo(-u,-l,-u+c,-l,c),t.moveTo(u-c,-l),t.arcTo(u,-l,u,-l+c,c),t.moveTo(u,l-c),t.arcTo(u,l,u-c,l,c),t.moveTo(-u+c,l),t.arcTo(-u,l,-u,l-c,c),t.moveTo(-u,-l+c),t.lineTo(-u+c,-l),t.lineTo(u-c,-l),t.lineTo(u,-l+c),t.lineTo(u,l-c),t.lineTo(u-c,l),t.lineTo(-u+c,l),t.lineTo(-u,l-c),t.lineTo(-u,-l+c),t.closePath(),a?(t.fillStyle=o,t.fill()):(t.lineWidth=h,t.strokeStyle=o,t.stroke()),t.restore()},rt.polygon=(t,e,n,i=!0,r=1)=>{t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let n=0;n<e.length;++n)t.lineTo(e[n].x,e[n].y);t.lineTo(e[0].x,e[0].y),t.closePath(),i?(t.fillStyle=n,t.fill()):(t.lineWidth=r,t.strokeStyle=n,t.stroke())},rt.line=(t,e,n,i,r=1)=>{t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.closePath(),t.lineWidth=r,t.strokeStyle=i,t.stroke()};!function(t){t[t.fixed=0]="fixed",t[t.dynamic=1]="dynamic"}(Y||(Y={}));class st{constructor(t={}){var e,n,i;this.tps=0,this.delta=0,this.deltaAccumulator=0,this.deltas=[],this.deltasSize=40,this.lag=0,this.fps=0,this.renderDelta=.01,this.renderTime=performance.now()/1e3,this.time=performance.now()/1e3,this.worldTime=0,this.events=new c,this.event={time:0,delta:0,tps:0},this.renderEvent={time:0,delta:0},this.enabled=!1,this.enabledRender=!1,this.tickRequestId=0,this.renderRequestId=0,this.options={type:null!==(e=t.type)&&void 0!==e?e:Y.fixed,fixedTps:60,fixedDelta:1/60,timescale:null!==(n=t.timescale)&&void 0!==n?n:1,correction:null===(i=t.correction)||void 0===i||i},t.tps&&this.setTps(t.tps)}run(){this.enabled||(this.enabled=!0,this.time=performance.now()/1e3-this.options.fixedDelta,this.tick())}stop(){this.enabled=!1,this.tickRequestId&&window.cancelAnimationFrame(this.tickRequestId)}tick(){this.tickRequestId=window.requestAnimationFrame(()=>{this.tick()});const t=performance.now()/1e3;switch(this.delta=t-this.time,this.tps=1/this.delta,this.time=t,this.options.type){case Y.fixed:for(this.deltaAccumulator+=this.delta*this.options.timescale,this.deltaAccumulator=Math.min(this.deltaAccumulator,1.5*Math.max(this.options.fixedDelta,.016666666666666666)*Math.max(this.options.timescale,1));this.deltaAccumulator>this.options.fixedDelta;)this.deltaAccumulator-=this.options.fixedDelta,this.worldTime+=this.options.fixedDelta,this.event.time=this.worldTime-this.deltaAccumulator,this.event.delta=this.options.fixedDelta,this.event.tps=Math.min(this.options.fixedTps,this.tps),this.events.trigger("before-update",[this.event]),this.events.trigger("update",[this.event]),this.events.trigger("after-update",[this.event]);break;case Y.dynamic:if(this.options.correction){const t=this.delta;let e=1/60,n=1/60;for(const t of this.deltas)n+=t,e=Math.min(t,e);n/=this.deltas.length+1,this.delta=u.clamp(this.delta,.5*n,1.5*n)*st.DELTA_C+n*st.AVERAGE_C+e*st.MIN_C+this.lag*st.LAG_C,this.delta=Math.min(this.delta,.1),this.lag+=t-this.delta}else this.delta=Math.min(this.delta,.1);let t,e;if(this.options.timescale>1){t=Math.trunc(this.options.timescale);const n=(this.options.timescale-t)/t;e=this.delta*(n+1)}else t=1,e=this.delta*this.options.timescale;for(let n=0;n<t;++n)this.worldTime+=e,this.event.time=this.worldTime,this.event.delta=e,this.event.tps=this.tps,this.events.trigger("before-update",[this.event]),this.events.trigger("update",[this.event]),this.events.trigger("after-update",[this.event]);this.deltas.push(e),this.deltas.length>this.deltasSize&&this.deltas.shift()}}setTps(t){this.options.fixedTps=t,this.options.fixedDelta=1/t}singleStep(t=this.options.fixedDelta){if(this.enabled)return console.warn("Single step can be called only when loop is disabled");this.worldTime+=t,this.event.time=this.worldTime,this.event.delta=t,this.event.tps=1/t,this.events.trigger("before-update",[this.event]),this.events.trigger("update",[this.event]),this.events.trigger("after-update",[this.event])}runRender(){this.enabledRender||(this.enabledRender=!0,this.renderTime=performance.now()/1e3-this.renderDelta,this.render())}stopRender(){this.enabledRender=!1,this.renderRequestId&&window.cancelAnimationFrame(this.renderRequestId)}render(){this.renderRequestId=window.requestAnimationFrame(()=>{this.render()});const t=performance.now()/1e3;this.renderDelta=t-this.renderTime,this.fps=1/this.renderDelta,this.renderTime=t,this.renderEvent.time=this.renderTime,this.renderEvent.delta=this.renderDelta,this.events.trigger("before-render",[this.renderEvent]),this.events.trigger("render",[this.renderEvent]),this.events.trigger("after-render",[this.renderEvent])}}st.LAG_C=.1,st.DELTA_C=.4,st.AVERAGE_C=.3,st.MIN_C=1-(st.DELTA_C+st.AVERAGE_C);var ot={props:{callback:{type:Function,required:!0},onSelectDemo:{type:Function,required:!0},onTogglePlay:{type:Function,required:!0},onRestart:{type:Function,required:!0},onSingleStep:{type:Function,required:!0},onSetRenderOption:{type:Function,required:!0},onSetSleeping:{type:Function,required:!0}},data:()=>({codeUrl:"https://github.com/fominvic81/Quark2d-Demo",demos:[],paused:!1,renderOptions:{showCollisions:!1,showSleeping:!1,showConstraints:!1,showSensors:!1,showAABBs:!1,showPositions:!1,showStatus:!1},solverOptions:{positionIterations:0,velocityIterations:0,constraintIterations:0},runnerOptions:{type:0,tps:60,timescale:1,correction:!1},RunnerType:Y,sleeping:o.NO_SLEEPING,SleepingType:o,gravity:new l,info:[""]}),methods:{togglePlay(){this.paused=!this.paused,this.onTogglePlay(this.paused)},singleStep(){this.paused=!0,this.onSingleStep()},setRenderOption(t){const e=t.target.id,n=t.target.checked;this.onSetRenderOption(e,n),this.renderOptions[e]=n},changeDemo(t,e){const n=t.render.options;for(const t of Object.entries(n))this.renderOptions[t[0]]=t[1];this.runnerOptions=t.runner.options,this.solverOptions=t.engine.solver.options,this.sleeping=t.engine.sleeping.type,this.codeUrl=e.getUrl(),this.gravity=t.engine.gravity,this.info=Array.isArray(e.options.info)?e.options.info:[e.options.info]},addDemo(t){this.demos.push(t)}},created(){window.addEventListener("keydown",t=>{document.getElementById("focus").focus(),"p"===t.key?this.togglePlay():"o"===t.key?this.singleStep():"r"===t.key&&this.onRestart()}),this.callback(this.changeDemo,this.addDemo)}};n(23);var at=function(t,e,n,i,r,s,o,a){var h,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=h):r&&(h=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),h)if(u.functional){u._injectStyles=h;var l=u.render;u.render=function(t,e){return h.call(e),l(t,e)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,h):[h]}return{exports:t,options:u}}(ot,h,[],!1,null,null,null);at.options.__file="src/vue/App.vue";var ht=at.exports;class ut{constructor(t,e){this.paused=!1,this.changeDemo=()=>{},this.addDemoToVue=()=>{},this.demos=new Set,this.demoByName=new Map;const n={props:{callback:(t,e)=>{this.changeDemo=t,this.addDemoToVue=e},onSelectDemo:t=>{this.setDemo(t)},onTogglePlay:t=>{this.paused=t,this.updatePaused()},onRestart:()=>{this.setDemo(this.demoName)},onSingleStep:()=>{this.paused=!0,this.demo.runner.stop(),this.demo.runner.singleStep()},onSetRenderOption:(t,e)=>{this.demo.render["set"+t[0].toUpperCase()+t.substring(1,t.length)]?this.demo.render["set"+t[0].toUpperCase()+t.substring(1,t.length)](e):this.demo.render.options[t]=e},onSetSleeping:t=>{this.demo.engine.sleeping.setType(t)},codeUrl:e.getUrl()}};this.vue=new a.a({el:"#vue",render:t=>t(ht,n)}),this.addDemo(...t),this.demoName=e.options.name,this.demo=new e(document.getElementById("canvas-container")),this.changeDemo(this.demo,e),this.updatePaused()}setDemo(t){const e=this.demoByName.get(t);if(e){if(this.demo){this.demo.render.renderer.destroy(),this.demo.render.stage.destroy(),this.demo.render.mouse.removeListeners(),this.demo.render.canvas.remove(),this.demo.runner.stop(),this.demo.runner.stopRender();for(const t in this.demo.render)delete this.demo.render[t];for(const t in this.demo.runner)delete this.demo.runner[t];for(const t in this.demo.engine)delete this.demo.engine[t]}this.demoName=e.options.name,this.demo=new e(document.getElementById("canvas-container")),this.changeDemo(this.demo,e),this.updatePaused()}}addDemo(...t){for(const e of t)this.demos.add(e),this.demoByName.set(e.options.name,e),this.addDemoToVue(e)}updatePaused(){this.paused?this.demo.runner.stop():this.demo.runner.run()}}class lt{constructor(t){}static getUrl(){return`https://github.com/fominvic81/Quark2d-Demo/blob/master/src/demos/${this.options.fileName}.ts`}}var ct=n(19),dt=n(22),pt=n.n(dt);
/*!
 * @pixi/polyfill - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
self.Promise||(self.Promise=ct.a),Object.assign||(Object.assign=pt.a);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var ft=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-ft}}for(var mt=Date.now(),yt=["ms","moz","webkit","o"],vt=0;vt<yt.length&&!self.requestAnimationFrame;++vt){var gt=yt[vt];self.requestAnimationFrame=self[gt+"RequestAnimationFrame"],self.cancelAnimationFrame=self[gt+"CancelAnimationFrame"]||self[gt+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+mt-e;return n<0&&(n=0),mt=e,self.setTimeout((function(){mt=Date.now(),t(performance.now())}),n)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var _t=n(3),bt=n(4),xt=n(2);
/*!
 * @pixi/display - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
bt.b.SORTABLE_CHILDREN=!1;var At=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?xt.j.EMPTY:((t=t||new xt.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var n=t.a,i=t.b,r=t.c,s=t.d,o=t.tx,a=t.ty,h=n*e.x+r*e.y+o,u=i*e.x+s*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,i=this.maxX,r=this.maxY,s=t[0],o=t[1];e=s<e?s:e,n=o<n?o:n,i=s>i?s:i,r=o>r?o:r,e=(s=t[2])<e?s:e,n=(o=t[3])<n?o:n,i=s>i?s:i,r=o>r?o:r,e=(s=t[4])<e?s:e,n=(o=t[5])<n?o:n,i=s>i?s:i,r=o>r?o:r,e=(s=t[6])<e?s:e,n=(o=t[7])<n?o:n,i=s>i?s:i,r=o>r?o:r,this.minX=e,this.minY=n,this.maxX=i,this.maxY=r},t.prototype.addFrame=function(t,e,n,i,r){this.addFrameMatrix(t.worldTransform,e,n,i,r)},t.prototype.addFrameMatrix=function(t,e,n,i,r){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=s*e+a*n+u,y=o*e+h*n+l;c=m<c?m:c,d=y<d?y:d,p=m>p?m:p,f=y>f?y:f,c=(m=s*i+a*n+u)<c?m:c,d=(y=o*i+h*n+l)<d?y:d,p=m>p?m:p,f=y>f?y:f,c=(m=s*e+a*r+u)<c?m:c,d=(y=o*e+h*r+l)<d?y:d,p=m>p?m:p,f=y>f?y:f,c=(m=s*i+a*r+u)<c?m:c,d=(y=o*i+h*r+l)<d?y:d,p=m>p?m:p,f=y>f?y:f,this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,n){for(var i=this.minX,r=this.minY,s=this.maxX,o=this.maxY,a=e;a<n;a+=2){var h=t[a],u=t[a+1];i=h<i?h:i,r=u<r?u:r,s=h>s?h:s,o=u>o?u:o}this.minX=i,this.minY=r,this.maxX=s,this.maxY=o},t.prototype.addVertices=function(t,e,n,i){this.addVerticesMatrix(t.worldTransform,e,n,i)},t.prototype.addVerticesMatrix=function(t,e,n,i,r,s){void 0===r&&(r=0),void 0===s&&(s=r);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,y=n;y<i;y+=2){var v=e[y],g=e[y+1],_=o*v+h*g+l,b=u*g+a*v+c;d=Math.min(d,_-r),f=Math.max(f,_+r),p=Math.min(p,b-s),m=Math.max(m,b+s)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,i=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=r&&i<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=n<o?n:o,this.minY=i<a?i:a,this.maxX=r>h?r:h,this.maxY=s>u?s:u}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=r&&i<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=n<o?n:o,this.minY=i<a?i:a,this.maxX=r>h?r:h,this.maxY=s>u?s:u}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,i,r,s){t-=r,e-=s,n+=r,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},t}(),wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Tt(t,e){function n(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Et=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new xt.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new At,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return Tt(e,t),e.mixin=function(t){for(var n=Object.keys(t),i=0;i<n.length;++i){var r=n[i];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new xt.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new xt.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new At);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,r=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-r,s},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,i){return e&&(t=e.toGlobal(t,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,i,r,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=i||1,this.rotation=r,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new St),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*xt.i},set:function(t){this.transform.rotation=t*xt.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1);(this._mask=t,this._mask)&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(_t.EventEmitter),St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return Tt(e,t),e}(Et);function It(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Et.prototype.displayObjectUpdateTransform=Et.prototype.updateTransform;var Ot=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=bt.b.SORTABLE_CHILDREN,e.sortDirty=!1,e}return Tt(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),i=this.getChildIndex(e);this.children[n]=e,this.children[i]=t,this.onChildrenChange(n<i?n:i)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(_t.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var r=e[0],s=this.children.indexOf(r);if(-1===s)return null;r.parent=null,r.transform._parentID=-1,Object(_t.removeItems)(this.children,s,1),this._boundsID++,this.onChildrenChange(s),r.emit("removed",this),this.emit("childRemoved",r,this,s)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(_t.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,i=t,r=e-i;if(r>0&&r<=e){n=this.children.splice(i,r);for(var s=0;s<n.length;++s)n[s].parent=null,n[s].transform&&(n[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(s=0;s<n.length;++s)n[s].emit("removed",this),this.emit("childRemoved",n[s],this,s);return n}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(It),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var i=t.prototype.getLocalBounds.call(this,e);if(!n)for(var r=0,s=this.children.length;r<s;++r){var o=this.children[r];o.visible&&o.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._render(t);i=0;for(var r=this.children.length;i<r;i++)this.children[i].render(t);t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(n)for(var r=0;r<i.length;++r)i[r].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(Et);Ot.prototype.containerUpdateTransform=Ot.prototype.updateTransform;Et.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var Ct=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(_t.isMobile.tablet||_t.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!(_t.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=e.left,i=e.top,r=e.width,s=e.height,o=this.renderer,a=o.width,h=o.height,u=o.resolution,l=r/a*u,c=s/h*u,d=this.div;d.style.left=n+"px",d.style.top=i+"px",d.style.width=a+"px",d.style.height=h+"px";for(var p=0;p<this.children.length;p++){var f=this.children[p];if(f.renderId!==this.renderId)f._accessibleActive=!1,Object(_t.removeItems)(this.children,p,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,p--;else{d=f._accessibleDiv;var m=f.hitArea,y=f.worldTransform;f.hitArea?(d.style.left=(y.tx+m.x*y.a)*l+"px",d.style.top=(y.ty+m.y*y.d)*c+"px",d.style.width=m.width*y.a*l+"px",d.style.height=m.height*y.d*c+"px"):(m=f.getBounds(),this.capHitArea(m),d.style.left=m.x*l+"px",d.style.top=m.y*c+"px",d.style.width=m.width*l+"px",d.style.height=m.height*c+"px",d.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&d.setAttribute("aria-label",f.accessibleHint)),f.accessibleTitle===d.title&&f.tabIndex===d.tabIndex||(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,n=e.width,i=e.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>i&&(t.height=i-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,n=t.target.displayObject,i=e.eventData;e.dispatchEvent(n,"click",i),e.dispatchEvent(n,"pointertap",i),e.dispatchEvent(n,"tap",i)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,n=t.target.displayObject,i=e.eventData;e.dispatchEvent(n,"mouseover",i)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,n=t.target.displayObject,i=e.eventData;e.dispatchEvent(n,"mouseout",i)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),Pt=n(5),Mt=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new xt.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Dt=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Bt=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Nt=function(){function t(){this._tempPoint=new xt.g}return t.prototype.recursiveFindHit=function(t,e,n,i,r){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=r=e.interactive||r,h=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(i=!1,h=!1)),a=!1):e._mask&&i&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(i=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],d=this.recursiveFindHit(t,c,n,i,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(i=!1),o=!0)}}return r&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),n&&n(t,e,!!o))),o},t.prototype.findHit=function(t,e,n,i){this.recursiveFindHit(t,e,n,i,!1)},t}(),Lt={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Et.mixin(Lt);var Ft={target:null,data:{global:null}},Gt=function(t){function e(e,n){var i=t.call(this)||this;return n=n||{},i.renderer=e,i.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new Mt,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new Dt,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in self),i.supportsTouchEvents="ontouchstart"in self,i.supportsPointerEvents=!!self.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new Nt,i._tempDisplayObject=new St,i._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function(t,e){function n(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return Ft.target=null,Ft.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Ft,e,null,!0),Ft.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(Pt.a.system.add(this.tickerUpdate,this,Pt.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Pt.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),self.addEventListener("pointercancel",this.onPointerCancel,!0),self.addEventListener("pointerup",this.onPointerUp,!0)):(self.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),self.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),self.removeEventListener("pointercancel",this.onPointerCancel,!0),self.removeEventListener("pointerup",this.onPointerUp,!0)):(self.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),self.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,n)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var r=1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*r,t.y=(n-i.top)*(this.interactionDOMElement.height/i.height)*r},e.prototype.processInteractive=function(t,e,n,i){var r=this.search.findHit(t,e,n,i),s=this.delayedEvents;if(!s.length)return r;t.stopPropagationHint=!1;var o=s.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=s[a],u=h.displayObject,l=h.eventString,c=h.eventData;c.stopsPropagatingAt===u&&(c.stopPropagationHint=!0),this.dispatchEvent(u,l,c)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,i=0;i<n;i++){var r=e[i],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var i=t.data,r=t.data.identifier;if(n)if(e.trackedPointers[r]||(e.trackedPointers[r]=new Bt(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;s?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var i=this.normalizeToPointerData(t),r=i.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var a=i[o],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,n,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+s:"mouseup"+s,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var i=t.data,r=t.data.identifier,s=e.trackedPointers[r],o="touch"===i.pointerType,a="mouse"===i.pointerType||"pen"===i.pointerType,h=!1;if(a){var u=2===i.button,l=Bt.FLAGS,c=u?l.RIGHT_DOWN:l.LEFT_DOWN,d=void 0!==s&&s.flags&c;n?(this.dispatchEvent(e,u?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):d&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),s&&(u?s.rightDown=!1:s.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,i=0;i<n;i++){var r=e[i],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var i=t.data,r="touch"===i.pointerType,s="mouse"===i.pointerType||"pen"===i.pointerType;s&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);i.data.originalEvent=e,this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var i=t.data,r=t.data.identifier,s="mouse"===i.pointerType||"pen"===i.pointerType,o=e.trackedPointers[r];n&&!o&&(o=e.trackedPointers[r]=new Bt(r)),void 0!==o&&(n&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,n);i.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new Mt).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,i=t.changedTouches.length;n<i;n++){var r=t.changedTouches[n];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else if(self.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof self.PointerEvent))e.push(t);else{var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(_t.EventEmitter),Ut=n(1),kt=function(){function t(e){var n=this;this.stage=new Ot,e=Object.assign({forceCanvas:!1},e),this.renderer=Object(Ut.u)(e),t._plugins.forEach((function(t){t.init.call(n,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var i=this,r=t._plugins.slice(0);r.reverse(),r.forEach((function(t){t.destroy.call(i)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),Xt=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){self.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===self)t=self.innerWidth,n=self.innerHeight;else{var i=e._resizeTo;t=i.clientWidth,n=i.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();kt.registerPlugin(Xt);
/*!
 * @pixi/extract - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var jt=new xt.j,Ht=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var i=new Image;return i.src=this.base64(t,e,n),i},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e){var n,i,r,s=this.renderer,o=!1,a=!1;e&&(e instanceof Ut.m?r=e:(r=this.renderer.generateTexture(e),a=!0)),r?(n=r.baseTexture.resolution,i=r.frame,o=!1,s.renderTexture.bind(r)):(n=this.renderer.resolution,o=!0,(i=jt).width=this.renderer.width,i.height=this.renderer.height,s.renderTexture.bind(null));var h=Math.floor(i.width*n+1e-4),u=Math.floor(i.height*n+1e-4),l=new _t.CanvasRenderTarget(h,u,1),c=new Uint8Array(4*h*u),d=s.gl;d.readPixels(i.x*n,i.y*n,h,u,d.RGBA,d.UNSIGNED_BYTE,c);var p=l.context.getImageData(0,0,h,u);if(t.arrayPostDivide(c,p.data),l.context.putImageData(p,0,0),o){var f=new _t.CanvasRenderTarget(l.width,l.height,1);f.context.scale(1,-1),f.context.drawImage(l.canvas,0,-u),l.destroy(),l=f}return a&&r.destroy(!0),l.canvas},t.prototype.pixels=function(e){var n,i,r,s=this.renderer,o=!1;e&&(e instanceof Ut.m?r=e:(r=this.renderer.generateTexture(e),o=!0)),r?(n=r.baseTexture.resolution,i=r.frame,s.renderTexture.bind(r)):(n=s.resolution,(i=jt).width=s.width,i.height=s.height,s.renderTexture.bind(null));var a=i.width*n,h=i.height*n,u=new Uint8Array(4*a*h),l=s.gl;return l.readPixels(i.x*n,i.y*n,a,h,l.RGBA,l.UNSIGNED_BYTE,u),o&&r.destroy(!0),t.arrayPostDivide(u,u),u},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var i=e[n+3]=t[n+3];0!==i?(e[n]=Math.round(Math.min(255*t[n]/i,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/i,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/i,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t}(),Yt=n(6),Vt=n(10),Wt=n(0),zt=function(t,e){return(zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function qt(t,e){function n(){this.constructor=t}zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}!function(t){function e(e,n,i,r){void 0===e&&(e=1500),void 0===i&&(i=16384),void 0===r&&(r=!1);var s=t.call(this)||this;return i>16384&&(i=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=i,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Wt.b.NORMAL,s.autoResize=r,s.roundPixels=!0,s.baseTexture=null,s.setProperties(n),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}qt(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Object(_t.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(Ot);var $t,Kt,Zt=function(){function t(t,e,n){this.geometry=new Ut.i,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var r=t[i];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||Wt.p.FLOAT,offset:r.offset},e[i]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Ut.f(Object(_t.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){(o=this.dynamicProperties[n]).offset=e,e+=o.size,this.dynamicStride+=o.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Ut.f(this.dynamicData,!1,!1);var r=0;this.staticStride=0;for(n=0;n<this.staticProperties.length;++n){(o=this.staticProperties[n]).offset=r,r+=o.size,this.staticStride+=o.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Ut.f(this.staticData,!0,!1);for(n=0;n<this.dynamicProperties.length;++n){var o=this.dynamicProperties[n];t.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===Wt.p.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(n=0;n<this.staticProperties.length;++n){o=this.staticProperties[n];t.addAttribute(o.attributeName,this.staticBuffer,0,o.type===Wt.p.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var i=0;i<this.dynamicProperties.length;i++){var r=this.dynamicProperties[i];r.uploadFunction(t,e,n,r.type===Wt.p.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var i=0;i<this.staticProperties.length;i++){var r=this.staticProperties[i];r.uploadFunction(t,e,n,r.type===Wt.p.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Jt=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new xt.d,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Wt.p.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Ut.o.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=Ut.p.for2d(),n}return qt(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,i=t._batchSize,r=this.renderer,s=e.length;if(0!==s){s>n&&!t.autoResize&&(s=n);var o=t._buffers;o||(o=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=Object(_t.correctBlendMode)(t.blendMode,a.alphaMode),r.state.set(this.state);var h=r.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Object(_t.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var l=!1,c=0,d=0;c<s;c+=i,d+=1){var p=s-c;p>i&&(p=i),d>=o.length&&o.push(this._generateOneMoreBuffer(t));var f=o[d];f.uploadDynamic(e,c,p);var m=t._bufferUpdateIDs[d]||0;(l=l||f._updateID<m)&&(f._updateID=t._updateID,f.uploadStatic(e,c,p)),r.geometry.bind(f.geometry),h.drawElements(h.TRIANGLES,6*p,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,i=t._batchSize,r=t._properties,s=0;s<n;s+=i)e.push(new Zt(this.properties,r,i));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new Zt(this.properties,n,e)},e.prototype.uploadVertices=function(t,e,n,i,r,s){for(var o=0,a=0,h=0,u=0,l=0;l<n;++l){var c=t[e+l],d=c._texture,p=c.scale.x,f=c.scale.y,m=d.trim,y=d.orig;m?(o=(a=m.x-c.anchor.x*y.width)+m.width,h=(u=m.y-c.anchor.y*y.height)+m.height):(o=y.width*(1-c.anchor.x),a=y.width*-c.anchor.x,h=y.height*(1-c.anchor.y),u=y.height*-c.anchor.y),i[s]=a*p,i[s+1]=u*f,i[s+r]=o*p,i[s+r+1]=u*f,i[s+2*r]=o*p,i[s+2*r+1]=h*f,i[s+3*r]=a*p,i[s+3*r+1]=h*f,s+=4*r}},e.prototype.uploadPosition=function(t,e,n,i,r,s){for(var o=0;o<n;o++){var a=t[e+o].position;i[s]=a.x,i[s+1]=a.y,i[s+r]=a.x,i[s+r+1]=a.y,i[s+2*r]=a.x,i[s+2*r+1]=a.y,i[s+3*r]=a.x,i[s+3*r+1]=a.y,s+=4*r}},e.prototype.uploadRotation=function(t,e,n,i,r,s){for(var o=0;o<n;o++){var a=t[e+o].rotation;i[s]=a,i[s+r]=a,i[s+2*r]=a,i[s+3*r]=a,s+=4*r}},e.prototype.uploadUvs=function(t,e,n,i,r,s){for(var o=0;o<n;++o){var a=t[e+o]._texture._uvs;a?(i[s]=a.x0,i[s+1]=a.y0,i[s+r]=a.x1,i[s+r+1]=a.y1,i[s+2*r]=a.x2,i[s+2*r+1]=a.y2,i[s+3*r]=a.x3,i[s+3*r+1]=a.y3,s+=4*r):(i[s]=0,i[s+1]=0,i[s+r]=0,i[s+r+1]=0,i[s+2*r]=0,i[s+2*r+1]=0,i[s+3*r]=0,i[s+3*r+1]=0,s+=4*r)}},e.prototype.uploadTint=function(t,e,n,i,r,s){for(var o=0;o<n;++o){var a=t[e+o],h=a._texture.baseTexture.alphaMode>0,u=a.alpha,l=u<1&&h?Object(_t.premultiplyTint)(a._tintRGB,u):a._tintRGB+(255*u<<24);i[s]=l,i[s+r]=l,i[s+2*r]=l,i[s+3*r]=l,s+=4*r}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(Ut.j);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}($t||($t={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Kt||(Kt={}));var Qt={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},te=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Ut.q.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ut.q.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),ee=function(t,e){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ne(t,e){function n(){this.constructor=t}ee(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ie={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,i=t.holes,r=e.points,s=e.indices;if(n.length>=6){for(var o=[],a=0;a<i.length;a++){var h=i[a];o.push(n.length/2),n=n.concat(h.points)}var u=Object(_t.earcut)(n,o,2);if(!u)return;var l=r.length/2;for(a=0;a<u.length;a+=3)s.push(u[a]+l),s.push(u[a+1]+l),s.push(u[a+2]+l);for(a=0;a<n.length;a++)r.push(n[a])}}},re={build:function(t){var e,n,i=t.shape,r=t.points,s=i.x,o=i.y;if(r.length=0,t.type===xt.l.CIRC)e=i.radius,n=i.radius;else{var a=t.shape;e=a.width,n=a.height}if(0!==e&&0!==n){var h=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(e+n));h/=2.3;for(var u=2*Math.PI/h,l=0;l<h-.5;l++)r.push(s+Math.sin(-u*l)*e,o+Math.cos(-u*l)*n);r.push(r[0],r[1])}},triangulate:function(t,e){var n=t.points,i=e.points,r=e.indices,s=i.length/2,o=s,a=t.shape,h=t.matrix,u=a.x,l=a.y;i.push(t.matrix?h.a*u+h.c*l+h.tx:u,t.matrix?h.b*u+h.d*l+h.ty:l);for(var c=0;c<n.length;c+=2)i.push(n[c],n[c+1]),r.push(s++,o,s)}},se={build:function(t){var e=t.shape,n=e.x,i=e.y,r=e.width,s=e.height,o=t.points;o.length=0,o.push(n,i,n+r,i,n+r,i+s,n,i+s)},triangulate:function(t,e){var n=t.points,i=e.points,r=i.length/2;i.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function oe(t,e,n){return t+(e-t)*n}function ae(t,e,n,i,r,s,o){void 0===o&&(o=[]);for(var a=o,h=0,u=0,l=0,c=0,d=0,p=0,f=0,m=0;f<=20;++f)h=oe(t,n,m=f/20),u=oe(e,i,m),l=oe(n,r,m),c=oe(i,s,m),d=oe(h,l,m),p=oe(u,c,m),a.push(d,p);return a}var he={build:function(t){var e=t.shape,n=t.points,i=e.x,r=e.y,s=e.width,o=e.height,a=Math.max(0,Math.min(e.radius,Math.min(s,o)/2));n.length=0,a?(ae(i,r+a,i,r,i+a,r,n),ae(i+s-a,r,i+s,r,i+s,r+a,n),ae(i+s,r+o-a,i+s,r+o,i+s-a,r+o,n),ae(i+a,r+o,i,r+o,i,r+o-a,n)):n.push(i,r,i+s,r,i+s,r+o,i,r+o)},triangulate:function(t,e){for(var n=t.points,i=e.points,r=e.indices,s=i.length/2,o=Object(_t.earcut)(n,null,2),a=0,h=o.length;a<h;a+=3)r.push(o[a]+s),r.push(o[a+1]+s),r.push(o[a+2]+s);for(a=0,h=n.length;a<h;a++)i.push(n[a],n[++a])}};function ue(t,e,n,i,r,s,o,a){var h,u;o?(h=i,u=-n):(h=-i,u=n);var l=t-n*r+h,c=e-i*r+u,d=t+n*s+h,p=e+i*s+u;return a.push(l,c),a.push(d,p),2}function le(t,e,n,i,r,s,o,a){var h=n-t,u=i-e,l=Math.atan2(h,u),c=Math.atan2(r-t,s-e);a&&l<c?l+=2*Math.PI:!a&&l>c&&(c+=2*Math.PI);var d=l,p=c-l,f=Math.abs(p),m=Math.sqrt(h*h+u*u),y=1+(15*f*Math.sqrt(m)/Math.PI>>0),v=p/y;if(d+=v,a){o.push(t,e),o.push(n,i);for(var g=1,_=d;g<y;g++,_+=v)o.push(t,e),o.push(t+Math.sin(_)*m,e+Math.cos(_)*m);o.push(t,e),o.push(r,s)}else{o.push(n,i),o.push(t,e);for(g=1,_=d;g<y;g++,_+=v)o.push(t+Math.sin(_)*m,e+Math.cos(_)*m),o.push(t,e);o.push(r,s),o.push(t,e)}return 2*y}function ce(t,e){t.lineStyle.native?function(t,e){var n=0,i=t.shape,r=t.points||i.points,s=i.type!==xt.l.POLY||i.closeStroke;if(0!==r.length){var o=e.points,a=e.indices,h=r.length/2,u=o.length/2,l=u;for(o.push(r[0],r[1]),n=1;n<h;n++)o.push(r[2*n],r[2*n+1]),a.push(l,l+1),l++;s&&a.push(l,u)}}(t,e):function(t,e){var n=t.shape,i=t.points||n.points.slice(),r=e.closePointEps;if(0!==i.length){var s=t.lineStyle,o=new xt.g(i[0],i[1]),a=new xt.g(i[i.length-2],i[i.length-1]),h=n.type!==xt.l.POLY||n.closeStroke,u=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(h){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var l=.5*(o.x+a.x),c=.5*(a.y+o.y);i.unshift(l,c),i.push(l,c)}var d=e.points,p=i.length/2,f=i.length,m=d.length/2,y=s.width/2,v=y*y,g=s.miterLimit*s.miterLimit,_=i[0],b=i[1],x=i[2],A=i[3],w=0,T=0,E=-(b-A),S=_-x,I=0,O=0,C=Math.sqrt(E*E+S*S);E/=C,S/=C,E*=y,S*=y;var P=s.alignment,M=2*(1-P),R=2*P;h||(s.cap===Kt.ROUND?f+=le(_-E*(M-R)*.5,b-S*(M-R)*.5,_-E*M,b-S*M,_+E*R,b+S*R,d,!0)+2:s.cap===Kt.SQUARE&&(f+=ue(_,b,E,S,M,R,!0,d))),d.push(_-E*M,b-S*M),d.push(_+E*R,b+S*R);for(var D=1;D<p-1;++D){_=i[2*(D-1)],b=i[2*(D-1)+1],x=i[2*D],A=i[2*D+1],w=i[2*(D+1)],T=i[2*(D+1)+1],E=-(b-A),S=_-x,E/=C=Math.sqrt(E*E+S*S),S/=C,E*=y,S*=y,I=-(A-T),O=x-w,I/=C=Math.sqrt(I*I+O*O),O/=C,I*=y,O*=y;var B=x-_,N=b-A,L=x-w,F=T-A,G=N*L-F*B,U=G<0;if(Math.abs(G)<.1)d.push(x-E*M,A-S*M),d.push(x+E*R,A+S*R);else{var k=(-E+_)*(-S+A)-(-E+x)*(-S+b),X=(-I+w)*(-O+A)-(-I+x)*(-O+T),j=(B*X-L*k)/G,H=(F*k-N*X)/G,Y=(j-x)*(j-x)+(H-A)*(H-A),V=x+(j-x)*M,W=A+(H-A)*M,z=x-(j-x)*R,q=A-(H-A)*R,$=U?M:R;Y<=Math.min(B*B+N*N,L*L+F*F)+$*$*v?s.join===$t.BEVEL||Y/v>g?(U?(d.push(V,W),d.push(x+E*R,A+S*R),d.push(V,W),d.push(x+I*R,A+O*R)):(d.push(x-E*M,A-S*M),d.push(z,q),d.push(x-I*M,A-O*M),d.push(z,q)),f+=2):s.join===$t.ROUND?U?(d.push(V,W),d.push(x+E*R,A+S*R),f+=le(x,A,x+E*R,A+S*R,x+I*R,A+O*R,d,!0)+4,d.push(V,W),d.push(x+I*R,A+O*R)):(d.push(x-E*M,A-S*M),d.push(z,q),f+=le(x,A,x-E*M,A-S*M,x-I*M,A-O*M,d,!1)+4,d.push(x-I*M,A-O*M),d.push(z,q)):(d.push(V,W),d.push(z,q)):(d.push(x-E*M,A-S*M),d.push(x+E*R,A+S*R),s.join===$t.BEVEL||Y/v>g||(s.join===$t.ROUND?f+=U?le(x,A,x+E*R,A+S*R,x+I*R,A+O*R,d,!0)+2:le(x,A,x-E*M,A-S*M,x-I*M,A-O*M,d,!1)+2:(U?(d.push(z,q),d.push(z,q)):(d.push(V,W),d.push(V,W)),f+=2)),d.push(x-I*M,A-O*M),d.push(x+I*R,A+O*R),f+=2)}}_=i[2*(p-2)],b=i[2*(p-2)+1],x=i[2*(p-1)],E=-(b-(A=i[2*(p-1)+1])),S=_-x,E/=C=Math.sqrt(E*E+S*S),S/=C,E*=y,S*=y,d.push(x-E*M,A-S*M),d.push(x+E*R,A+S*R),h||(s.cap===Kt.ROUND?f+=le(x-E*(M-R)*.5,A-S*(M-R)*.5,x-E*M,A-S*M,x+E*R,A+S*R,d,!1)+2:s.cap===Kt.SQUARE&&(f+=ue(x,A,E,S,M,R,!1,d)));var K=e.indices,Z=Qt.epsilon*Qt.epsilon;for(D=m;D<f+m-2;++D)_=d[2*D],b=d[2*D+1],x=d[2*(D+1)],A=d[2*(D+1)+1],w=d[2*(D+2)],T=d[2*(D+2)+1],Math.abs(_*(A-T)+x*(T-b)+w*(b-A))<Z||K.push(D,D+1,D+2)}}(t,e)}var de,pe=function(){function t(){}return t.curveTo=function(t,e,n,i,r,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,u=i-e,l=n-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===r)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var d=a*a+h*h,p=u*u+l*l,f=a*u+h*l,m=r*Math.sqrt(d)/c,y=r*Math.sqrt(p)/c,v=m*f/d,g=y*f/p,_=m*l+y*h,b=m*u+y*a,x=h*(y+v),A=a*(y+v),w=l*(m+g),T=u*(m+g);return{cx:_+t,cy:b+e,radius:r,startAngle:Math.atan2(A-b,x-_),endAngle:Math.atan2(T-b,w-_),anticlockwise:h*u>l*a}},t.arc=function(t,e,n,i,r,s,o,a,h){for(var u=o-s,l=Qt._segmentsCount(Math.abs(u)*r,40*Math.ceil(Math.abs(u)/xt.f)),c=u/(2*l),d=2*c,p=Math.cos(c),f=Math.sin(c),m=l-1,y=m%1/m,v=0;v<=m;++v){var g=c+s+d*(v+y*v),_=Math.cos(g),b=-Math.sin(g);h.push((p*_+f*b)*r+n,(p*-b+f*_)*r+i)}},t}(),fe=function(){function t(){}return t.curveLength=function(t,e,n,i,r,s,o,a){for(var h=0,u=0,l=0,c=0,d=0,p=0,f=0,m=0,y=0,v=0,g=0,_=t,b=e,x=1;x<=10;++x)v=_-(m=(f=(p=(d=1-(u=x/10))*d)*d)*t+3*p*u*n+3*d*(l=u*u)*r+(c=l*u)*o),g=b-(y=f*e+3*p*u*i+3*d*l*s+c*a),_=m,b=y,h+=Math.sqrt(v*v+g*g);return h},t.curveTo=function(e,n,i,r,s,o,a){var h=a[a.length-2],u=a[a.length-1];a.length-=2;var l=Qt._segmentsCount(t.curveLength(h,u,e,n,i,r,s,o)),c=0,d=0,p=0,f=0,m=0;a.push(h,u);for(var y=1,v=0;y<=l;++y)p=(d=(c=1-(v=y/l))*c)*c,m=(f=v*v)*v,a.push(p*h+3*d*v*e+3*c*f*i+m*s,p*u+3*d*v*n+3*c*f*r+m*o)},t}(),me=function(){function t(){}return t.curveLength=function(t,e,n,i,r,s){var o=t-2*n+r,a=e-2*i+s,h=2*n-2*t,u=2*i-2*e,l=4*(o*o+a*a),c=4*(o*h+a*u),d=h*h+u*u,p=2*Math.sqrt(l+c+d),f=Math.sqrt(l),m=2*l*f,y=2*Math.sqrt(d),v=c/f;return(m*p+f*c*(p-y)+(4*d*l-c*c)*Math.log((2*f+v+p)/(v+y)))/(4*m)},t.curveTo=function(e,n,i,r,s){for(var o=s[s.length-2],a=s[s.length-1],h=Qt._segmentsCount(t.curveLength(o,a,e,n,i,r)),u=0,l=0,c=1;c<=h;++c){var d=c/h;u=o+(e-o)*d,l=a+(n-a)*d,s.push(u+(e+(i-e)*d-u)*d,l+(n+(r-n)*d-l)*d)}},t}(),ye=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),ve=((de={})[xt.l.POLY]=ie,de[xt.l.CIRC]=re,de[xt.l.ELIP]=re,de[xt.l.RECT]=se,de[xt.l.RREC]=he,de),ge=[],_e=[],be=function(){function t(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=i,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),xe=new xt.g,Ae=new At,we=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new At,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return ne(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),_e.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),ge.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null);var r=new be(t,e,n,i);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new be(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var i=e[n];if(i.fillStyle.visible&&(i.shape&&(i.matrix?i.matrix.applyInverse(t,xe):xe.copyFrom(t),i.shape.contains(xe.x,xe.y)))){var r=!1;if(i.holes)for(var s=0;s<i.holes.length;s++){if(i.holes[s].shape.contains(xe.x,xe.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,i=null,r=null;this.batches.length>0&&(r=(i=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<n.length;s++){this.shapeIndex++;var o=n[s],a=o.fillStyle,h=o.lineStyle;ve[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var u=0;u<2;u++){var l=0===u?a:h;if(l.visible){var c=l.texture.baseTexture,d=this.indices.length,p=this.points.length/2;c.wrapMode=Wt.q.REPEAT,0===u?this.processFill(o):this.processLine(o);var f=this.points.length/2-p;0!==f&&(i&&!this._compareStyles(r,l)&&(i.end(d,p),i=null),i||((i=ge.pop()||new ye).begin(l,d,p),this.batches.push(i),r=l),this.addUvs(this.points,e,l.texture,p,f,l.matrix))}}}var m=this.indices.length,y=this.points.length/2;if(i&&i.end(m,y),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var v=y>65535&&t;this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],i=n.fillStyle,r=n.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var i=t[e],r=0;r<i.size;r++){var s=i.start+r;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Ut.a._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),_e.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,i=this.textureIds,r=_e.pop();r||((r=new Ut.b).texArray=new Ut.e),r.texArray.count=0,r.start=0,r.size=0,r.type=Wt.e.TRIANGLES;var s=0,o=null,a=0,h=!1,u=Wt.e.TRIANGLES,l=0;this.drawCalls.push(r);for(e=0;e<this.batches.length;e++){var c=this.batches[e],d=c.style,p=d.texture.baseTexture;h!==!!d.native&&(u=(h=!!d.native)?Wt.e.LINES:Wt.e.TRIANGLES,o=null,s=8,t++),o!==p&&(o=p,p._batchEnabled!==t&&(8===s&&(t++,s=0,r.size>0&&((r=_e.pop())||((r=new Ut.b).texArray=new Ut.e),this.drawCalls.push(r)),r.start=l,r.size=0,r.texArray.count=0,r.type=u),p.touched=1,p._batchEnabled=t,p._batchLocation=s,p.wrapMode=10497,r.texArray.elements[r.texArray.count++]=p,s++)),r.size+=c.size,l+=c.size,a=p._batchLocation,this.addColors(n,d.color,d.alpha,c.attribSize),this.addTextureIds(i,a,c.attribSize)}Ut.a._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,i=this.textureIds,r=new ArrayBuffer(3*t.length*4),s=new Float32Array(r),o=new Uint32Array(r),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=n[h],s[a++]=i[h];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),ie.triangulate(t,this)):ve[t.type].triangulate(t,this)},e.prototype.processLine=function(t){ce(t,this);for(var e=0;e<t.holes.length;e++)ce(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];ve[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=Ae,n=xt.d.IDENTITY;this._bounds.clear(),e.clear();for(var i=0;i<this.graphicsData.length;i++){var r=this.graphicsData[i],s=r.shape,o=r.type,a=r.lineStyle,h=r.matrix||xt.d.IDENTITY,u=0;if(a&&a.visible){var l=a.alignment;u=a.width,o===xt.l.POLY?u*=.5+Math.abs(.5-l):u*=Math.max(0,l)}if(n!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=h),o===xt.l.RECT||o===xt.l.RREC){var c=s;e.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,u,u)}else if(o===xt.l.CIRC){var d=s;e.addFramePad(d.x,d.y,d.x,d.y,d.radius+u,d.radius+u)}else if(o===xt.l.ELIP){var p=s;e.addFramePad(p.x,p.y,p.x,p.y,p.width+u,p.height+u)}else{var f=s;t.addVerticesMatrix(n,f.points,0,f.points.length,u,u)}}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var i=t[2*n],r=t[2*n+1];t[2*n]=e.a*i+e.c*r+e.tx,t[2*n+1]=e.b*i+e.d*r+e.ty}},e.prototype.addColors=function(t,e,n,i){for(var r=(e>>16)+(65280&e)+((255&e)<<16),s=Object(_t.premultiplyTint)(r,n);i-- >0;)t.push(s)},e.prototype.addTextureIds=function(t,e,n){for(;n-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,n,i,r,s){void 0===s&&(s=null);for(var o=0,a=e.length,h=n.frame;o<r;){var u=t[2*(i+o)],l=t[2*(i+o)+1];if(s){var c=s.a*u+s.c*l+s.tx;l=s.b*u+s.d*l+s.ty,u=c}o++,e.push(u/h.width,l/h.height)}var d=n.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,n,a,r)},e.prototype.adjustUvs=function(t,e,n,i){for(var r=e.baseTexture,s=1e-6,o=n+2*i,a=e.frame,h=a.width/r.width,u=a.height/r.height,l=a.x/a.width,c=a.y/a.height,d=Math.floor(t[n]+s),p=Math.floor(t[n+1]+s),f=n+2;f<o;f+=2)d=Math.min(d,Math.floor(t[f]+s)),p=Math.min(p,Math.floor(t[f+1]+s));l-=d,c-=p;for(f=n;f<o;f+=2)t[f]=(t[f]+l)*h,t[f+1]=(t[f+1]+c)*u},e.BATCHABLE_SIZE=100,e}(Ut.c),Te=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Kt.BUTT,e.join=$t.MITER,e.miterLimit=10,e}return ne(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(te),Ee=new Float32Array(3),Se={},Ie=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._geometry=e||new we,n._geometry.refCount++,n.shader=null,n.state=Ut.p.for2d(),n._fillStyle=new te,n._lineStyle=new Te,n._matrix=null,n._holeMode=!1,n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n.pluginName="batch",n._transformID=-1,n.tint=16777215,n.blendMode=Wt.b.NORMAL,n}return ne(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,n,i,r){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=.5),void 0===r&&(r=!1),"number"==typeof t&&(t={width:t,color:e,alpha:n,alignment:i,native:r}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Ut.q.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Kt.BUTT,join:$t.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new xt.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new xt.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,i=n[n.length-2],r=n[n.length-1];return i===t&&r===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,i){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),me.curveTo(t,e,n,i,r),this},e.prototype.bezierCurveTo=function(t,e,n,i,r,s){return this._initCurve(),fe.curveTo(t,e,n,i,r,s,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,i,r){this._initCurve(t,e);var s=this.currentPath.points,o=pe.curveTo(t,e,n,i,r,s);if(o){var a=o.cx,h=o.cy,u=o.radius,l=o.startAngle,c=o.endAngle,d=o.anticlockwise;this.arc(a,h,u,l,c,d)}return this},e.prototype.arc=function(t,e,n,i,r,s){if(void 0===s&&(s=!1),i===r)return this;if(!s&&r<=i?r+=xt.f:s&&i<=r&&(i+=xt.f),0===r-i)return this;var o=t+Math.cos(i)*n,a=e+Math.sin(i)*n,h=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var l=Math.abs(u[u.length-2]-o),c=Math.abs(u[u.length-1]-a);l<h&&c<h||u.push(o,a)}else this.moveTo(o,a),u=this.currentPath.points;return pe.arc(o,a,t,e,n,i,r,s,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Ut.q.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:Ut.q.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,i){return this.drawShape(new xt.j(t,e,n,i))},e.prototype.drawRoundedRect=function(t,e,n,i,r){return this.drawShape(new xt.k(t,e,n,i,r))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new xt.a(t,e,n))},e.prototype.drawEllipse=function(t,e,n,i){return this.drawShape(new xt.c(t,e,n,i))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];var r=!0,s=n[0];s.points?(r=s.closeStroke,t=s.points):t=Array.isArray(n[0])?n[0]:n;var o=new xt.h(t);return o.closeStroke=r,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===xt.l.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,n=t.context.supports.uint32Indices;e.updateBatches(n),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var i=0;i<n;i++){var r=t.batches[i],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),h={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:Object(_t.hex2rgb)(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,i=this.tint,r=this.worldAlpha,s=e.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*r,s.tint[1]=(i>>8&255)/255*r,s.tint[2]=(255&i)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,n.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,i=e.type,r=e.size,s=e.start,o=n.count,a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(i,r,s)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!Se[n]){for(var i=t.plugins.batch.MAX_TEXTURES,r=new Int32Array(i),s=0;s<i;s++)r[s]=s;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new xt.d,default:Ut.s.from({uSamplers:r},!0)},a=t.plugins[n]._shader.program;Se[n]=new Ut.o(a,o)}e=Se[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,n=e.minX,i=e.minY,r=e.maxX,s=e.maxY;this._bounds.addFrame(this.transform,n,i,r,s)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(_t.hex2rgb)(this.tint,Ee),e=0;e<this.batches.length;e++){var n=this.batches[e],i=n._batchRGB,r=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);n._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this._geometry.points,u=this.vertexData,l=0,c=0;c<h.length;c+=2){var d=h[c],p=h[c+1];u[l++]=n*d+r*p+o,u[l++]=s*p+i*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new xt.g,e}(Ot),Oe=function(t,e){return(Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Ce,Pe=new xt.g,Me=new Uint16Array([0,1,2,0,2,3]),Re=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new xt.e(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Wt.b.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||Ut.q.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=Me,n.pluginName="batch",n.isSprite=!0,n._roundPixels=bt.b.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}Oe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(_t.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(_t.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,p=0,f=0,m=0;if(u?(d=(p=u.x-c._x*l.width)+u.width,f=(m=u.y-c._y*l.height)+u.height):(d=(p=-c._x*l.width)+l.width,f=(m=-c._y*l.height)+l.height),h[0]=n*p+r*m+o,h[1]=s*m+i*p+a,h[2]=n*d+r*m+o,h[3]=s*m+i*d+a,h[4]=n*d+r*f+o,h[5]=s*f+i*d+a,h[6]=n*p+r*f+o,h[7]=s*f+i*p+a,this._roundPixels)for(var y=bt.b.RESOLUTION,v=0;v<h.length;++v)h[v]=Math.round((h[v]*y|0)/y)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,i=this._anchor,r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,u=r.tx,l=r.ty,c=-i._x*n.width,d=c+n.width,p=-i._y*n.height,f=p+n.height;e[0]=s*c+a*p+u,e[1]=h*p+o*c+l,e[2]=s*d+a*p+u,e[3]=h*p+o*d+l,e[4]=s*d+a*f+u,e[5]=h*f+o*d+l,e[6]=s*c+a*f+u,e[7]=h*f+o*c+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xt.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Pe);var e=this._texture.orig.width,n=this._texture.orig.height,i=-e*this.anchor.x,r=0;return Pe.x>=i&&Pe.x<i+e&&(r=-n*this.anchor.y,Pe.y>=r&&Pe.y<r+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof Ut.q?t:Ut.q.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(_t.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(_t.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Ut.q.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Ot),De=function(t,e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Ce||(Ce={}));var Be={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ce.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ne=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Le=function(){function t(t){this.styleID=0,this.reset(),Ue(this,t,t)}return t.prototype.clone=function(){var e={};return Ue(e,this,Be),new t(e)},t.prototype.reset=function(){Ue(this,Be,Be)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Ge(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Ge(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Ge(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var i=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&Ne.indexOf(i)<0&&(i='"'+i+'"'),e[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Fe(t){return"number"==typeof t?Object(_t.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Ge(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Fe(t[e]);return t}return Fe(t)}function Ue(t,e,n){for(var i in n)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var ke=function(){function t(t,e,n,i,r,s,o,a,h){this.text=t,this.style=e,this.width=n,this.height=i,this.lines=r,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}return t.measureText=function(e,n,i,r){void 0===r&&(r=t._canvas),i=null==i?n.wordWrap:i;var s=n.toFontString(),o=t.measureFont(s);0===o.fontSize&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);var a=r.getContext("2d");a.font=s;for(var h=(i?t.wordWrap(e,n,r):e).split(/(?:\r\n|\r|\n)/),u=new Array(h.length),l=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*n.letterSpacing;u[c]=d,l=Math.max(l,d)}var p=l+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var f=n.lineHeight||o.fontSize+n.strokeThickness,m=Math.max(f,o.fontSize+n.strokeThickness)+(h.length-1)*(f+n.leading);return n.dropShadow&&(m+=n.dropShadowDistance),new t(e,n,p,m,h,u,f+n.leading,l,o)},t.wordWrap=function(e,n,i){void 0===i&&(i=t._canvas);for(var r=i.getContext("2d"),s=0,o="",a="",h=Object.create(null),u=n.letterSpacing,l=n.whiteSpace,c=t.collapseSpaces(l),d=t.collapseNewlines(l),p=!c,f=n.wordWrapWidth+u,m=t.tokenize(e),y=0;y<m.length;y++){var v=m[y];if(t.isNewline(v)){if(!d){a+=t.addLine(o),p=!c,o="",s=0;continue}v=" "}if(c){var g=t.isBreakingSpace(v),_=t.isBreakingSpace(o[o.length-1]);if(g&&_)continue}var b=t.getFromCache(v,u,h,r);if(b>f)if(""!==o&&(a+=t.addLine(o),o="",s=0),t.canBreakWords(v,n.breakWords))for(var x=t.wordWrapSplit(v),A=0;A<x.length;A++){for(var w=x[A],T=1;x[A+T];){var E=x[A+T],S=w[w.length-1];if(t.canBreakChars(S,E,v,A,n.breakWords))break;w+=E,T++}A+=w.length-1;var I=t.getFromCache(w,u,h,r);I+s>f&&(a+=t.addLine(o),p=!1,o="",s=0),o+=w,s+=I}else{o.length>0&&(a+=t.addLine(o),o="",s=0);var O=y===m.length-1;a+=t.addLine(v,!O),p=!1,o="",s=0}else b+s>f&&(p=!1,a+=t.addLine(o),o="",s=0),(o.length>0||!t.isBreakingSpace(v)||p)&&(o+=v,s+=b)}return a+=t.addLine(o,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),e=n?e+"\n":e},t.getFromCache=function(t,e,n,i){var r=n[t];if("number"!=typeof r){var s=t.length*e;r=i.measureText(t).width+s,n[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;n>=0;n--){var i=e[n];if(!t.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,n){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],i="";if("string"!=typeof e)return n;for(var r=0;r<e.length;r++){var s=e[r],o=e[r+1];t.isBreakingSpace(s,o)||t.isNewline(s)?(""!==i&&(n.push(i),i=""),n.push(s)):i+=s}return""!==i&&n.push(i),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,i,r){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},i=t._canvas,r=t._context;r.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(r.measureText(s).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),h=t.HEIGHT_MULTIPLIER*a;a=a*t.BASELINE_MULTIPLIER|0,i.width=o,i.height=h,r.fillStyle="#f00",r.fillRect(0,0,o,h),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(s,0,a);var u=r.getImageData(0,0,o,h).data,l=u.length,c=4*o,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var m=0;m<c;m+=4)if(255!==u[p+m]){f=!0;break}if(f)break;p+=c}for(n.ascent=a-d,p=l-c,f=!1,d=h;d>a;--d){for(m=0;m<c;m+=4)if(255!==u[p+m]){f=!0;break}if(f)break;p-=c}return n.descent=d-a,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),Xe=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Xe.width=Xe.height=10,ke._canvas=Xe,ke._context=Xe.getContext("2d"),ke._fonts={},ke.METRICS_STRING="|q",ke.BASELINE_SYMBOL="M",ke.BASELINE_MULTIPLIER=1.4,ke.HEIGHT_MULTIPLIER=2,ke._newlines=[10,13],ke._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var je={texture:!0,children:!1,baseTexture:!0},He=function(t){function e(e,n,i){var r=this,s=!1;i||(i=document.createElement("canvas"),s=!0),i.width=3,i.height=3;var o=Ut.q.from(i);return o.orig=new xt.j,o.trim=new xt.j,(r=t.call(this,o)||this)._ownCanvas=s,r.canvas=i,r.context=r.canvas.getContext("2d"),r._resolution=bt.b.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=e,r.style=n,r.localStyleID=-1,r}return function(t,e){function n(){this.constructor=t}De(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,i,r=this.context,s=ke.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,a=s.height,h=s.lines,u=s.lineHeight,l=s.lineWidths,c=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil((Math.max(1,o)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,f=0;f<p;++f){var m=e.dropShadow&&0===f,y=m?Math.ceil(Math.max(1,a)+2*e.padding):0,v=y*this._resolution;if(m){r.fillStyle="black",r.strokeStyle="black";var g=e.dropShadowColor,_=Object(_t.hex2rgb)("number"==typeof g?g:Object(_t.string2hex)(g));r.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+e.dropShadowAlpha+")",r.shadowBlur=e.dropShadowBlur,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+v}else r.fillStyle=this._generateFillStyle(e,h,s),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;for(var b=0;b<h.length;b++)n=e.strokeThickness/2,i=e.strokeThickness/2+b*u+d.ascent,"right"===e.align?n+=c-l[b]:"center"===e.align&&(n+=(c-l[b])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[b],n+e.padding,i+e.padding-y,!0),e.fill&&this.drawLetterSpacing(h[b],n+e.padding,i+e.padding-y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n,i){void 0===i&&(i=!1);var r=this._style.letterSpacing;if(0!==r)for(var s=e,o=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,h=0,u=0;u<o.length;++u){var l=o[u];i?this.context.strokeText(l,s,n):this.context.fillText(l,s,n),s+=a-(h=this.context.measureText(t.substring(u+1)).width)+r,a=h}else i?this.context.strokeText(t,e,n):this.context.fillText(t,e,n)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(_t.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,i=this._style,r=i.trim?0:i.padding,s=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(t.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(t.height/this._resolution),n.trim.x=-r,n.trim.y=-r,n.orig.width=n._frame.width-2*r,n.orig.height=n._frame.height-2*r,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var i,r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=Math.ceil(this.canvas.width/this._resolution)-s-2*o,h=Math.ceil(this.canvas.height/this._resolution)-s-2*o,u=r.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,d=1;d<c;++d)l.push(d/c);if(u.unshift(r[0]),l.unshift(0),u.push(r[r.length-1]),l.push(1),t.fillGradientType===Ce.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,h+o);var p=(n.fontProperties.fontSize+t.strokeThickness)/h;for(d=0;d<e.length;d++)for(var f=n.lineHeight*d,m=0;m<u.length;m++){var y=0;y="number"==typeof l[m]?l[m]:m/u.length;var v=Math.min(1,Math.max(0,f/h+y*p));v=Number(v.toFixed(5)),i.addColorStop(v,u[m])}}else{i=this.context.createLinearGradient(o,h/2,a+o,h/2);var g=u.length+1,_=1;for(d=0;d<u.length;d++){var b=void 0;b="number"==typeof l[d]?l[d]:_/g,i.addColorStop(b,u[d]),_++}}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},je,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Object(_t.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Object(_t.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Le?t:new Le(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(Re);
/*!
 * @pixi/prepare - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
bt.b.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Ye=function(t,e){return(Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Ve=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function We(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof Ut.q){var r=t._textures[i].baseTexture;-1===e.indexOf(r)&&(e.push(r),n=!0)}return n}function ze(t,e){if(t.baseTexture instanceof Ut.a){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function qe(t,e){if(t._texture&&t._texture instanceof Ut.q){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function $e(t,e){return e instanceof He&&(e.updateText(!0),!0)}function Ke(t,e){if(e instanceof Le){var n=e.toFontString();return ke.measureFont(n),!0}return!1}function Ze(t,e){if(t instanceof He){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Je(t,e){return t instanceof Le&&(-1===e.indexOf(t)&&e.push(t),!0)}function Qe(t,e){return e instanceof Ut.a&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function tn(t,e){if(!(e instanceof Ie))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var i=n.batches,r=0;r<i.length;r++){var s=i[r].style.texture;s&&Qe(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function en(t,e){return t instanceof Ie&&(e.push(t),!0)}var nn=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(en),n.registerUploadHook(Qe),n.registerUploadHook(tn),n}return function(t,e){function n(){this.constructor=t}Ye(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(function(){function t(t){var e=this;this.limiter=new Ve(bt.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Ze),this.registerFindHook(Je),this.registerFindHook(We),this.registerFindHook(ze),this.registerFindHook(qe),this.registerUploadHook($e),this.registerUploadHook(Ke)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,Pt.a.system.addOnce(this.tick,this,Pt.c.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)Pt.a.system.addOnce(this.tick,this,Pt.c.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(n=0,i=r.length;n<i;n++)r[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ot)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&Pt.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}()),rn=(function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function t(t,e,n){void 0===n&&(n=null),this._texture=t instanceof Ut.q?t:null,this.baseTexture=t instanceof Ut.a?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Object(_t.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,i=t.BATCH_SIZE;n-e<i&&n<this._frameKeys.length;){var r=this._frameKeys[n],s=this._frames[r],o=s.frame;if(o){var a=null,h=null,u=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,l=new xt.j(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=s.rotated?new xt.j(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new xt.j(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(h=new xt.j(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new Ut.q(this.baseTexture,a,l,h,s.rotated?2:0,s.anchor),Ut.q.addToCache(this.textures[r],r)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var i=t[e][n];this.animations[e].push(this.textures[i])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}()),sn=function(){function t(){}return t.use=function(e,n){var i,r,s=this,o=e.name+"_image";if(e.data&&e.type===Yt.c.TYPE.JSON&&e.data.frames&&!s.resources[o]){var a=null===(r=null===(i=e.data)||void 0===i?void 0:i.meta)||void 0===r?void 0:r.related_multi_packs;if(Array.isArray(a))for(var h=function(t){if("string"!=typeof t)return"continue";var n=t.replace(".json",""),i=_t.url.resolve(e.url.replace(s.baseUrl,""),t);if(s.resources[n]||Object.values(s.resources).some((function(t){return _t.url.format(_t.url.parse(t.url))===i})))return"continue";var r={crossOrigin:e.crossOrigin,loadType:Yt.c.LOAD_TYPE.XHR,xhrType:Yt.c.XHR_RESPONSE_TYPE.JSON,parentResource:e};s.add(n,i,r)},u=0,l=a;u<l.length;u++){h(l[u])}var c={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,s.baseUrl);s.add(o,d,c,(function(t){if(t.error)n(t.error);else{var i=new rn(t.texture,e.data,e.url);i.parse((function(){e.spritesheet=i,e.textures=i.textures,n()}))}}))}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:_t.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),on=function(t,e){return(on=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function an(t,e){function n(){this.constructor=t}on(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var hn=new xt.g,un=(function(t){function e(e,n,i){void 0===n&&(n=100),void 0===i&&(i=100);var r=t.call(this,e)||this;return r.tileTransform=new xt.m,r._width=n,r._height=i,r.uvMatrix=r.texture.uvMatrix||new Ut.r(e),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}an(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,i)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xt.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,hn);var e=this._width,n=this._height,i=-e*this.anchor._x;if(hn.x>=i&&hn.x<i+e){var r=-n*this.anchor._y;if(hn.y>=r&&hn.y<r+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return new e(Ut.q.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(Re),"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),ln=new xt.d,cn=function(t){function e(e){var n=t.call(this,e)||this,i={globals:n.renderer.globalUniforms};return n.shader=Ut.o.from(un,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),n.simpleShader=Ut.o.from(un,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",i),n.quad=new Ut.l,n.state=Ut.p.for2d(),n}return an(e,t),e.prototype.render=function(t){var e=this.renderer,n=this.quad,i=n.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);var r=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(i=n.uvs)[0]=i[6]=-r,i[1]=i[3]=-s,i[2]=i[4]=1-r,i[5]=i[7]=1-s,n.invalidate();var o=t._texture,a=o.baseTexture,h=t.tileTransform.localTransform,u=t.uvMatrix,l=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;l&&(a._glTextures[e.CONTEXT_UID]?l=a.wrapMode!==Wt.q.CLAMP:a.wrapMode===Wt.q.CLAMP&&(a.wrapMode=Wt.q.REPEAT));var c=l?this.simpleShader:this.shader,d=o.width,p=o.height,f=t._width,m=t._height;ln.set(h.a*d/f,h.b*d/m,h.c*p/f,h.d*p/m,h.tx/f,h.ty/m),ln.invert(),l?ln.prepend(u.mapCoord):(c.uniforms.uMapCoord=u.mapCoord.toArray(!0),c.uniforms.uClampFrame=u.uClampFrame,c.uniforms.uClampOffset=u.uClampOffset),c.uniforms.uTransform=ln.toArray(!0),c.uniforms.uColor=Object(_t.premultiplyTintToRgba)(t.tint,t.worldAlpha,c.uniforms.uColor,a.alphaMode),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),c.uniforms.uSampler=o,e.shader.bind(c),e.geometry.bind(n),this.state.blendMode=Object(_t.correctBlendMode)(t.blendMode,a.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(Ut.j),dn=function(t,e){return(dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function pn(t,e){function n(){this.constructor=t}dn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var fn=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),mn=new xt.g,yn=new xt.h,vn=function(t){function e(e,n,i,r){void 0===r&&(r=Wt.e.TRIANGLES);var s=t.call(this)||this;return s.geometry=e,e.refCount++,s.shader=n,s.state=i||Ut.p.for2d(),s.drawMode=r,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s._roundPixels=bt.b.ROUND_PIXELS,s.batchUvs=null,s}return pn(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Wt.e.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,i=n.a,r=n.b,s=n.c,o=n.d,a=n.tx,h=n.ty,u=this.vertexData,l=0;l<u.length/2;l++){var c=e[2*l],d=e[2*l+1];u[2*l]=i*c+s*d+a,u[2*l+1]=r*c+o*d+h}if(this._roundPixels){var p=bt.b.RESOLUTION;for(l=0;l<u.length;++l)u[l]=Math.round((u[l]*p|0)/p)}this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new fn(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,mn);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=yn.points,i=this.geometry.getIndex().data,r=i.length,s=4===this.drawMode?3:1,o=0;o+2<r;o+=s){var a=2*i[o],h=2*i[o+1],u=2*i[o+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[h],n[3]=e[h+1],n[4]=e[u],n[5]=e[u+1],yn.contains(mn.x,mn.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Ot),gn=function(t){function e(e,n){var i=this,r={uSampler:e,alpha:1,uTextureMatrix:xt.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(r,n.uniforms),(i=t.call(this,n.program||Ut.k.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r)||this)._colorDirty=!1,i.uvMatrix=new Ut.r(e),i.batchable=void 0===n.program,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return pn(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(_t.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Ut.o),_n=function(t){function e(e,n,i){var r=t.call(this)||this,s=new Ut.f(e),o=new Ut.f(n,!0),a=new Ut.f(i,!0,!0);return r.addAttribute("aVertexPosition",s,2,!1,Wt.p.FLOAT).addAttribute("aTextureCoord",o,2,!1,Wt.p.FLOAT).addIndex(a),r._updateId=-1,r}return pn(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Ut.i),bn=function(t,e){return(bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var xn=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},An=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var i in e){var r=e[i].match(/^[a-z]+/gm)[0],s=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var a in s){var h=s[a].split("="),u=h[0],l=h[1].replace(/"/gm,""),c=parseFloat(l),d=isNaN(c)?l:c;o[u]=d}n[r].push(o)}var p=new xn;return n.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),n.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),n.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),n.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),n.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},t}(),wn=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new xn,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=0;a<n.length;a++)e.info.push({face:n[a].getAttribute("face"),size:parseInt(n[a].getAttribute("size"),10)});for(a=0;a<i.length;a++)e.common.push({lineHeight:parseInt(i[a].getAttribute("lineHeight"),10)});for(a=0;a<r.length;a++)e.page.push({id:parseInt(r[a].getAttribute("id"),10)||0,file:r[a].getAttribute("file")});for(a=0;a<s.length;a++){var h=s[a];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(a=0;a<o.length;a++)e.kerning.push({first:parseInt(o[a].getAttribute("first"),10),second:parseInt(o[a].getAttribute("second"),10),amount:parseInt(o[a].getAttribute("amount"),10)});return e},t}(),Tn=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return wn.test(e)}return!1},t.parse=function(t){var e=(new self.DOMParser).parseFromString(t,"text/xml");return wn.parse(e)},t}(),En=[An,wn,Tn];function Sn(t){for(var e=0;e<En.length;e++)if(En[e].test(t))return En[e];return null}function In(t,e,n,i,r,s){var o,a=n.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var h=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,l=Math.ceil(t.width/i)-h-2*u,c=Math.ceil(t.height/i)-h-2*u,d=a.slice(),p=n.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),n.fillGradientType===Ce.LINEAR_VERTICAL){o=e.createLinearGradient(l/2,u,l/2,c+u);var y=0,v=(s.fontProperties.fontSize+n.strokeThickness)/c;for(m=0;m<r.length;m++)for(var g=s.lineHeight*m,_=0;_<d.length;_++){var b=g/c+("number"==typeof p[_]?p[_]:_/d.length)*v,x=Math.max(y,b);x=Math.min(x,1),o.addColorStop(x,d[_]),y=x}}else{o=e.createLinearGradient(u,c/2,l+u,c/2);var A=d.length+1,w=1;for(m=0;m<d.length;m++){var T=void 0;T="number"==typeof p[m]?p[m]:w/A,o.addColorStop(T,d[m]),w++}}return o}function On(t,e,n,i,r,s,o){var a=n.text,h=n.fontProperties;e.translate(i,r),e.scale(s,s);var u=o.strokeThickness/2,l=-o.strokeThickness/2;e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=In(t,e,o,s,[a],n),e.strokeStyle=o.stroke,e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=In(t,e,o,s,[a],n),e.strokeStyle=o.stroke;var c=o.dropShadowColor,d=Object(_t.hex2rgb)("number"==typeof c?c:Object(_t.string2hex)(c));o.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+o.dropShadowAlpha+")",e.shadowBlur=o.dropShadowBlur,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),o.stroke&&o.strokeThickness&&e.strokeText(a,u,l+n.lineHeight-h.descent),o.fill&&e.fillText(a,u,l+n.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var Cn=function(){function t(t,e,n){var i=t.info[0],r=t.common[0],s=t.page[0],o=Object(_t.getResolutionOfUrl)(s.file),a={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=r.lineHeight/o,this.chars={},this.pageTextures=a;for(var h=0;h<t.page.length;h++){var u=t.page[h],l=u.id,c=u.file;a[l]=e instanceof Array?e[h]:e[c]}for(h=0;h<t.char.length;h++){var d=t.char[h],p=(l=d.id,d.page),f=t.char[h],m=f.x,y=f.y,v=f.width,g=f.height,_=f.xoffset,b=f.yoffset,x=f.xadvance;m/=o,y/=o,v/=o,g/=o,_/=o,b/=o,x/=o;var A=new xt.j(m+a[p].frame.x/o,y+a[p].frame.y/o,v,g);this.chars[l]={xOffset:_,yOffset:b,xAdvance:x,kerning:{},texture:new Ut.q(a[p].baseTexture,A),page:p}}for(h=0;h<t.kerning.length;h++){var w=t.kerning[h],T=w.first,E=w.second,S=w.amount;T/=o,E/=o,S/=o,this.chars[E]&&(this.chars[E].kerning[T]=S)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n,i){var r;if(e instanceof xn)r=e;else{var s=Sn(e);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(e)}n instanceof Ut.q&&(n=[n]);var o=new t(r,n,i);return t.available[o.font]=o,o},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},t.defaultOptions,i),s=r.chars,o=r.padding,a=r.resolution,h=r.textureWidth,u=r.textureHeight,l=function(t){"string"==typeof t&&(t=[t]);for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(Array.isArray(r)){if(2!==r.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+r.length+".");var s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,h=o;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,r.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(s),c=n instanceof Le?n:new Le(n),d=h,p=new xn;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};for(var f,m,y,v=0,g=0,_=0,b=[],x=0;x<l.length;x++){f||((f=document.createElement("canvas")).width=h,f.height=u,m=f.getContext("2d"),y=new Ut.a(f,{resolution:a}),b.push(new Ut.q(y)),p.page.push({id:b.length-1,file:""}));var A=ke.measureText(l[x],c,!1,f),w=A.width,T=Math.ceil(A.height),E=Math.ceil(("italic"===c.fontStyle?2:1)*w);if(g>=u-T*a){if(0===g)throw new Error("[BitmapFont] textureHeight "+u+"px is too small for "+c.fontSize+"px fonts");--x,f=null,m=null,y=null,g=0,v=0,_=0}else if(_=Math.max(T+A.fontProperties.descent,_),E*a+v>=d)--x,g+=_*a,g=Math.ceil(g),v=0,_=0;else{On(f,m,A,v,g,a,c);var S=A.text.charCodeAt(0);p.char.push({id:S,page:b.length-1,x:v/a,y:g/a,width:E,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(w-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),v+=(E+2*o)*a,v=Math.ceil(v)}}x=0;for(var I=l.length;x<I;x++)for(var O=l[x],C=0;C<I;C++){var P=l[C],M=m.measureText(O).width,R=m.measureText(P).width,D=m.measureText(O+P).width-(M+R);D&&p.kerning.push({first:O.charCodeAt(0),second:P.charCodeAt(0),amount:D})}var B=new t(p,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=B,B},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Pn=[],Mn=[],Rn=(function(t){function e(n,i){void 0===i&&(i={});var r=t.call(this)||this;r._tint=16777215;var s=Object.assign({},e.styleDefaults,i),o=s.align,a=s.tint,h=s.maxWidth,u=s.letterSpacing,l=s.fontName,c=s.fontSize;if(!Cn.available[l])throw new Error('Missing BitmapFont "'+l+'"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=o,r._tint=a,r._fontName=l,r._fontSize=c||Cn.available[l].size,r._text=n,r._maxWidth=h,r._maxLineHeight=0,r._letterSpacing=u,r._anchor=new xt.e((function(){r.dirty=!0}),r,0,0),r._roundPixels=bt.b.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r}(function(t,e){function n(){this.constructor=t}bn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.updateText=function(){for(var t,e=Cn.available[this._fontName],n=this._fontSize/e.size,i=new xt.g,r=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",h=a.length,u=this._maxWidth*e.size/this._fontSize,l=null,c=0,d=0,p=0,f=-1,m=0,y=0,v=0,g=0,_=0;_<h;_++){var b=a.charCodeAt(_),x=a.charAt(_);if(/(?:\s)/.test(x)&&(f=_,m=c,g++),"\r"!==x&&"\n"!==x){var A=e.chars[b];if(A){l&&A.kerning[l]&&(i.x+=A.kerning[l]);var w=Mn.pop()||{texture:Ut.q.EMPTY,line:0,charCode:0,prevSpaces:0,position:new xt.g};w.texture=A.texture,w.line=p,w.charCode=b,w.position.x=i.x+A.xOffset+this._letterSpacing/2,w.position.y=i.y+A.yOffset,w.prevSpaces=g,r.push(w),i.x+=A.xAdvance+this._letterSpacing,c=i.x,v=Math.max(v,A.yOffset+A.texture.height),l=b,-1!==f&&u>0&&i.x>u&&(++y,Object(_t.removeItems)(r,1+f-y,1+_-f),_=f,f=-1,s.push(m),o.push(r.length>0?r[r.length-1].prevSpaces:0),d=Math.max(d,m),p++,i.x=0,i.y+=e.lineHeight,l=null,g=0)}}else s.push(c),o.push(-1),d=Math.max(d,c),++p,++y,i.x=0,i.y+=e.lineHeight,l=null,g=0}var T=a.charAt(a.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(c=m),s.push(c),d=Math.max(d,c),o.push(-1));var E=[];for(_=0;_<=p;_++){var S=0;"right"===this._align?S=d-s[_]:"center"===this._align?S=(d-s[_])/2:"justify"===this._align&&(S=o[_]<0?0:(d-s[_])/o[_]),E.push(S)}var I=r.length,O={},C=[],P=this._activePagesMeshData;for(_=0;_<P.length;_++)Pn.push(P[_]);for(_=0;_<I;_++){var M=(k=r[_].texture).baseTexture.uid;if(!O[M]){if(!(z=Pn.pop())){var R=new _n,D=new gn(Ut.q.EMPTY);z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new vn(R,D),vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;var B=this._textureCache;B[M]=B[M]||new Ut.q(k.baseTexture),z.mesh.texture=B[M],z.mesh.tint=this._tint,C.push(z),O[M]=z}O[M].total++}for(_=0;_<P.length;_++)-1===C.indexOf(P[_])&&this.removeChild(P[_].mesh);for(_=0;_<C.length;_++)C[_].mesh.parent!==this&&this.addChild(C[_].mesh);for(var _ in this._activePagesMeshData=C,O){var N=(z=O[_]).total;if(!((null===(t=z.indices)||void 0===t?void 0:t.length)>6*N)||z.vertices.length<2*vn.BATCHABLE_SIZE)z.vertices=new Float32Array(8*N),z.uvs=new Float32Array(8*N),z.indices=new Uint16Array(6*N);else for(var L=z.total,F=z.vertices,G=4*L*2;G<F.length;G++)F[G]=0;z.mesh.size=6*N}for(_=0;_<I;_++){var U=(x=r[_]).position.x+E[x.line]*("justify"===this._align?x.prevSpaces:1);this._roundPixels&&(U=Math.round(U));var k,X=U*n,j=x.position.y*n,H=O[(k=x.texture).baseTexture.uid],Y=k.frame,V=k._uvs,W=H.index++;H.indices[6*W+0]=0+4*W,H.indices[6*W+1]=1+4*W,H.indices[6*W+2]=2+4*W,H.indices[6*W+3]=0+4*W,H.indices[6*W+4]=2+4*W,H.indices[6*W+5]=3+4*W,H.vertices[8*W+0]=X,H.vertices[8*W+1]=j,H.vertices[8*W+2]=X+Y.width*n,H.vertices[8*W+3]=j,H.vertices[8*W+4]=X+Y.width*n,H.vertices[8*W+5]=j+Y.height*n,H.vertices[8*W+6]=X,H.vertices[8*W+7]=j+Y.height*n,H.uvs[8*W+0]=V.x0,H.uvs[8*W+1]=V.y0,H.uvs[8*W+2]=V.x1,H.uvs[8*W+3]=V.y1,H.uvs[8*W+4]=V.x2,H.uvs[8*W+5]=V.y2,H.uvs[8*W+6]=V.x3,H.uvs[8*W+7]=V.y3}for(var _ in this._textWidth=d*n,this._textHeight=(i.y+e.lineHeight)*n,O){var z=O[_];if(0!==this.anchor.x||0!==this.anchor.y)for(var q=0,$=this._textWidth*this.anchor.x,K=this._textHeight*this.anchor.y,Z=0;Z<z.total;Z++)z.vertices[q++]-=$,z.vertices[q++]-=K,z.vertices[q++]-=$,z.vertices[q++]-=K,z.vertices[q++]-=$,z.vertices[q++]-=K,z.vertices[q++]-=$,z.vertices[q++]-=K;this._maxLineHeight=v*n;var J=z.mesh.geometry.getBuffer("aVertexPosition"),Q=z.mesh.geometry.getBuffer("aTextureCoord"),tt=z.mesh.geometry.getIndex();J.data=z.vertices,Q.data=z.uvs,tt.data=z.indices,J.update(),Q.update(),tt.update()}for(_=0;_<r.length;_++)Mn.push(r[_])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Cn.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var n=this._textureCache;for(var i in n){n[i].destroy(),delete n[i]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(Ot),function(){function t(){}return t.add=function(){Yt.c.setExtensionXhrType("fnt",Yt.c.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,n){var i=Sn(e.data);if(i)for(var r=t.getBaseUrl(this,e),s=i.parse(e.data),o={},a=function(t){o[t.metadata.pageFile]=t.texture,Object.keys(o).length===s.page.length&&(e.bitmapFont=Cn.install(s,o,!0),n())},h=0;h<s.page.length;++h){var u=s.page[h].file,l=r+u,c=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===l){p.metadata.pageFile=u,p.texture?a(p):p.onAfterMiddleware.add(a),c=!0;break}}if(!c){var f={crossOrigin:e.crossOrigin,loadType:Yt.c.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(l,f,a)}}else n()},t.getBaseUrl=function(e,n){var i=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===i&&(i=""),e.baseUrl&&i&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(i+="/")),(i=i.replace(e.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/"),i},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()),Dn=function(t,e){return(Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,Ut.w,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}(function(t,e){function n(){this.constructor=t}Dn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})}(Ut.h);var Bn=function(t,e){return(Bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Nn(t,e){function n(){this.constructor=t}Bn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ln,Fn,Gn,Un,kn,Xn,jn,Hn,Yn,Vn,Wn,zn,qn,$n,Kn,Zn,Jn,Qn={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ti=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ln||(Ln={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Fn||(Fn={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Gn||(Gn={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Un||(Un={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(kn||(kn={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Xn||(Xn={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(jn||(jn={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Hn||(Hn={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Yn||(Yn={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Vn||(Vn={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Wn||(Wn={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(zn||(zn={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(qn||(qn={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}($n||($n={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Kn||(Kn={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Zn||(Zn={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Jn||(Jn={}));var ei=function(t){function e(e,n,i,r,s){void 0===n&&(n=8),void 0===i&&(i=4),void 0===r&&(r=bt.b.FILTER_RESOLUTION),void 0===s&&(s=5);var o=this,a=function(t,e){var n,i=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var a=n.replace("%index%",o.toString());s+=a=a.replace("%sampleIndex%",o-(i-1)+".0"),s+="\n"}return r=(r=r.replace("%blur%",s)).replace("%size%",t.toString())}(s,e),h=function(t){for(var e,n=Qn[t],i=n.length,r=ti,s="",o=0;o<t;o++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());e=o,o>=i&&(e=t-o-1),s+=a=a.replace("%value%",n[e].toString()),s+="\n"}return r=(r=r.replace("%blur%",s)).replace("%size%",t.toString())}(s);return(o=t.call(this,a,h)||this).horizontal=e,o.resolution=r,o._quality=0,o.quality=i,o.blur=n,o}return Nn(e,t),e.prototype.apply=function(t,e,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,i);else{var r=t.getFilterTexture(),s=t.renderer,o=e,a=r;this.state.blend=!1,t.applyFilter(this,o,a,qn.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(o,qn.BLIT),this.uniforms.uSampler=a;var u=a;a=o,o=u,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,n,i),t.returnFilterTexture(r)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Ut.h),ni=(function(t){function e(e,n,i,r){void 0===e&&(e=8),void 0===n&&(n=4),void 0===i&&(i=bt.b.FILTER_RESOLUTION),void 0===r&&(r=5);var s=t.call(this)||this;return s.blurXFilter=new ei(!0,e,n,i,r),s.blurYFilter=new ei(!1,e,n,i,r),s.resolution=i,s.quality=n,s.blur=e,s.repeatEdgePixels=!1,s}Nn(e,t),e.prototype.apply=function(t,e,n,i){var r=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(r&&s){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,qn.CLEAR),this.blurYFilter.apply(t,o,n,i),t.returnFilterTexture(o)}else s?this.blurYFilter.apply(t,e,n,i):this.blurXFilter.apply(t,e,n,i)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})}(Ut.h),function(t,e){return(ni=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)});var ii=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,Ut.v,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}ni(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),i=Math.sin(t),r=1/3,s=(0,Math.sqrt)(r),o=[n+(1-n)*r,r*(1-n)-s*i,r*(1-n)+s*i,0,0,r*(1-n)+s*i,n+r*(1-n),r*(1-n)-s*i,0,0,r*(1-n)-s*i,r*(1-n)+s*i,n+r*(1-n),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,i=-.5*(n-1),r=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,i=-.5*(n-1),r=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,i,r){var s=((n=n||16770432)>>16&255)/255,o=(n>>8&255)/255,a=(255&n)/255,h=((i=i||3375104)>>16&255)/255,u=(i>>8&255)/255,l=(255&i)/255,c=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,u,l,e=e||.15,0,s-h,o-u,a-l,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Ut.h);ii.prototype.grayscale=ii.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var ri=function(t,e){return(ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){function e(e,n){var i=this,r=new xt.d;return e.renderable=!1,(i=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,i.maskMatrix=r,null==n&&(n=20),i.scale=new xt.g(n,n),i}(function(t,e){function n(){this.constructor=t}ri(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.apply=function(t,e,n,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.worldTransform,s=Math.sqrt(r.a*r.a+r.b*r.b),o=Math.sqrt(r.c*r.c+r.d*r.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=r.a/s,this.uniforms.rotation[1]=r.b/s,this.uniforms.rotation[2]=r.c/o,this.uniforms.rotation[3]=r.d/o),t.applyFilter(this,e,n,i)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})}(Ut.h);var si=function(t,e){return(si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}(function(t,e){function n(){this.constructor=t}si(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t)}(Ut.h);var oi=function(t,e){return(oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var i=t.call(this,Ut.v,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=e,i.seed=n,i}(function(t,e){function n(){this.constructor=t}oi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})}(Ut.h);var ai=new xt.d;Et.prototype._cacheAsBitmap=!1,Et.prototype._cacheData=null,Et.prototype._cacheAsBitmapResolution=null;var hi=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Et.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new hi),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Et.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Et.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var i=this.filters[0].padding;n.pad(i)}n.ceil(bt.b.RESOLUTION);var r=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,h=Ut.m.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution}),u="cacheAsBitmap_"+Object(_t.uid)();this._cacheData.textureCacheId=u,Ut.a.addToCache(h.baseTexture,u),Ut.q.addToCache(h,u);var l=this.transform.localTransform.copyTo(ai).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:l,skipUpdateTransform:!1}),t.projection.transform=a,t.renderTexture.bind(r,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new Re(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-n.x/n.width,c.anchor.y=-n.y/n.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}},Et.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Et.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=t.context,r=t._projTransform;e.ceil(bt.b.RESOLUTION);var s=Ut.m.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+Object(_t.uid)();this._cacheData.textureCacheId=o,Ut.a.addToCache(s.baseTexture,o),Ut.q.addToCache(s,o);var a=ai;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=i,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new Re(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=n,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},Et.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Et.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Et.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ut.a.removeFromCache(this._cacheData.textureCacheId),Ut.q.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Et.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Et.prototype.name=null,Ot.prototype.getChildByName=function(t,e){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,i=this.children.length;n<i;n++){if(this.children[n].getChildByName){var r=this.children[n].getChildByName(t,!0);if(r)return r}}return null},
/*!
 * @pixi/mixin-get-global-position - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Et.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new xt.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh-extras - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var ui=function(t,e){return(ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function li(t,e){function n(){this.constructor=t}ui(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ci=function(t){function e(e,n,i,r){void 0===e&&(e=100),void 0===n&&(n=100),void 0===i&&(i=10),void 0===r&&(r=10);var s=t.call(this)||this;return s.segWidth=i,s.segHeight=r,s.width=e,s.height=n,s.build(),s}return li(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],i=[],r=this.segWidth-1,s=this.segHeight-1,o=this.width/r,a=this.height/s,h=0;h<t;h++){var u=h%this.segWidth,l=h/this.segWidth|0;e.push(u*o,l*a),n.push(u/r,l/s)}var c=r*s;for(h=0;h<c;h++){var d=h%r,p=h/r|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,y=(p+1)*this.segWidth+d,v=(p+1)*this.segWidth+d+1;i.push(f,m,y,m,v,y)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(_n),di=function(t){function e(e,n,i){void 0===e&&(e=200),void 0===i&&(i=0);var r=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return r.points=n,r._width=e,r.textureScale=i,r.build(),r}return li(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),i.data=new Uint16Array(6*(t.length-1)));var r=n.data,s=i.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var o=0,a=t[0],h=this._width*this.textureScale,u=t.length,l=0;l<u;l++){var c=4*l;if(this.textureScale>0){var d=a.x-t[l].x,p=a.y-t[l].y,f=Math.sqrt(d*d+p*p);a=t[l],o+=f/h}else o=l/(u-1);r[c]=o,r[c+1]=0,r[c+2]=o,r[c+3]=1}var m=0;for(l=0;l<u-1;l++){c=2*l;s[m++]=c,s[m++]=c+1,s[m++]=c+2,s[m++]=c+2,s[m++]=c+1,s[m++]=c+3}n.update(),i.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],i=0,r=0,s=this.buffers[0].data,o=t.length,a=0;a<o;a++){var h=t[a],u=4*a;r=-((e=a<t.length-1?t[a+1]:h).x-n.x),i=e.y-n.y;var l=Math.sqrt(i*i+r*r),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;i/=l,r/=l,i*=c,r*=c,s[u]=h.x+i,s[u+1]=h.y+r,s[u+2]=h.x-i,s[u+3]=h.y-r,n=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(_n),pi=(function(t){function e(e,n,i){void 0===i&&(i=0);var r=this,s=new di(e.height,n,i),o=new gn(e);return i>0&&(e.baseTexture.wrapMode=Wt.q.REPEAT),(r=t.call(this,s,o)||this).autoUpdate=!0,r}li(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)}}(vn),function(t){function e(e,n,i){var r=this,s=new ci(e.width,e.height,n,i),o=new gn(Ut.q.WHITE);return(r=t.call(this,s,o)||this).texture=e,r}return li(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(vn)),fi=(function(t){function e(e,n,i,r,s){void 0===e&&(e=Ut.q.EMPTY);var o=this,a=new _n(n,i,r);a.getBuffer("aVertexPosition").static=!1;var h=new gn(e);return(o=t.call(this,a,h,null,s)||this).autoUpdate=!0,o}li(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)}}(vn),function(t){function e(e,n,i,r,s){void 0===n&&(n=10),void 0===i&&(i=10),void 0===r&&(r=10),void 0===s&&(s=10);var o=t.call(this,Ut.q.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=n,o._rightWidth=r,o._topHeight=i,o._bottomHeight=s,o.texture=e,o}li(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(e,i)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(pi),n(7),function(t,e){return(fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)});!function(t){function e(e,n){void 0===n&&(n=!0);var i=t.call(this,e[0]instanceof Ut.q?e[0]:e[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=e,i}(function(t,e){function n(){this.constructor=t}fi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Pt.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Pt.a.shared.add(this.update,this,Pt.c.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],i=0;i<t.length;++i)n.push(Ut.q.from(t[i]));return new e(n)},e.fromImages=function(t){for(var n=[],i=0;i<t.length;++i)n.push(Ut.q.from(t[i]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Ut.q)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Pt.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Pt.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(Re);
/*!
 * pixi.js - v6.0.2
 * Compiled Mon, 05 Apr 2021 18:17:46 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ut.n.registerPlugin("accessibility",Ct),Ut.n.registerPlugin("extract",Ht),Ut.n.registerPlugin("interaction",Gt),Ut.n.registerPlugin("particle",Jt),Ut.n.registerPlugin("prepare",nn),Ut.n.registerPlugin("batch",Ut.d),Ut.n.registerPlugin("tilingSprite",cn),Yt.b.registerPlugin(Rn),Yt.b.registerPlugin(Vt.a),Yt.b.registerPlugin(Vt.b),Yt.b.registerPlugin(Vt.c),Yt.b.registerPlugin(sn),kt.registerPlugin(Pt.b),kt.registerPlugin(Yt.a);var mi,yi,vi,gi;class _i{static sign(t){return t>=0?1:-1}static nextId(t="id"){const e=this.IDs.get(t);return void 0===this.IDs.get(t)?(this.IDs.set(t,0),0):(this.IDs.set(t,e+1),e+1)}static combineId(t,e){return t<e?(t<<16)+e:(e<<16)+t}static clamp(t,e,n){return e>t?e:n<t?n:t}static normaliseAngle(t){return(t%this.PI2+this.PI3)%this.PI2-this.PI}static angleDiff(t,e){return this.normaliseAngle(t-e)}static clampAngle(t,e,n){if(Math.abs(n-e)<.001)return n;const i=this.angleDiff(t,e),r=this.angleDiff(t,n);return i>0&&r<0?t:Math.abs(r)>Math.abs(i)?t-i:t-r}}_i.IDs=new Map,_i.PI05=.5*Math.PI,_i.PI=Math.PI,_i.PI2=2*Math.PI,_i.PI3=3*Math.PI;class bi{constructor(t=0,e=0){this.x=t,this.y=e}clone(t){return t?(t.x=this.x,t.y=this.y,t):new bi(this.x,this.y)}set(t,e){return this.x=t,this.y=e,this}rotate(t,e=this){const n=Math.cos(t),i=Math.sin(t),r=this.x,s=this.y;return e.x=r*n-s*i,e.y=r*i+s*n,e}neg(t=this){return t.x=-this.x,t.y=-this.y,t}rotate90(t=this){const e=this.x;return t.x=-this.y,t.y=e,t}rotate270(t=this){const e=this.x;return t.x=this.y,t.y=-e,t}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}lengthSquared(){return Math.pow(this.x,2)+Math.pow(this.y,2)}normalise(t=this){const e=this.length();return t.x=this.x/e,t.y=this.y/e,t}scale(t,e=this){return e.x=this.x*t,e.y=this.y*t,e}divide(t,e=this){return e.x=this.x/t,e.y=this.y/t,e}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}static angle(t,e){return e?Math.atan2(e.y-t.y,e.x-t.x):Math.atan2(t.y,t.x)}static dist(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static distSquared(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}static dot(t,e){return t.x*e.x+t.y*e.y}static cross(t,e){return t.x*e.y-t.y*e.x}static add(t,e,n){return n.x=t.x+e.x,n.y=t.y+e.y,n}static subtract(t,e,n){return n.x=t.x-e.x,n.y=t.y-e.y,n}static mult(t,e,n=t){return n.x=t.x*e.x,n.y=t.y*e.y,n}static isCollinear(t,e){return Math.abs(t.x/t.y-e.x/e.y)<1e-4||0===t.y&&0===e.y}static interpolate(t,e,n,i){return i.x=t.x+n*(e.x-t.x),i.y=t.y+n*(e.y-t.y),i}static lineLineIntersection(t,e,n,i,r){const s=bi.lineLineIntersectionFraction(t,e,n,i);return s<0?void 0:(r.x=t.x+s*(e.x-t.x),r.y=t.y+s*(e.y-t.y),r)}static lineLineIntersectionFraction(t,e,n,i){const r=e.x-t.x,s=e.y-t.y,o=i.x-n.x,a=i.y-n.y,h=t.y-n.y,u=t.x-n.x,l=r*a-o*s;let c=(r*h-s*u)/l;if(c<0||c>1)return-1;let d=(o*h-a*u)/l;return d<0||d>1?-1:d}static zeroT(t,e){const n=bi.subtract(e,t,bi.prTemp[0]);return-_i.clamp(bi.dot(n,bi.add(t,e,bi.prTemp[1]))/n.lengthSquared(),-1,1)}static interpolateT(t,e,n,i=new bi){const r=.5*n;return bi.add(t.scale(.5-r,bi.prTemp[0]),e.scale(.5+r,bi.prTemp[1]),i)}static distSquaredToZero(t,e){return bi.interpolateT(t,e,bi.zeroT(t,e),bi.prTemp[0]).lengthSquared()}static side(t,e,n){return(e.y-t.y)*(t.x+e.x-2*n.x)>(e.x-t.x)*(t.y+e.y-2*n.y)}static zeroSide(t,e){return(e.y-t.y)*(t.x+e.x)>(e.x-t.x)*(t.y+e.y)}}bi.zero=new bi,bi.temp=[new bi,new bi,new bi,new bi,new bi,new bi,new bi],bi.prTemp=[new bi,new bi];class xi{constructor(){this.events=new Map,this.namesByIds=new Map}on(t,e){const n=_i.nextId(),i=_i.nextId();this.namesByIds.set(n,[t,i]);let r=this.events.get(t);return r||(r=new Map,this.events.set(t,r)),r.set(i,e),n}off(t){var e;const n=this.namesByIds.get(t);if(!n)return!1;const i=n[0],r=n[1];return null===(e=this.events.get(i))||void 0===e?void 0:e.delete(r)}trigger(t,e=[]){const n=this.events.get(t);if(n)for(const t of n.values())t(...e)}clear(){this.events.clear(),this.namesByIds.clear()}}class Ai{constructor(t=0,e=0,n=0,i=0){this.minX=t,this.minY=e,this.maxX=n,this.maxY=i}clone(t=new Ai){return t.minX=this.minX,t.minY=this.minY,t.maxX=this.maxX,t.maxY=this.maxY,t}fromVertices(t){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0;for(const e of t)e.x>this.maxX&&(this.maxX=e.x),e.x<this.minX&&(this.minX=e.x),e.y>this.maxY&&(this.maxY=e.y),e.y<this.minY&&(this.minY=e.y);return this}set(t,e){return this.minX=t.x,this.minY=t.y,this.maxX=e.x,this.maxY=e.y,this}setNum(t,e,n,i){return this.minX=t,this.minY=e,this.maxX=n,this.maxY=i,this}translate(t){this.minX+=t.x,this.minY+=t.y,this.maxX+=t.x,this.maxY+=t.y}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}overlaps(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.maxY>=t.minY&&this.minY<=t.maxY}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}Ai.temp=[new Ai];class wi{constructor(t=4294967295,e=1,n=0){this.mask=4294967295,this.category=1,this.group=0,this.mask=t,this.category=e,this.group=n}static canCollide(t,e){return t.group===e.group&&t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)}static nextCategory(t){return t.category=t.category<<1,t.category}static nextGroup(t=!1){return t?this.nonCollidingGroup--:this.group++}}wi.group=1,wi.nonCollidingGroup=-1;class Ti extends Ai{constructor(){super(),this.id=0}updateId(){this.id=(this.minX<<30)+(this.minY<<20)+(this.maxX<<10)+this.maxY}}Ti.temp=[new Ti];!function(t){t[t.CIRCLE=Math.pow(2,0)]="CIRCLE",t[t.CONVEX=Math.pow(2,1)]="CONVEX",t[t.EDGE=Math.pow(2,2)]="EDGE"}(mi||(mi={}));class Ei{constructor(t={},e){var n,i,r,s,o,a,h,u;this.id=_i.nextId(),this.name="shape",this.type=0,this.position=new bi,this.aabb=new Ai,this.area=0,this.density=100,this.mass=0,this.inertia=0,this.areaInertia=0,this.filter=new wi,this.region=new Ti,this.radius=null!==(n=t.radius)&&void 0!==n?n:2*Oi.SLOP,t.filter&&(this.filter.category=null!==(i=t.filter.category)&&void 0!==i?i:this.filter.category,this.filter.mask=null!==(r=t.filter.mask)&&void 0!==r?r:this.filter.mask,this.filter.group=null!==(s=t.filter.group)&&void 0!==s?s:this.filter.group),this.restitution=null!==(o=t.restitution)&&void 0!==o?o:.1,this.friction=null!==(a=t.friction)&&void 0!==a?a:.4,this.surfaceVelocity=null!==(h=t.surfaceVelocity)&&void 0!==h?h:0,this.isSensor=null!==(u=t.isSensor)&&void 0!==u&&u,this.userData=e}setMass(t){this.setDensity(t/this.area)}setDensity(t){var e,n;this.density=t,this.mass=this.density*this.area,this.inertia=this.mass*this.areaInertia,null===(e=this.body)||void 0===e||e.updateMass(),null===(n=this.body)||void 0===n||n.updateInertia()}}!function(t){t[t.dynamic=0]="dynamic",t[t.static=1]="static",t[t.kinematic=2]="kinematic"}(yi||(yi={}));class Si{constructor(t={},e){this.id=_i.nextId(),this.name="body",this.shapes=new Set,this.events=new xi,this.positionImpulse=new bi,this.constraintImpulse=new bi,this.constraintAngleImpulse=0,this.pairsCount=0,this.angularAcceleration=0,this.angle=0,this.anglePrev=0,this.angularVelocity=0,this.torque=0,this.center=new bi,this.position=new bi,this.positionPrev=new bi,this.acceleration=new bi,this.velocity=new bi,this.force=new bi,this.dir=new bi(1,0),this.constraintDir=new bi(1,0),this.constraintAngle=0,this.type=yi.dynamic,this.velocityDamping=0,this.mass=0,this.inverseMass=0,this.inertia=0,this.inverseInertia=0,this.area=0,this.sleepState=vi.AWAKE,this.sleepyTimer=0,this.motion=0,this.speedSquared=0,this.angSpeedSquared=0,this.constraints=new Set,this.set(t),this.userData=e,this.updateArea(),this.updateMass(),this.updateInertia()}set(t){for(const e of Object.entries(t))switch(e[0]){case"position":this.setPosition(e[1]);break;case"angle":this.setAngle(e[1]);break;case"type":this.setType(e[1]);break;case"velocityDamping":this.velocityDamping=e[1];break;case"fixedRotation":this.setFixedRotation(e[1])}}updateVelocity(t){this.speedSquared=this.velocity.lengthSquared(),this.angSpeedSquared=Math.pow(this.angularVelocity,2),this.motion=this.speedSquared+this.angSpeedSquared,this.force.scale(this.inverseMass*t,this.acceleration),this.velocity.scale(1-this.velocityDamping).add(this.acceleration.scale(t)),this.angularAcceleration=this.torque*this.inverseInertia*t,this.angularVelocity=this.angularVelocity*(1-this.velocityDamping)+this.angularAcceleration*t,this.force.set(0,0),this.torque=0}updatePosition(){this.position.clone(this.positionPrev),this.translate(this.velocity),this.anglePrev=this.angle,this.rotate(this.angularVelocity);for(const t of this.shapes)t.updateAABB()}addShape(t,e=new bi,n=0){return t.rotate(this.angle+n),t.translate(this.position),t.translate(e),t.updateAABB(),t.body=this,this.shapes.add(t),this.updateArea(),this.updateMass(),this.updateCenterOfMass(),this.updateInertia(),this.events.trigger("add-shape",[{shape:t,body:this}]),t}removeShape(t){return this.shapes.delete(t),t.body=void 0,this.updateArea(),this.updateMass(),this.updateCenterOfMass(),this.updateInertia(),this.events.trigger("add-shape",[{shape:t,body:this}]),t}updateArea(){this.area=0;for(const t of this.shapes)this.area+=t.area}updateInertia(){if(this.inertia=0,this.type===yi.dynamic)for(const t of this.shapes){t.updateInertia();const e=bi.distSquared(this.center,t.position);this.inertia+=t.inertia+e*t.mass}else this.inertia=0,this.inverseInertia=0;this.inverseInertia=0===this.inertia?0:1/this.inertia}updateMass(){if(this.type===yi.dynamic){this.mass=0;for(const t of this.shapes)this.mass+=t.mass;this.inverseMass=0===this.mass?0:1/this.mass}else this.mass=0,this.inverseMass=0}updateCenterOfMass(){const t=bi.temp[0],e=bi.temp[1];t.set(0,0);let n=0;for(const i of this.shapes)bi.subtract(this.center,i.position,e),t.add(e.scale(i.mass,bi.temp[2])),n+=i.mass;const i=t.divide(n,bi.temp[1]);bi.subtract(this.center,i,this.center);for(const t of this.shapes)if(t.type===mi.CONVEX){const e=t;for(const t of e.vertices)bi.subtract(t,this.center,e.deltaVertices[t.index])}this.updateInertia()}setPosition(t){this.translate(bi.subtract(t,this.position,Si.vecTemp[0]))}translate(t){this.position.add(t),this.center.add(t);for(const e of this.shapes)e.translate(t)}setAngle(t){this.rotate(t-this.angle)}rotate(t){if(0===t)return;this.angle+=t;const e=Math.cos(t),n=Math.sin(t);let i,r,s,o=this.dir.x,a=this.dir.y;this.dir.x=o*e-a*n,this.dir.y=o*n+a*e,this.constraintDir.x=this.dir.x,this.constraintDir.y=this.dir.y,this.constraintAngle=this.angle;for(const t of this.shapes)switch(o=t.position.x-this.center.x,a=t.position.y-this.center.y,t.position.x=o*e-a*n+this.center.x,t.position.y=o*n+a*e+this.center.y,t.type){case mi.CONVEX:i=t.vertices;for(const s of i)r=t.deltaVertices[s.index],o=r.x,a=r.y,r.x=o*e-a*n,r.y=o*n+a*e,s.x=r.x+this.center.x,s.y=r.y+this.center.y;s=t.normals;for(const t of s)o=t.x,a=t.y,t.x=o*e-a*n,t.y=o*n+a*e;break;case mi.EDGE:o=t.position.x-this.center.x,a=t.position.y-this.center.y,t.position.x=o*e-a*n+this.center.x,t.position.y=o*n+a*e+this.center.y,o=t.start.x-this.center.x,a=t.start.y-this.center.y,t.start.x=o*e-a*n+this.center.x,t.start.y=o*n+a*e+this.center.y,o=t.end.x-this.center.x,a=t.end.y-this.center.y,t.end.x=o*e-a*n+this.center.x,t.end.y=o*n+a*e+this.center.y,o=t.normal.x,a=t.normal.y,t.normal.x=o*e-a*n,t.normal.y=o*n+a*e,t.normal.neg(t.ngNormal)}}setType(t){if(this.type===t)return;const e=this.type;this.type=t,this.acceleration.set(0,0),this.velocity.set(0,0),this.force.set(0,0),this.angularAcceleration=0,this.angularVelocity=0,this.torque=0,this.positionImpulse.set(0,0),t===yi.dynamic?(this.setSleeping(vi.AWAKE),this.events.trigger("become-dynamic",[{previousType:e}])):t===yi.static?this.events.trigger("become-static",[{previousType:e}]):t===yi.kinematic&&this.events.trigger("become-kinematic",[{previousType:e}]),this.updateMass(),this.updateInertia()}setSleeping(t){const e=this.sleepState;this.sleepState=t,this.sleepState===vi.SLEEPING?(this.sleepyTimer=Ii.SLEEPY_TIME_LIMIT,this.positionImpulse.set(0,0),this.velocity.set(0,0),this.angularVelocity=0,this.motion=0,this.sleepState!==e&&this.events.trigger("sleep-start")):this.sleepState===vi.AWAKE&&(this.sleepyTimer=0,this.sleepState!==e&&this.events.trigger("sleep-end"))}applyForce(t,e){this.force.add(t),e&&(this.torque+=bi.cross(e,t))}applyImpulse(t,e){const n=t.scale(this.inverseMass,Si.vecTemp[0]);if(this.velocity.add(n),e){const n=bi.cross(e,t)*this.inverseInertia;this.angularVelocity+=n}}setVelocity(t){t.clone(this.velocity)}setFixedRotation(t){t?(this.inertia=0,this.inverseInertia=0):this.updateInertia()}}Si.vecTemp=[new bi],function(t){t[t.AWAKE=0]="AWAKE",t[t.SLEEPY=1]="SLEEPY",t[t.SLEEPING=2]="SLEEPING"}(vi||(vi={})),function(t){t[t.NO_SLEEPING=0]="NO_SLEEPING",t[t.BODY_SLEEPING=1]="BODY_SLEEPING",t[t.ISLAND_SLEEPING=2]="ISLAND_SLEEPING"}(gi||(gi={}));class Ii{constructor(t,e={}){this.engine=t,this.type=void 0!==e.type?e.type:gi.BODY_SLEEPING}setType(t){if(this.type!==t)if(this.type!==gi.NO_SLEEPING){this.type=t;for(const t of this.engine.world.sleepingBodies.values())t.setSleeping(vi.AWAKE)}else this.type=t}update(t){switch(this.type){case gi.NO_SLEEPING:return;case gi.BODY_SLEEPING:for(const e of this.engine.world.activeBodies.values())e.motion<=Ii.MOTION_SLEEP_LIMIT?e.sleepyTimer+=t:e.sleepyTimer>0&&(e.sleepyTimer-=t),e.sleepyTimer>=Ii.SLEEPY_TIME_LIMIT&&e.setSleeping(vi.SLEEPING);for(const t of this.engine.world.sleepingBodies.values())0===t.force.x&&0===t.force.y||t.setSleeping(vi.AWAKE);break;case gi.ISLAND_SLEEPING:}}afterCollisions(){var t,e,n,i,r,s,o,a;switch(this.type){case gi.NO_SLEEPING:return;case gi.BODY_SLEEPING:const h=this.engine.manager.activePairs;for(const t of h){const e=t.shapeA.body,n=t.shapeB.body;if(e.sleepState!==vi.SLEEPING&&n.sleepState!==vi.SLEEPING)continue;const i=e.sleepState===vi.SLEEPING,r=i?e:n;if(r.type!==yi.dynamic)continue;(i?n:e).motion>Ii.COLLISION_MOTION_SLEEP_LIMIT&&r.setSleeping(vi.AWAKE)}const u=this.engine.manager.endedPairs;for(const r of u)(null===(t=r.shapeA.body)||void 0===t?void 0:t.type)===yi.dynamic&&(null===(e=r.shapeA.body)||void 0===e||e.setSleeping(vi.AWAKE)),(null===(n=r.shapeB.body)||void 0===n?void 0:n.type)===yi.dynamic&&(null===(i=r.shapeB.body)||void 0===i||i.setSleeping(vi.AWAKE));const l=this.engine.manager.startedPairs;for(const t of l)(null===(r=t.shapeA.body)||void 0===r?void 0:r.type)===yi.dynamic&&(null===(s=t.shapeA.body)||void 0===s||s.setSleeping(vi.AWAKE)),(null===(o=t.shapeB.body)||void 0===o?void 0:o.type)===yi.dynamic&&(null===(a=t.shapeB.body)||void 0===a||a.setSleeping(vi.AWAKE));break;case gi.ISLAND_SLEEPING:}}}Ii.MOTION_SLEEP_LIMIT=18e-6,Ii.COLLISION_MOTION_SLEEP_LIMIT=4e-5,Ii.SLEEPY_TIME_LIMIT=1;class Oi{constructor(t,e={}){var n,i,r;this.engine=t,this.options={positionIterations:null!==(n=e.positionIterations)&&void 0!==n?n:5,velocityIterations:null!==(i=e.velocityIterations)&&void 0!==i?i:5,constraintIterations:null!==(r=e.constraintIterations)&&void 0!==r?r:3}}update(){for(const t of this.engine.manager.pairsToSolve)t.update();this.preSolve();for(let t=0;t<this.options.positionIterations;++t)this.solvePosition();this.postSolvePosition(),this.preSolveConstraints();for(let t=0;t<this.options.constraintIterations;++t)this.solveConstraints();this.postSolveConstraints(),this.warmStart();for(let t=0;t<this.options.velocityIterations;++t)this.solveVelocity()}preSolve(){for(const t of this.engine.world.bodies.values())t.pairsCount=0;for(const t of this.engine.manager.activePairs)++t.shapeA.body.pairsCount,++t.shapeB.body.pairsCount}solvePosition(){const t=this.engine.manager.pairsToSolve,e=Oi.DEPTH_DAMPING;let n,i;for(const e of t)e.separation=e.normal.x*(e.penetration.x-e.shapeB.body.positionImpulse.x+e.shapeA.body.positionImpulse.x)+e.normal.y*(e.penetration.y-e.shapeB.body.positionImpulse.y+e.shapeA.body.positionImpulse.y);for(const r of t){const t=r.shapeA.body,s=r.shapeB.body;n=(r.separation-Oi.SLOP)*e,t.type===yi.dynamic&&s.type===yi.dynamic||(n*=2),t.type===yi.dynamic&&t.sleepState!==vi.SLEEPING&&(i=r.ratioA*n/t.pairsCount,t.positionImpulse.x-=r.normal.x*i,t.positionImpulse.y-=r.normal.y*i),s.type===yi.dynamic&&s.sleepState!==vi.SLEEPING&&(i=r.ratioB*n/s.pairsCount,s.positionImpulse.x+=r.normal.x*i,s.positionImpulse.y+=r.normal.y*i)}}postSolvePosition(){for(const t of this.engine.world.activeBodies.values())t.translate(t.positionImpulse),bi.dot(t.positionImpulse,t.velocity)>0?t.positionImpulse.set(0,0):t.positionImpulse.scale(Oi.POSITION_IMPULSE_DAMPING)}warmStart(){const t=this.engine.manager.contactsToSolve;let e,n;for(const i of t){const t=i.pair.shapeA.body,r=i.pair.shapeB.body;e=i.pair.normal.x*i.normalImpulse-i.pair.normal.y*i.tangentImpulse,n=i.pair.normal.y*i.normalImpulse+i.pair.normal.x*i.tangentImpulse,t.type===yi.dynamic&&t.sleepState!==vi.SLEEPING&&(t.velocity.x-=e*t.inverseMass,t.velocity.y-=n*t.inverseMass,t.angularVelocity-=(i.offsetA.x*n-i.offsetA.y*e)*t.inverseInertia),r.type===yi.dynamic&&r.sleepState!==vi.SLEEPING&&(r.velocity.x+=e*r.inverseMass,r.velocity.y+=n*r.inverseMass,r.angularVelocity+=(i.offsetB.x*n-i.offsetB.y*e)*r.inverseInertia)}}solveVelocity(){let t,e,n,i,r,s,o,a,h,u,l,c,d,p,f,m,y;for(const v of this.engine.manager.pairsToSolve){const g=v.shapeA.body,_=v.shapeB.body;c=v.normal.x,d=v.normal.y;for(let e=0;e<v.contactsCount;++e){t=v.contacts[e],a=g.velocity.x-t.offsetA.y*g.angularVelocity-(_.velocity.x-t.offsetB.y*_.angularVelocity),h=g.velocity.y+t.offsetA.x*g.angularVelocity-(_.velocity.y+t.offsetB.x*_.angularVelocity),i=c*h-d*a+v.surfaceVelocity,r=i*t.tangentShare;const n=v.friction*t.normalImpulse,s=_i.clamp(t.tangentImpulse+r,-n,n);r=s-t.tangentImpulse,t.tangentImpulse=s,u=-r*d,l=r*c,g.type===yi.dynamic&&g.sleepState!==vi.SLEEPING&&(g.velocity.x-=u*g.inverseMass,g.velocity.y-=l*g.inverseMass,g.angularVelocity-=(t.offsetA.x*l-t.offsetA.y*u)*g.inverseInertia),_.type===yi.dynamic&&_.sleepState!==vi.SLEEPING&&(_.velocity.x+=u*_.inverseMass,_.velocity.y+=l*_.inverseMass,_.angularVelocity+=(t.offsetB.x*l-t.offsetB.y*u)*_.inverseInertia)}p=g.velocity.x,f=g.velocity.y,s=g.angularVelocity,m=_.velocity.x,y=_.velocity.y,o=_.angularVelocity;for(let i=0;i<v.contactsCount;++i){t=v.contacts[i],a=p-t.offsetA.y*s-(m-t.offsetB.y*o),h=f+t.offsetA.x*s-(y+t.offsetB.x*o),e=a*c+h*d,n=e*(1+v.restitution)*t.normalShare;const r=Math.max(t.normalImpulse+n,0);n=r-t.normalImpulse,t.normalImpulse=r,u=c*n,l=d*n,g.type===yi.dynamic&&g.sleepState!==vi.SLEEPING&&(g.velocity.x-=u*g.inverseMass,g.velocity.y-=l*g.inverseMass,g.angularVelocity-=(t.offsetA.x*l-t.offsetA.y*u)*g.inverseInertia),_.type===yi.dynamic&&_.sleepState!==vi.SLEEPING&&(_.velocity.x+=u*_.inverseMass,_.velocity.y+=l*_.inverseMass,_.angularVelocity+=(t.offsetB.x*l-t.offsetB.y*u)*_.inverseInertia)}}}preSolveConstraints(){for(const t of this.engine.world.activeBodies.values())t.constraints.size&&(t.constraintImpulse.x*=Oi.CONSTRAINT_IMPULSE_DAMPING,t.constraintImpulse.y*=Oi.CONSTRAINT_IMPULSE_DAMPING,t.constraintAngleImpulse*=Oi.CONSTRAINT_IMPULSE_DAMPING,t.translate(t.constraintImpulse),t.constraintAngle+=t.constraintAngleImpulse,t.constraintDir.rotate(t.constraintAngleImpulse),t.velocity.x+=t.constraintImpulse.x,t.velocity.y+=t.constraintImpulse.y,t.angularVelocity+=t.constraintAngleImpulse)}solveConstraints(){const t=this.engine.world.allConstraints();for(const e of t)e.solve()}postSolveConstraints(){for(const t of this.engine.world.activeBodies.values())t.constraints.size&&t.setAngle(t.constraintAngle)}}Oi.SLOP=.005,Oi.DEPTH_DAMPING=.7,Oi.POSITION_IMPULSE_DAMPING=.4,Oi.CONSTRAINT_IMPULSE_DAMPING=.4;class Ci{constructor(){this.id=_i.nextId(),this.name="composite",this.bodies=new Map,this.constraints=new Map,this.events=new xi}add(...t){for(const e of t)switch(e.name){case"body":this.addBody(e);break;case"constraint":this.addConstraint(e)}}addBody(...t){for(const e of t)this.events.trigger("add-body",[{body:e}]),this.bodies.set(e.id,e)}removeBody(...t){for(const e of t)this.bodies.has(e.id)&&(this.events.trigger("remove-body",[{body:e}]),this.bodies.delete(e.id))}getBody(t){return this.bodies.get(t)}hasBody(t){return this.bodies.has(t)}allBodies(){return[...this.bodies.values()]}addConstraint(...t){for(const e of t)this.events.trigger("add-constraint",[{constraint:e}]),this.constraints.set(e.id,e)}removeConstraint(...t){for(const e of t)this.constraints.has(e.id)&&(this.events.trigger("remove-constraint",[{constraint:e}]),this.constraints.delete(e.id))}getConstraint(t){return this.constraints.get(t)}hasConstraint(t){return this.constraints.has(t)}allConstraints(){return[...this.constraints.values()]}merge(t){this.add(...t.bodies.values()),this.add(...t.constraints.values())}all(){return[...this.bodies.values(),...this.constraints.values()]}clearBodies(){this.bodies.clear()}clearConstraints(){this.constraints.clear()}clear(){this.clearBodies(),this.clearConstraints()}}class Pi extends bi{constructor(t,e,n){super(t,e),this.index=n}}const Mi=new bi(1,0);class Ri{constructor(){this.pointA=new Pi(0,0,0),this.pointB=new Pi(0,0,0),this.indexA=0,this.indexB=0,this.index=0,this.point=new bi}compute(t,e,n){const i=t.support(n),r=e.support(n.neg(bi.temp[0]));this.pointA=i,this.pointB=r,this.indexA=i.index,this.indexB=r.index,this.index=(65535&this.indexA)<<16|65535&this.indexB,this.point=new bi(this.pointA.x-this.pointB.x,this.pointA.y-this.pointB.y)}clone(t){t.pointA=this.pointA,t.pointB=this.pointB,t.indexA=this.indexA,t.indexB=this.indexB,t.index=this.index,this.point.clone(t.point)}}const Di=[new Ri,new Ri,new Ri],Bi=[];for(let t=0;t<=40;++t)Bi.push(new Ri);const Ni=(t,e,n,i)=>{const r=bi.temp[1];let s=0,o=Di[0],a=Di[1];for(o.compute(t,e,Mi),a.compute(t,e,Mi.neg(r));;){if(bi.zeroSide(o.point,a.point)){const t=o;o=a,a=t}const h=bi.zeroT(o.point,a.point);-1<h&&h<1?bi.subtract(a.point,o.point,r).rotate270():bi.interpolateT(o.point,a.point,h,r).neg();const u=Di[2];if(u.compute(t,e,r),bi.zeroSide(o.point,u.point)&&bi.zeroSide(u.point,a.point))return n?(Li([o,a,u],t,e,i),!0):(i.push(o,a,u),!0);if(bi.dot(u.point,r)<=Math.max(bi.dot(o.point,r),bi.dot(a.point,r))){const t=bi.zeroT(o.point,a.point);return-1===t?i.push(o):1===t?i.push(a):i.push(a,o),!0}if(bi.distSquaredToZero(o.point,u.point)<bi.distSquaredToZero(a.point,u.point)?u.clone(a):u.clone(o),++s,s>30)return console.warn("Too many GJK iterations"),!1}},Li=(t,e,n,i)=>{let r=0;for(;;){++r;let s,o,a=1/0;for(let e=0,n=t.length-1;e<t.length;n=e,++e){const i=bi.distSquaredToZero(t[n].point,t[e].point);i<a&&(a=i,s=n,o=e)}const h=t[s],u=t[o];if(r>40)return console.warn("Too many EPA iterations"),void i.push(h,u);const l=Bi[r];if(l.compute(e,n,bi.subtract(u.point,h.point,bi.temp[1]).rotate90()),h.index===l.index||u.index===l.index)return void i.push(h,u);{const e=[l];for(let n=0;n<t.length;++n){let i=(s+1+n)%t.length;const r=e[e.length-1].point,o=t[i].point,a=t[(i+1)%t.length].point;bi.side(r,a,o)&&e.push(t[i])}t=e}}},Fi=(t,e,n)=>{switch(t.type){case mi.CONVEX:return((t,e,n)=>{const i=t.vertices,r=i[e];let s;return s=bi.dot(n,i[e-1>=0?e-1:i.length-1])>bi.dot(n,i[(e+1)%i.length])?i[(e+i.length-1)%i.length]:i[(e+1)%i.length],[r,s]})(t,e,n);case mi.EDGE:return((t,e)=>e?[t.end,t.start]:[t.start,t.end])(t,e)}throw new Error},Gi=(t,e,n,i)=>{const r=bi.dot(e[0],n)+i,s=bi.dot(e[1],n)+i;let o=0;if(r<=0&&e[0].clone(t[o++]),s<=0&&e[1].clone(t[o++]),r*s<0){const n=r/(r-s);bi.interpolate(e[0],e[1],n,t[o++])}return o},Ui=[new bi,new bi],ki=new bi,Xi=t=>{const e=t.shapeA,n=t.shapeB,i=[];if(!Ni(e,n,!0,i))return!1;const r=t.normal,s=e.radius+n.radius;if(1===i.length){const n=i[0].pointA,o=i[0].pointB;bi.subtract(o,n,r);const a=r.lengthSquared();if(a>s*s||0===a)return!1;const h=Math.sqrt(a);r.divide(h),t.depth=s-h,t.contactsCount=1,bi.add(n,r.scale(e.radius,ki),t.contacts[0].vertex)}else{let o,a,h,u=!1;if(i[0].pointA===i[1].pointA?(n.getNormal(i[1].indexB,r),t.depth=-bi.dot(r,i[0].point)+s,h=e.radius,o=Fi(e,i[0].indexA,r.neg(ki)),a=[i[0].pointB,i[1].pointB]):(e.getNormal(i[1].indexA,r),t.depth=bi.dot(r,i[0].point)+s,h=n.radius,o=Fi(n,i[0].indexB,r.neg(ki)),a=[i[0].pointA,i[1].pointA],u=!0),t.depth<0)return!1;const l=r.rotate270(ki);((t,e,n,i,r,s)=>{const o=bi.dot(r,e[0]),a=-bi.dot(r,e[1]),h=[t.contacts[0].vertex,t.contacts[1].vertex];let u=Gi(Ui,n,r.neg(bi.temp[2]),o);if(u<2)return t.contactsCount=u,void Ui[0].clone(h[0]);if(u=Gi(h,Ui,r,a),t.contactsCount=u,u<2)return;bi.dot(h[1],i)-bi.dot(e[0],i)>s&&--t.contactsCount})(t,a,o,r,l,s);for(let e=0;e<t.contactsCount;++e)t.contacts[e].vertex.subtract(r.scale(h,ki));u||r.neg()}return t.isActive=!0,!0};mi.CIRCLE,mi.CIRCLE,mi.CONVEX,mi.CIRCLE,mi.CONVEX,mi.CONVEX,mi.EDGE,mi.CIRCLE,mi.EDGE,mi.CONVEX,mi.EDGE,mi.EDGE;class ji extends Ei{constructor(t={},e){var n,i;super(t,e),this.type=mi.CIRCLE,this.position=new Pi(0,0,0),this.radius=(null!==(n=t.radius)&&void 0!==n?n:.5)+2*Oi.SLOP,this.updateArea(),t.mass&&this.setMass(t.mass),t.mass&&!t.density||this.setDensity(null!==(i=t.density)&&void 0!==i?i:100),this.inertia=this.updateInertia()}translate(t){this.position.add(t)}rotate(){}updateArea(){return this.area=Math.PI*Math.pow(this.radius,2),this.area}updateInertia(){return this.areaInertia=Math.pow(this.radius,2)/2,this.inertia=this.areaInertia*this.mass,this.inertia}updateAABB(){return this.aabb.setNum(-this.radius,-this.radius,this.radius,this.radius),this.aabb.translate(this.position),this.aabb}raycast(t,e,n,i){const r=this.position,s=this.radius,o=bi.subtract(e,r,bi.temp[0]),a=i.lengthSquared(),h=2*bi.dot(i,o),u=o.lengthSquared()-Math.pow(s,2),l=Math.pow(h,2)-4*a*u;if(l<0)return t;if(0===l)return t;const c=Math.sqrt(l),d=1/(2*a),p=(-h-c)*d,f=(c-h)*d;if(p>=0&&p<=1){const i=t.contacts[t.contactsCount];++t.contactsCount,bi.interpolate(e,n,p,i.point),bi.subtract(i.point,r,i.normal),i.normal.divide(s)}if(f>=0&&f<=1){const i=t.contacts[t.contactsCount];++t.contactsCount,bi.interpolate(e,n,f,i.point),bi.subtract(r,i.point,i.normal),i.normal.divide(s)}}contains(t){return bi.distSquared(this.position,t)<Math.pow(this.radius,2)}getPoint(t){return this.position}getNormal(t,e){return e.set(1,0)}support(t){return this.position}}class Hi{static create(t){const e=[];let n=0;for(const i of t){const t=new Pi(i.x,i.y,n);e.push(t),++n}return e}static normals(t,e=[],n=[]){for(let i=0;i<t.length;++i){const r=(i+1)%t.length,s=new Pi(t[i].x-t[r].x,t[i].y-t[r].y,i);s.rotate90();const o=s.length();s.divide(o),n.push(o),e.push(s)}return{normals:e,lengths:n}}static translate(t,e){for(let n=0;n<t.length;++n)t[n].add(e);return t}static rotate(t,e,n=bi.zero,i=t){const r=Math.cos(e),s=Math.sin(e);for(let e=0;e<t.length;++e){const o=t[e],a=i[e],h=o.x-n.x,u=o.y-n.y;a.x=h*r-u*s+n.x,a.y=h*s+u*r+n.y}return i}static scale(t,e){for(let n=0;n<t.length;++n)t[n].scale(e);return t}static area(t){let e=0,n=t.length-1;for(let i=0;i<t.length;++i)e+=(t[n].x-t[i].x)*(t[n].y+t[i].y),n=i;return e/2}static inertia(t){let e=0,n=0;for(let i=0;i<t.length;++i){const r=(i+1)%t.length,s=Math.abs(bi.cross(t[r],t[i]));e+=s*(bi.dot(t[r],t[r])+bi.dot(t[r],t[i])+bi.dot(t[i],t[i])),n+=s}return e/n/6}static center(t){const e=new bi;for(let n=0;n<t.length;++n){const i=(n+1)%t.length,r=bi.cross(t[n],t[i]),s=bi.add(t[n],t[i],bi.temp[0]).scale(r);e.add(s)}return e.divide(6*Hi.area(t)),e}static contains(t,e){for(let n=0;n<t.length;++n){const i=t[n],r=t[(n+1)%t.length];if((e.x-i.x)*(r.y-i.y)+(e.y-i.y)*(i.x-r.x)>0)return!1}return!0}static isConvex(t){let e=0;if(!(t.length<3)){for(let n=0;n<t.length;++n){const i=(n+1)%t.length,r=(n+2)%t.length,s=t[n],o=t[i],a=t[r],h=bi.cross(bi.subtract(o,s,bi.temp[0]),bi.subtract(a,s,bi.temp[1]));if(h<0?e|=1:h>0&&(e|=2),3===e)return!1}return 0!==e||void 0}}static decomp(t,e=!0,n=0){const i=t.map(t=>[t.x,t.y]);if(Object(V.makeCCW)(i),Hi.isConvex(t)){return[Hi.create(i.map(t=>new bi(t[0],t[1])))]}{const t=[],r=Object(V.quickDecomp)(i,[],[],[],25,100,0);for(const i of r){e&&Object(V.removeCollinearPoints)(i,.01);const r=Hi.create(i.map(t=>new bi(t[0],t[1])));Math.abs(Hi.area(r))>n&&t.push(r)}return t}}static hull(t){const e=[],n=[],i=[...t];i.sort((t,e)=>t.x-e.x||t.y-e.y);for(const t of i){for(;n.length>=2&&bi.side(n[n.length-1],n[n.length-2],t);)n.pop();n.push(t)}for(let t=i.length-1;t>=0;--t){const n=i[t];for(;e.length>=2&&bi.side(e[e.length-1],e[e.length-2],n);)e.pop();e.push(n)}return e.pop(),n.pop(),e.concat(n)}}class Yi extends Ei{constructor(t={},e){var n,i;super(t,e),this.type=mi.CONVEX,this.normals=[],this.lengths=[];const r=null!==(n=t.vertices)&&void 0!==n?n:Yi.DEFAULT_VERTICES;this.vertices=Hi.create(r),this.deltaVertices=Hi.create(r),Hi.normals(this.vertices,this.normals,this.lengths),this.updateArea(),this.updateCenterOfMass(),t.mass&&this.setMass(t.mass),t.mass&&!t.density||this.setDensity(null!==(i=t.density)&&void 0!==i?i:100),this.updateInertia()}project(t){const e=this.vertices;let n=bi.dot(e[0],t),i=0;const r=e.length-1,s=bi.dot(e[r],t);s===n&&(i=r);for(let s=1;s<r;++s){const r=e[s],o=bi.dot(r,t);o>n&&(n=o,i=r.index)}return s>n?r:i}translate(t){this.position.add(t),Hi.translate(this.vertices,t)}rotate(t){Hi.rotate(this.vertices,t,this.position),Hi.rotate(this.normals,t),Hi.rotate(this.deltaVertices,t)}updateArea(){this.area=Hi.area(this.deltaVertices);for(const t of this.lengths)this.area+=t*this.radius;return this.area+=Math.PI*Math.pow(this.radius,2),this.area}updateInertia(){this.areaInertia=Hi.inertia(this.deltaVertices);const t=Math.pow(this.radius,2),e=1/this.area,n=bi.temp[0];for(const i of this.vertices){bi.subtract(i,this.position,n);const r=bi.subtract(this.vertices[(i.index+1)%this.vertices.length],this.position,bi.temp[1]),s=this.lengths[i.index],o=this.normals[i.index],a=bi.interpolate(n,r,.5,bi.temp[2]);a.add(o.scale(.5*this.radius,bi.temp[3]));const h=s*this.radius*e,u=(Math.pow(s,2)+t)/12,l=a.lengthSquared();this.areaInertia+=(u+l)*h}for(const i of this.vertices){bi.subtract(i,this.position,n);const r=this.normals[i.index],s=this.normals[(i.index-1+this.normals.length)%this.normals.length],o=bi.cross(s,r),a=bi.dot(s,r),h=t*Math.atan2(o,a)*.5*e,u=t/2,l=n.lengthSquared();this.areaInertia+=(u+l)*h}return this.inertia=this.areaInertia*this.mass,this.inertia}updateAABB(){return this.aabb.fromVertices(this.vertices),this.aabb.minX-=this.radius,this.aabb.minY-=this.radius,this.aabb.maxX+=this.radius,this.aabb.maxY+=this.radius,this.aabb}updateCenterOfMass(){Hi.center(this.vertices).clone(this.position),this.updateInertia()}raycast(t,e,n,i){const r=this.vertices,s=this.normals;let o=t.contacts[t.contactsCount],a=r[r.length-1];for(const h of r){if(bi.lineLineIntersection(a,h,e,n,o.point)&&(s[a.index].clone(o.normal),bi.dot(i,o.normal)>0&&o.normal.neg(),t.contactsCount+=1,o=t.contacts[t.contactsCount]),t.contactsCount>=2)break;a=h}return t}contains(t){let e=-1/0,n=0;for(const i of this.vertices){const r=this.normals[i.index],s=bi.dot(t,r)-bi.dot(i,r);if(s>this.radius)return!1;s>e&&(e=s,n=i.index)}if(e<0)return!0;const i=this.vertices[n],r=this.vertices[(n+1)%this.vertices.length],s=bi.subtract(t,i,bi.temp[0]),o=bi.subtract(r,i,bi.temp[1]),a=bi.dot(s,o);return a<0?s.lengthSquared()<Math.pow(this.radius,2):!(a>Math.pow(this.lengths[n],2))||bi.subtract(t,r,s).lengthSquared()<Math.pow(this.radius,2)}getPoint(t){return this.vertices[t]}getNormal(t,e){return this.normals[t].clone(e)}support(t){const e=this.project(t);return this.vertices[e]}}Yi.DEFAULT_VERTICES=[new bi(-1,-1),new bi(1,-1),new bi(1,1),new bi(-1,1)];class Vi extends Ei{constructor(t={},e){super(t,e),this.type=mi.EDGE,this.length=1,this.delta=new bi,this.normal=new bi,this.ngNormal=new bi,this.start=new Pi(-.5,0,0),this.end=new Pi(.5,0,1),this.length=1,this.delta=new bi,this.normal=new bi,this.ngNormal=new bi,this.set(t.start||this.start,t.end||this.end),this.updateArea(),t.mass&&this.setMass(t.mass),t.mass&&!t.density||this.setDensity(100),this.updateInertia()}set(t,e){t.clone(this.start),e.clone(this.end),bi.subtract(this.end,this.start,this.delta),this.length=this.delta.length(),this.delta.divide(this.length,this.normal),this.normal.rotate90(),bi.interpolate(this.start,this.end,.5,this.position),this.normal.neg(this.ngNormal)}project(t){return Number(bi.dot(this.start,t)<bi.dot(this.end,t))}translate(t){this.position.add(t),this.start.add(t),this.end.add(t)}rotate(t){const e=bi.temp[0];bi.subtract(this.position,this.start,e),e.rotate(t),bi.subtract(this.position,e,this.start),bi.subtract(this.position,this.end,e),e.rotate(t),bi.subtract(this.position,e,this.end),this.normal.rotate(t),this.normal.neg(this.ngNormal)}updateArea(){return this.area=2*this.length*this.radius+Math.pow(this.radius,2)*Math.PI,this.area}updateInertia(){const t=this.length,e=2*this.radius,n=t*e*(Math.pow(t,2)+Math.pow(e,2))/12,i=Math.PI*Math.pow(this.radius,2),r=1.0049120846903796*Math.pow(this.radius,4),s=Math.pow(.5*this.length+4*this.radius/_i.PI3,2);return this.areaInertia=(n+r+i*s)/this.area,this.inertia=this.areaInertia*this.mass,this.inertia}updateAABB(){return this.start.x<this.end.x?(this.aabb.minX=this.start.x-this.radius,this.aabb.maxX=this.end.x+this.radius):(this.aabb.minX=this.end.x-this.radius,this.aabb.maxX=this.start.x+this.radius),this.start.y<this.end.y?(this.aabb.minY=this.start.y-this.radius,this.aabb.maxY=this.end.y+this.radius):(this.aabb.minY=this.end.y-this.radius,this.aabb.maxY=this.start.y+this.radius),this.aabb}raycast(t,e,n,i){const r=t.contacts[0];bi.lineLineIntersection(this.start,this.end,e,n,r.point)&&(this.normal.clone(r.normal),bi.dot(i,r.normal)>0&&r.normal.neg(),++t.contactsCount)}contains(t){const e=bi.subtract(t,this.start,bi.temp[0]),n=bi.subtract(this.end,this.start,bi.temp[1]);if(Math.abs(bi.dot(e,this.normal))>this.radius)return!1;const i=bi.dot(e,n);return i<0?e.lengthSquared()<Math.pow(this.radius,2):!(i>Math.pow(this.length,2))||bi.subtract(t,this.end,e).lengthSquared()<Math.pow(this.radius,2)}getPoint(t){return t?this.end:this.start}getNormal(t,e){return(t?this.normal:this.ngNormal).clone(e)}support(t){return this.project(t)?this.end:this.start}}class Wi{constructor(){this.from=new bi,this.to=new bi,this.delta=new bi,this.intersections=new Map}reset(){for(const t of this.intersections.values())t.isActive=!1}clear(){this.intersections.clear()}}class zi{constructor(){this.point=new bi,this.normal=new bi}}class qi{constructor(t,e){this.isActive=!1,this.contactsCount=0,this.contacts=[new zi,new zi],this.body=t,this.shape=e,this.id=_i.combineId(t.id,e.id)}reset(){this.contactsCount=0}}class $i{constructor(t={}){var e,n;this.from=new bi,this.to=new bi,this.delta=new bi,this.aabb=new Ai,this.needsUpdate=!0,this.raycastResult=new Wi,this.set(null!==(e=t.from)&&void 0!==e?e:this.from,null!==(n=t.to)&&void 0!==n?n:this.to)}set(t,e){this.setFrom(t),this.setTo(e)}cast(t,e=t.world,n=!0,i=this.raycastResult){i.reset(),this.needsUpdate&&(this.updateAABB(),bi.subtract(this.to,this.from,this.delta)),this.delta.clone(i.delta),this.to.clone(i.to),this.from.clone(i.from);const r=i.intersections;if(n){const n=t.manager.broadphase.gridSize,r=$i.vecTemp[0],s=$i.vecTemp[1];r.x=this.from.x/n,r.y=this.from.y/n,s.x=this.to.x/n,s.y=this.to.y/n;const o=bi.subtract(s,r,$i.vecTemp[2]),a=$i.vecTemp[4],h=$i.vecTemp[5];let u,l,c,d,p,f;o.x>0?(a.x=1,h.x=o.x,u=Math.floor(r.x+1e-4),c=Math.ceil(r.x+1e-4)):(a.x=-1,h.x=-o.x,u=Math.floor(r.x-1e-4),o.y>0&&(r.x-=1),c=Math.floor(r.x-1e-4)),o.y>0?(a.y=1,h.y=o.y,l=Math.floor(r.y+1e-4),f=Math.ceil(r.y+1e-4)):(a.y=-1,h.y=-o.y,l=Math.floor(r.y-1e-4),o.x>0&&(r.y-=1),f=Math.floor(r.y-1e-4)),this.addCell(t,e,$i.vecTemp[3].set(u,l),i);const m=o.x/h.y,y=o.y/h.x;d=r.y+y*Math.abs(r.x-c),o.y<0&&(o.x>0?d+=1:c-=1);const v=y;for(let n=0;n<h.x;++n)this.addCell(t,e,$i.vecTemp[3].set(c+n*a.x,Math.floor(d)),i),d+=v;p=r.x+m*Math.abs(r.y-f),o.x<0&&(o.y<0?f-=1:p+=1);const g=m;for(let n=0;n<h.y;++n)this.addCell(t,e,$i.vecTemp[3].set(Math.floor(p),f+n*a.y),i),p+=g}else for(const t of e.bodies.values())for(const e of t.shapes){const n=_i.combineId(t.id,e.id);let i=r.get(n);i||(i=new qi(t,e),r.set(n,i)),i.isActive=!0}for(const t of r.values())this.collide(t);return this.needsUpdate=!1,i}setFrom(t){t.clone(this.from),this.needsUpdate=!0}setTo(t){t.clone(this.to),this.needsUpdate=!0}updateAABB(){return this.aabb.minX=Math.min(this.from.x,this.to.x),this.aabb.minY=Math.min(this.from.y,this.to.y),this.aabb.maxX=Math.max(this.from.x,this.to.x),this.aabb.maxY=Math.max(this.from.y,this.to.y),this.aabb}collide(t){if(!t.isActive)return;t.isActive=!1;const e=t.shape;this.aabb.overlaps(e.aabb)&&(t.reset(),e.raycast(t,this.from,this.to,this.delta),t.contactsCount>0&&(t.isActive=!0))}addCell(t,e,n,i){const r=i.intersections,s=t.manager.broadphase.grid.get(n);if(s)for(const t of s.values()){const n=t.body;if(!e.hasBody(n.id))continue;const i=_i.combineId(n.id,t.id);let s=r.get(i);s||(s=new qi(n,t),r.set(i,s)),s.isActive=!0}}}var Ki,Zi;$i.vecTemp=[new bi,new bi,new bi,new bi,new bi,new bi],function(t){t[t.DISTANCE_CONSTRAINT=Math.pow(2,0)]="DISTANCE_CONSTRAINT",t[t.Point_CONSTRAINT=Math.pow(2,1)]="Point_CONSTRAINT"}(Ki||(Ki={}));class Ji{constructor(t={},e){var n,i;this.id=_i.nextId(),this.name="constraint",this.type=0,this.setBodyA(t.bodyA),this.setBodyB(t.bodyB),null===(n=this.bodyA)||void 0===n||n.dir.clone(this.bodyA.constraintDir),null===(i=this.bodyB)||void 0===i||i.dir.clone(this.bodyB.constraintDir),this.bodyA&&(this.bodyA.constraintAngle=this.bodyA.angle),this.bodyB&&(this.bodyB.constraintAngle=this.bodyB.angle),this.pointA=t.pointA?t.pointA.clone():new bi,this.pointB=t.pointB?t.pointB.clone():new bi,this.worldPointA=this.bodyA?new bi:this.pointA.clone(),this.worldPointB=this.bodyB?new bi:this.pointB.clone(),this.offsetA=new bi,this.offsetB=new bi,this.userData=e}setBodyA(t){this.bodyA&&(this.bodyA.constraints.delete(this),this.bodyA=void 0),t&&(this.bodyA=t,t.constraints.add(this))}setBodyB(t){this.bodyB&&(this.bodyB.constraints.delete(this),this.bodyB=void 0),t&&(this.bodyB=t,t.constraints.add(this))}getWorldPointA(){return this.bodyA?(this.offsetA.x=this.pointA.x*this.bodyA.constraintDir.x-this.pointA.y*this.bodyA.constraintDir.y,this.offsetA.y=this.pointA.x*this.bodyA.constraintDir.y+this.pointA.y*this.bodyA.constraintDir.x,bi.add(this.bodyA.position,this.offsetA,this.worldPointA)):this.pointA.clone(this.worldPointA),this.worldPointA}getWorldPointB(){return this.bodyB?(this.offsetB.x=this.pointB.x*this.bodyB.constraintDir.x-this.pointB.y*this.bodyB.constraintDir.y,this.offsetB.y=this.pointB.x*this.bodyB.constraintDir.y+this.pointB.y*this.bodyB.constraintDir.x,bi.add(this.bodyB.position,this.offsetB,this.worldPointB)):this.pointB.clone(this.worldPointB),this.worldPointB}}Ji.vecTemp=[new bi,new bi,new bi,new bi,new bi,new bi,new bi];class Qi extends Ji{constructor(t={},e){var n,i,r;super(t,e),this.type=Ki.DISTANCE_CONSTRAINT,this.normal=new bi,this.stiffness=null!==(n=t.stiffness)&&void 0!==n?n:.1,this.damping=null!==(i=t.damping)&&void 0!==i?i:0,this.curLength=bi.dist(this.getWorldPointA(),this.getWorldPointB()),this.length=null!==(r=t.length)&&void 0!==r?r:this.curLength,void 0!==t.minLength&&(this.minLength=t.minLength,this.minLength>this.length&&([this.minLength,this.length]=[this.length,this.minLength]))}solve(){const t=this.getWorldPointA(),e=this.getWorldPointB(),n=bi.subtract(t,e,Ji.vecTemp[0]);this.curLength=n.length();const i=Math.max(this.curLength,.001);if(void 0!==this.minLength&&i>this.minLength&&i<this.length)return;const r=void 0!==this.minLength&&i<this.minLength?i-this.minLength:i-this.length,s=n.divide(i,this.normal),o=Ji.vecTemp[2];if(this.damping){bi.subtract(this.bodyB?this.bodyB.velocity:bi.zero,this.bodyA?this.bodyA.velocity:bi.zero,o).scale(this.damping);const t=bi.dot(o,s);s.scale(t,o)}const a=bi.cross(this.offsetA,s),h=bi.cross(this.offsetB,s),u=.5/((this.bodyA?this.bodyA.inverseMass+this.bodyA.inverseInertia*a*a:0)+(this.bodyB?this.bodyB.inverseMass+this.bodyB.inverseInertia*h*h:0)),l=s.scale(this.stiffness*r*u,Ji.vecTemp[1]);if(this.bodyA&&this.bodyA.type===yi.dynamic){this.bodyA.setSleeping(vi.AWAKE);const t=l.x*this.bodyA.inverseMass,e=l.y*this.bodyA.inverseMass,n=bi.cross(this.offsetA,l)*this.bodyA.inverseInertia;if(this.bodyA.translate(bi.temp[0].set(-t,-e)),n&&this.bodyA.constraintDir.rotate(-n),this.bodyA.constraintAngle-=n,this.bodyA.velocity.x-=t,this.bodyA.velocity.y-=e,this.bodyA.angularVelocity-=n,this.bodyA.constraintImpulse.x-=t,this.bodyA.constraintImpulse.y-=e,this.bodyA.constraintAngleImpulse-=n,this.damping){const t=o.scale(this.bodyA.inverseMass,Ji.vecTemp[3]);this.bodyA.velocity.x+=t.x,this.bodyA.velocity.y+=t.y}}if(this.bodyB&&this.bodyB.type===yi.dynamic){this.bodyB.setSleeping(vi.AWAKE);const t=l.x*this.bodyB.inverseMass,e=l.y*this.bodyB.inverseMass,n=bi.cross(this.offsetB,l)*this.bodyB.inverseInertia;if(this.bodyB.translate(bi.temp[0].set(t,e)),n&&this.bodyB.constraintDir.rotate(n),this.bodyB.constraintAngle+=n,this.bodyB.velocity.x+=t,this.bodyB.velocity.y+=e,this.bodyB.angularVelocity+=n,this.bodyB.constraintImpulse.x+=t,this.bodyB.constraintImpulse.y+=e,this.bodyB.constraintAngleImpulse+=n,this.damping){const t=o.scale(this.bodyB.inverseMass,Ji.vecTemp[3]);this.bodyB.velocity.x-=t.x,this.bodyB.velocity.y-=t.y}}}}class tr{}tr.Shape=class{static circle(t,e={}){return e.radius=t,new ji(e)}static capsule(t,e,n={}){return n.start=new bi(.5*-t,0),n.end=new bi(.5*t,0),n.radius=e,new Vi(n)}static rectangle(t,e,n={}){return n.vertices=[new bi(-t/2,-e/2),new bi(t/2,-e/2),new bi(t/2,e/2),new bi(-t/2,e/2)],new Yi(n)}static polygon(t=4,e=1,n={}){t<3&&console.warn("Sides must be at least 3");const i=_i.PI2/t,r=.5*(i+Math.PI),s=[];for(let n=0;n<t;++n){const t=r+i*n;s.push(new bi(Math.cos(t)*e,Math.sin(t)*e))}return n.vertices=s,new Yi(n)}static fromVertices(t,e={}){const n=[],i=Hi.decomp(t);for(const t of i)e.vertices=t,n.push(new Yi(e));return n}static ellipse(t,e,n=6,i={}){const r=4*n,s=_i.PI2/r,o=.5*(s+Math.PI),a=[];for(let n=0;n<r;++n){const i=o+s*n;a.push(new bi(Math.cos(i)*t,Math.sin(i)*e))}return i.vertices=a,new Yi(i)}},tr.Body=class{static circle(t,e,n={},i={}){n.position=t;const r=new Si(n);return i.radius=e,r.addShape(new ji(i)),r}static capsule(t,e,n,i,r={},s={}){r.position=t,r.angle=e;const o=new Si(r),a=tr.Shape.capsule(n,i,s);return o.addShape(a),o}static rectangle(t,e,n,i,r={},s={}){r.position=t,r.angle=e,s.vertices=[new bi(-n/2,-i/2),new bi(n/2,-i/2),new bi(n/2,i/2),new bi(-n/2,i/2)];const o=new Si(r);return o.addShape(new Yi(s)),o}static polygon(t,e=4,n=1,i={},r={}){i.position=t;const s=new Si(i),o=tr.Shape.polygon(e,n,r);return s.addShape(o),s}static fromVertices(t,e,n={},i={}){n.position=t;const r=new Si(n),s=tr.Shape.fromVertices(e,i);for(const t of s)r.addShape(t);return r}static ellipse(t,e,n,i=6,r={},s={}){r.position=t;const o=new Si(r),a=tr.Shape.ellipse(e,n,i,s);return o.addShape(a),o}},tr.Composite=class{static car(t,e=1,n=new Ci){const i=wi.nextGroup(!0),r=new Si({position:t});r.addShape(new Yi({vertices:[new bi(-1.5*e,-.2*e),new bi(-1.2*e,-.9*e),new bi(0,-.9*e),new bi(1.5*e,0),new bi(1.5*e,.5*e),new bi(-1.5*e,.5*e)],filter:{group:i}}));const s=new Si({position:new bi(t.x+e,t.y+.5*e)});s.addShape(new ji({radius:.4*e,filter:{group:i}}));const o=new Si({position:new bi(t.x-e,t.y+.5*e)});o.addShape(new ji({radius:.4*e,filter:{group:i}}));const a=new Qi({bodyA:r,bodyB:s,pointA:new bi(e,.5*e),stiffness:1}),h=new Qi({bodyA:r,bodyB:o,pointA:new bi(-e,.5*e),stiffness:1});return n.addBody(r,s,o),n.addConstraint(a,h),n}};class er{}er.rect=(t,e,n,i,r,s,o=!0,a=1)=>{r&&Math.abs(r%_i.PI05)>.025?(t.save(),t.translate(e.x,e.y),t.rotate(r),o?(t.fillStyle=s,t.fillRect(.5*-n,.5*-i,n,i)):(t.strokeStyle=s,t.lineWidth=a,t.strokeRect(.5*-n,.5*-i,n,i)),t.restore()):o?(t.fillStyle=s,t.fillRect(e.x-.5*n,e.y-.5*i,n,i)):(t.strokeStyle=s,t.lineWidth=a,t.strokeRect(e.x-.5*n,e.y-.5*i,n,i))},er.circle=(t,e,n,i,r=!0,s=1)=>{t.beginPath(),t.arc(e.x,e.y,n,0,_i.PI2),r?(t.fillStyle=i,t.fill()):(t.lineWidth=s,t.strokeStyle=i,t.stroke()),t.closePath()},er.roundedRect=(t,e,n,i,r,s,o,a=!0,h=1)=>{s||er.rect(t,e,n,i,r,o,a,h),t.save(),t.translate(e.x,e.y),r&&t.rotate(r);const u=.5*n,l=.5*i,c=Math.min(u,l)*(s=Math.min(Math.max(s,0),1));t.beginPath(),t.moveTo(-u,-l+c),t.arcTo(-u,-l,-u+c,-l,c),t.moveTo(u-c,-l),t.arcTo(u,-l,u,-l+c,c),t.moveTo(u,l-c),t.arcTo(u,l,u-c,l,c),t.moveTo(-u+c,l),t.arcTo(-u,l,-u,l-c,c),t.moveTo(-u,-l+c),t.lineTo(-u+c,-l),t.lineTo(u-c,-l),t.lineTo(u,-l+c),t.lineTo(u,l-c),t.lineTo(u-c,l),t.lineTo(-u+c,l),t.lineTo(-u,l-c),t.lineTo(-u,-l+c),t.closePath(),a?(t.fillStyle=o,t.fill()):(t.lineWidth=h,t.strokeStyle=o,t.stroke()),t.restore()},er.polygon=(t,e,n,i=!0,r=1)=>{t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let n=0;n<e.length;++n)t.lineTo(e[n].x,e[n].y);t.lineTo(e[0].x,e[0].y),t.closePath(),i?(t.fillStyle=n,t.fill()):(t.lineWidth=r,t.strokeStyle=n,t.stroke())},er.line=(t,e,n,i,r=1)=>{t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.closePath(),t.lineWidth=r,t.strokeStyle=i,t.stroke()};!function(t){t[t.fixed=0]="fixed",t[t.dynamic=1]="dynamic"}(Zi||(Zi={}));class nr{constructor(t={}){var e,n,i;this.tps=0,this.delta=0,this.deltaAccumulator=0,this.deltas=[],this.deltasSize=40,this.lag=0,this.fps=0,this.renderDelta=.01,this.renderTime=performance.now()/1e3,this.time=performance.now()/1e3,this.worldTime=0,this.events=new xi,this.event={time:0,delta:0,tps:0},this.renderEvent={time:0,delta:0},this.enabled=!1,this.enabledRender=!1,this.tickRequestId=0,this.renderRequestId=0,this.options={type:null!==(e=t.type)&&void 0!==e?e:Zi.fixed,fixedTps:60,fixedDelta:1/60,timescale:null!==(n=t.timescale)&&void 0!==n?n:1,correction:null===(i=t.correction)||void 0===i||i},t.tps&&this.setTps(t.tps)}run(){this.enabled||(this.enabled=!0,this.time=performance.now()/1e3-this.options.fixedDelta,this.tick())}stop(){this.enabled=!1,this.tickRequestId&&window.cancelAnimationFrame(this.tickRequestId)}tick(){this.tickRequestId=window.requestAnimationFrame(()=>{this.tick()});const t=performance.now()/1e3;switch(this.delta=t-this.time,this.tps=1/this.delta,this.time=t,this.options.type){case Zi.fixed:for(this.deltaAccumulator+=this.delta*this.options.timescale,this.deltaAccumulator=Math.min(this.deltaAccumulator,1.5*Math.max(this.options.fixedDelta,.016666666666666666)*Math.max(this.options.timescale,1));this.deltaAccumulator>this.options.fixedDelta;)this.deltaAccumulator-=this.options.fixedDelta,this.worldTime+=this.options.fixedDelta,this.event.time=this.worldTime-this.deltaAccumulator,this.event.delta=this.options.fixedDelta,this.event.tps=Math.min(this.options.fixedTps,this.tps),this.events.trigger("before-update",[this.event]),this.events.trigger("update",[this.event]),this.events.trigger("after-update",[this.event]);break;case Zi.dynamic:if(this.options.correction){const t=this.delta;let e=1/60,n=1/60;for(const t of this.deltas)n+=t,e=Math.min(t,e);n/=this.deltas.length+1,this.delta=_i.clamp(this.delta,.5*n,1.5*n)*nr.DELTA_C+n*nr.AVERAGE_C+e*nr.MIN_C+this.lag*nr.LAG_C,this.delta=Math.min(this.delta,.1),this.lag+=t-this.delta}else this.delta=Math.min(this.delta,.1);let t,e;if(this.options.timescale>1){t=Math.trunc(this.options.timescale);const n=(this.options.timescale-t)/t;e=this.delta*(n+1)}else t=1,e=this.delta*this.options.timescale;for(let n=0;n<t;++n)this.worldTime+=e,this.event.time=this.worldTime,this.event.delta=e,this.event.tps=this.tps,this.events.trigger("before-update",[this.event]),this.events.trigger("update",[this.event]),this.events.trigger("after-update",[this.event]);this.deltas.push(e),this.deltas.length>this.deltasSize&&this.deltas.shift()}}setTps(t){this.options.fixedTps=t,this.options.fixedDelta=1/t}singleStep(t=this.options.fixedDelta){if(this.enabled)return console.warn("Single step can be called only when loop is disabled");this.worldTime+=t,this.event.time=this.worldTime,this.event.delta=t,this.event.tps=1/t,this.events.trigger("before-update",[this.event]),this.events.trigger("update",[this.event]),this.events.trigger("after-update",[this.event])}runRender(){this.enabledRender||(this.enabledRender=!0,this.renderTime=performance.now()/1e3-this.renderDelta,this.render())}stopRender(){this.enabledRender=!1,this.renderRequestId&&window.cancelAnimationFrame(this.renderRequestId)}render(){this.renderRequestId=window.requestAnimationFrame(()=>{this.render()});const t=performance.now()/1e3;this.renderDelta=t-this.renderTime,this.fps=1/this.renderDelta,this.renderTime=t,this.renderEvent.time=this.renderTime,this.renderEvent.delta=this.renderDelta,this.events.trigger("before-render",[this.renderEvent]),this.events.trigger("render",[this.renderEvent]),this.events.trigger("after-render",[this.renderEvent])}}nr.LAG_C=.1,nr.DELTA_C=.4,nr.AVERAGE_C=.3,nr.MIN_C=1-(nr.DELTA_C+nr.AVERAGE_C);class ir{constructor(t){this.events=new xi,this.pressed=!1,this.leftButtonPressed=!1,this.rightButtonPressed=!1,this.wheelButtonPressed=!1,this.localPosition=new bi,this.position=new bi,this.localMovement=new bi,this.movement=new bi,this.scroll=new bi,this.mousedownListener=t=>this.mouseDown(t),this.mouseupListener=t=>this.mouseUp(t),this.mousemoveListener=t=>this.mouseMove(t),this.wheelListener=t=>this.mouseWheel(t),this.touchstartListener=t=>this.touchStart(t),this.touchendListener=t=>this.touchEnd(t),this.touchmoveListener=t=>this.touchMove(t),this.render=t,this.render.canvas.addEventListener("mousedown",this.mousedownListener),this.render.canvas.addEventListener("mouseup",this.mouseupListener),this.render.canvas.addEventListener("mousemove",this.mousemoveListener),this.render.canvas.addEventListener("wheel",this.wheelListener),this.render.canvas.parentElement&&(this.render.canvas.parentElement.addEventListener("touchstart",this.touchstartListener),this.render.canvas.parentElement.addEventListener("touchend",this.touchendListener),this.render.canvas.parentElement.addEventListener("touchmove",this.touchmoveListener))}removeListeners(){this.render.canvas.removeEventListener("mousedown",this.mousedownListener),this.render.canvas.removeEventListener("mouseup",this.mouseupListener),this.render.canvas.removeEventListener("mousemove",this.mousemoveListener),this.render.canvas.removeEventListener("wheel",this.wheelListener)}mouseDown(t){this.pressed=!0,0===t.button?this.leftButtonPressed=!0:1===t.button?this.wheelButtonPressed=!0:2===t.button&&(this.rightButtonPressed=!0),this.localPosition.set(t.offsetX,t.offsetY),this.updatePosition(),this.events.trigger("mouse-down",[{mouse:this,event:t}])}mouseUp(t){t.buttons<=0&&(this.pressed=!1),0===t.button?this.leftButtonPressed=!1:1===t.button?this.wheelButtonPressed=!1:2===t.button&&(this.rightButtonPressed=!1),this.localPosition.set(t.offsetX,t.offsetY),this.updatePosition(),this.events.trigger("mouse-up",[{mouse:this,event:t}])}mouseMove(t){this.localPosition.set(t.offsetX,t.offsetY),this.updatePosition(),this.localMovement.set(t.movementX,t.movementY),this.updateMovement(),this.events.trigger("mouse-move",[{mouse:this,event:t}])}mouseWheel(t){this.events.trigger("wheel",[{mouse:this,event:t}])}touchStart(t){if(this.render.canvas.parentElement&&t.target&&t.target===this.render.canvas){this.pressed=!0,this.leftButtonPressed=!0,t.touches.length>1&&(this.rightButtonPressed=!0);const{x:e,y:n,width:i,height:r}=t.target.getBoundingClientRect(),s=(t.touches[0].clientX-e)/i*t.target.offsetWidth,o=(t.touches[0].clientY-n)/r*t.target.offsetHeight;this.localPosition.set(s,o),this.updatePosition(),this.events.trigger("mouse-down",[{mouse:this,event:t}])}}touchEnd(t){if(this.render.canvas.parentElement&&t.target&&t.target===this.render.canvas){this.pressed=!1,this.leftButtonPressed=!1,this.rightButtonPressed=!1;const{x:e,y:n,width:i,height:r}=t.target.getBoundingClientRect(),s=(t.changedTouches[0].clientX-e)/i*t.target.offsetWidth,o=(t.changedTouches[0].clientY-n)/r*t.target.offsetHeight;this.localPosition.set(s,o),this.updatePosition(),this.events.trigger("mouse-up",[{mouse:this,event:t}])}}touchMove(t){if(this.render.canvas.parentElement&&t.target&&t.target===this.render.canvas){const{x:e,y:n,width:i,height:r}=t.target.getBoundingClientRect(),s=(t.touches[0].clientX-e)/i*t.target.offsetWidth,o=(t.touches[0].clientY-n)/r*t.target.offsetHeight;this.localMovement.x=s-this.localPosition.x,this.localMovement.y=o-this.localPosition.y,this.updateMovement(),this.localPosition.set(s,o),this.updatePosition(),this.events.trigger("mouse-move",[{mouse:this,event:t}])}}updatePosition(){this.position.set((this.localPosition.x-this.render.canvas.width/2)/this.render.realScale-this.render.translate.x,(this.localPosition.y-this.render.canvas.height/2)/this.render.realScale-this.render.translate.y)}updateMovement(){this.movement.set(this.localMovement.x/this.render.realScale,this.localMovement.y/this.render.realScale)}}class rr{constructor(t,e={element:document.body}){var n,i,r,s,o,a,h,u,l,c,d,p,f,m;this.stage=new Ot,this.sprites=new Map,this.textContainer=new Ot,this.statusText=new He("",{fontSize:20,fill:_t.rgb2hex([.6,.6,.6])}),this.statusUpdateTimer=0,this.graphics=new Ie,this.userGraphics=new Ie,this.engine=t;const y=null!==(n=e.width)&&void 0!==n?n:800,v=null!==(i=e.height)&&void 0!==i?i:600;this.canvas=this.createCanvas(y,v),e.element.appendChild(this.canvas),this.renderer=new Ut.n({width:y,height:v,view:this.canvas,antialias:!0,backgroundColor:null!==(r=e.backgroundColor)&&void 0!==r?r:_t.rgb2hex([.2,.2,.2])}),this.textContainer.zIndex=4,this.graphics.zIndex=3,this.userGraphics.zIndex=5,this.stage.addChild(this.textContainer),this.stage.addChild(this.graphics),this.stage.addChild(this.userGraphics),this.statusText.resolution=20,this.textContainer.addChild(this.statusText),this.scale=null!==(s=e.scale)&&void 0!==s?s:30,this.realScale=this.scale,this.setScale(this.scale),this.translate=void 0===e.translate?new bi(0,0):e.translate.clone(),this.options={showSleeping:null===(o=e.showSleeping)||void 0===o||o,showCollisions:null!==(a=e.showCollisions)&&void 0!==a&&a,showConstraints:null!==(h=e.showConstraints)&&void 0!==h&&h,showSensors:null===(u=e.showSensors)||void 0===u||u,showAABBs:null!==(l=e.showAABBs)&&void 0!==l&&l,showPositions:null!==(c=e.showPositions)&&void 0!==c&&c,showStatus:null!==(d=e.showStatus)&&void 0!==d&&d};let g=_t.rgb2hex([.8,.8,.8]);this.colors={shape:e.colors&&null!==(p=e.colors.shape)&&void 0!==p?p:()=>rr.randomColor(),shapeOutline:e.colors&&null!==(f=e.colors.shapeOutline)&&void 0!==f?f:()=>_t.rgb2hex([.8,.8,.8]),constraint:e.colors&&null!==(m=e.colors.constraint)&&void 0!==m?m:()=>g},t.world.events.on("remove-body",t=>{this.removeBody(t.body)}),t.world.events.on("remove-constraint",t=>{this.removeConstraint(t.constraint)}),this.mouse=new ir(this),this.mouse.events.on("mouse-move",t=>{this.mouseMove(t)}),this.mouse.events.on("wheel",t=>{this.mouseWheel(t)})}setShowSleeping(t){if(this.options.showSleeping=t,!t)for(const t of this.engine.world.bodies.values())for(const e of t.shapes){const t=this.sprites.get(e.id);t&&(t.alpha=1)}}setShowConstraints(t){if(this.options.showConstraints=t,!t)for(const t of this.engine.world.constraints.values()){const e=this.sprites.get(t.id);e&&e.clear()}}setShowSensors(t){if(this.options.showSensors=t,t)for(const t of this.engine.world.bodies.values())for(const e of t.shapes){const t=this.sprites.get(e.id);t&&(t.visible=!0)}}setShowStatus(t){this.options.showStatus=t,t||(this.statusText.text="")}update(t){this.statusUpdateTimer+=t,this.graphics.clear(),this.textContainer.pivot.set(.5*this.renderer.width+this.translate.x*this.realScale,.5*this.renderer.height+this.translate.y*this.realScale),this.textContainer.scale.set(1/this.realScale,1/this.realScale),this.stage.scale.set(this.realScale,this.realScale),this.stage.pivot.set(-this.renderer.width/this.realScale*.5-this.translate.x,-this.renderer.height/this.realScale*.5-this.translate.y),this.shapes(),this.options.showConstraints&&this.constraints(),this.options.showCollisions&&this.collisions(),this.options.showAABBs&&this.AABBs(),this.options.showPositions&&this.positions(),this.options.showStatus&&this.status(),this.renderer.render(this.stage)}shapes(){for(const t of this.engine.world.bodies.values())for(const e of t.shapes){let t=this.sprites.get(e.id);if(t||(t=this.createShapeSprite(e),this.stage.addChild(t),this.sprites.set(e.id,t),this.stage.sortChildren()),this.options.showSleeping)switch(e.body.sleepState){case vi.AWAKE:t.alpha=1;break;case vi.SLEEPING:t.alpha=.5}e.isSensor&&(this.options.showSensors?(t.alpha=.3,t.visible=!0):t.visible=!1),t.position.set(e.body.center.x,e.body.center.y),t.rotation=e.body.angle}}constraints(){for(const t of this.engine.world.constraints.values()){let e=this.sprites.get(t.id);e||(e=new Ie,e.zIndex=2,this.stage.addChild(e),this.sprites.set(t.id,e),this.stage.sortChildren());const n=t.getWorldPointA(),i=t.getWorldPointB();switch(e.clear(),e.beginFill(this.colors.constraint(t)),e.drawCircle(n.x,n.y,.1),e.drawCircle(i.x,i.y,.1),e.endFill(),t.type){case Ki.DISTANCE_CONSTRAINT:e.lineStyle(.08,this.colors.constraint(t)),e.moveTo(n.x,n.y),e.lineTo(i.x,i.y)}}}collisions(){this.graphics.beginFill(_t.rgb2hex([1,0,0]));for(const t of this.engine.manager.activePairs)if(!t.isSensor)for(let e=0;e<t.contactsCount;++e){const n=t.contacts[e];this.graphics.drawRect(n.vertex.x-.05,n.vertex.y-.05,.1,.1)}for(const t of this.engine.manager.activePairs)if(!t.isSensor)for(let e=0;e<t.contactsCount;++e){const n=t.contacts[e];this.graphics.lineStyle(.04,_t.rgb2hex([1,1,0])),this.graphics.moveTo(n.vertex.x,n.vertex.y),this.graphics.lineTo(n.vertex.x+.2*n.pair.normal.x,n.vertex.y+.2*n.pair.normal.y)}this.graphics.endFill()}AABBs(){this.graphics.lineStyle(.02,_t.rgb2hex([1,1,1]));for(const t of this.engine.world.bodies.values())for(const e of t.shapes)this.graphics.moveTo(e.aabb.minX,e.aabb.minY),this.graphics.lineTo(e.aabb.maxX,e.aabb.minY),this.graphics.lineTo(e.aabb.maxX,e.aabb.maxY),this.graphics.lineTo(e.aabb.minX,e.aabb.maxY),this.graphics.lineTo(e.aabb.minX,e.aabb.minY)}positions(){this.graphics.beginFill(_t.rgb2hex([.8,.8,.8])),this.graphics.line.visible=!1;for(const t of this.engine.world.bodies.values())this.graphics.drawRect(t.position.x-.05,t.position.y-.05,.1,.1);this.graphics.endFill(),this.graphics.beginFill(_t.rgb2hex([.5,.8,.1]));for(const t of this.engine.world.bodies.values())this.graphics.drawRect(t.center.x-.05,t.center.y-.05,.1,.1);this.graphics.endFill(),this.graphics.beginFill(_t.rgb2hex([.8,.2,.2]));for(const t of this.engine.world.bodies.values())for(const e of t.shapes)this.graphics.drawRect(e.position.x-.04,e.position.y-.04,.08,.08);this.graphics.endFill()}status(){var t,e;if(this.statusUpdateTimer>.1){this.statusUpdateTimer=0;let n="";n+=`tps: ${null===(e=null===(t=this.engine.timestamp)||void 0===t?void 0:t.tps)||void 0===e?void 0:e.toFixed(1)}\n`,n+=`bodies: ${this.engine.world.bodies.size}\n`,n+=`constraints: ${this.engine.world.constraints.size}\n`,n+=`broadphase pairs: ${this.engine.manager.broadphase.activePairs.size}\n`,n+=`midphase pairs: ${this.engine.manager.midphase.activePairs.length}\n`,n+=`narrowphase pairs: ${this.engine.manager.activePairs.length}\n`,this.statusText.text=n}}removeBody(t){for(const e of t.shapes)this.removeShape(e)}removeShape(t){const e=this.sprites.get(t.id);e&&this.stage.removeChild(e),this.sprites.delete(t.id)}removeConstraint(t){const e=this.sprites.get(t.id);e&&this.stage.removeChild(e),this.sprites.delete(t.id)}createShapeSprite(t){switch(t.type){case mi.CIRCLE:return this.createCircleSprite(t);case mi.CONVEX:return this.createConvexSprite(t);case mi.EDGE:return this.createEdgeSprite(t);default:throw new Error}}createCircleSprite(t){const e=new Ie,n=this.colors.shapeOutline(t);n&&e.lineStyle(n?.03:0,n),e.beginFill(this.colors.shape(t));const i=[],r=100*t.radius;for(let e=0;e<r;++e)i.push(Math.sin(e/r*Math.PI*2)*t.radius-t.body.center.x+t.position.x,Math.cos(e/r*Math.PI*2)*t.radius-t.body.center.y+t.position.y);return e.drawPolygon(i),e.endFill(),e.zIndex=1,e}createConvexSprite(t){const e=new Ie,n=this.colors.shapeOutline(t);let i;n&&e.lineStyle(n?.03:0,n);const r=Hi.create(t.vertices);if(Hi.translate(r,t.body.center.neg(bi.temp[0])),Hi.rotate(r,-t.body.angle),t.radius){const e=Hi.create(t.normals);Hi.rotate(e,-t.body.angle),i=this.roundedPath(r,e,t.radius,Math.max(1e3/r.length*t.radius,1))}else i=r;const s=[];for(const t of i)s.push(t.x,t.y);return e.beginFill(this.colors.shape(t)),e.drawPolygon(s),e.endFill(),e.zIndex=1,e}createEdgeSprite(t){const e=new Ie,n=this.colors.shapeOutline(t);n&&e.lineStyle(n?.03:0,n);const i=Hi.create([t.start,t.end]);Hi.translate(i,t.body.center.neg(bi.temp[0])),Hi.rotate(i,-t.body.angle);const r=Hi.create([t.ngNormal,t.normal]);Hi.rotate(r,-t.body.angle);const s=this.roundedPath(i,r,t.radius,100*t.radius),o=[];for(const t of s)o.push(t.x,t.y);return e.beginFill(this.colors.shape(t)),e.drawPolygon(o),e.endFill(),e.zIndex=1,e}roundedPath(t,e,n,i){const r=[];for(const s of t){const t=e[(e.length+s.index-1)%e.length],o=e[s.index],a=bi.dot(t,o),h=bi.cross(t,o),u=t.scale(n,bi.temp[0]);r.push(bi.add(s,u,new bi));const l=Math.abs(Math.atan2(h,a))/i,c=Math.sin(l),d=Math.cos(l);for(let t=0;t<i;++t){const t=u.x;u.x=t*d-u.y*c,u.y=t*c+u.y*d;const e=u.clone().add(s);r.push(e)}}return r}static randomColor(){return _t.rgb2hex([Math.random(),Math.random(),Math.random()])}createCanvas(t,e){const n=document.createElement("canvas");return n.width=t,n.height=e,n.oncontextmenu=()=>!1,n}mouseMove(t){this.mouse.rightButtonPressed&&this.translate.add(t.mouse.movement)}mouseWheel(t){this.setScale(this.scale-t.event.deltaY*this.scale/1e3)}setScale(t){this.scale=t,this.realScale=this.scale*Math.min(this.canvas.width,this.canvas.height)/1500}}class sr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.world.add(nt.Body.capsule(new l(0,10),0,20,.5,{type:r.static})),e.world.add(nt.Body.capsule(new l(10,0),.5*Math.PI,20,.5,{type:r.static})),e.world.add(nt.Body.capsule(new l(-10,0),.5*Math.PI,20,.5,{type:r.static}));const i=l.temp[0];for(let t=0;t<10;++t)for(let n=0;n<10;++n)e.world.add(nt.Body.polygon(i.set(t-4.5,n-2),3+t%3+n%2,.3,{},{radius:.2}));e.world.add(nt.Body.circle(new l(0,9),.5)),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const s=new st;s.events.on("update",t=>{e.update(t)}),s.events.on("render",t=>{n.update(t.delta)}),s.runRender(),this.engine=e,this.runner=s,this.render=n}}sr.options={name:"Pool",fileName:"Pool",info:"",sort:0};class or extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,colors:{shape:t=>t.type===i.EDGE?_t.rgb2hex([.4,.4,.4]):rr.randomColor(),shapeOutline:t=>t.type===i.EDGE?_t.rgb2hex([.4,.4,.4]):_t.rgb2hex([.8,.8,.8])}}),s={group:p.nextGroup(!0)};let a;e.world.add(nt.Body.capsule(new l(-30.5,0),0,20,.5,{type:r.static},{filter:s})),e.world.add(nt.Body.capsule(new l(29.5,0),0,20,.5,{type:r.static},{filter:s}));for(let t=0;t<20;++t){const n=nt.Body.capsule(new l(2*t-19.5,0),0,2,.5,{velocityDamping:.02},{filter:s});e.world.add(n);const i=new et({bodyA:a,bodyB:n,pointA:a?new l(1,0):new l(n.position.x-1,n.position.y),pointB:new l(-1,0),stiffness:1});e.world.add(i),a=n}const h=new et({bodyA:a,pointA:new l(1,0),pointB:new l(a.position.x+1,a.position.y),stiffness:1});e.world.add(h);for(let t=0;t<8;++t)for(let n=0;n<6;++n)e.world.add(nt.Body.rectangle(new l(t-4.5,n-6),0,1,1));new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const u=new st;u.events.on("update",t=>{e.update(t)}),u.events.on("render",t=>{n.update(t.delta)}),u.runRender(),this.engine=e,this.runner=u,this.render=n}}or.options={name:"Bridge",fileName:"Bridge",info:["Left mouse button to move bodies","Right mouse button to move camera","Wheel to zoom"],sort:0};class ar extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,colors:{shape:t=>t.body.type===r.static?_t.rgb2hex([.4,.4,.4]):rr.randomColor(),shapeOutline:t=>t.body.type===r.static?_t.rgb2hex([.4,.4,.4]):_t.rgb2hex([.8,.8,.8])}});e.world.addBody(nt.Body.rectangle(new l(0,5),0,50,1,{type:r.static}));const i=nt.Body.rectangle(new l(-15,-5),0,20,1,{type:r.static},{surfaceVelocity:.05});e.world.add(i);for(let t=0;t<5;++t)e.world.addBody(nt.Body.rectangle(new l(2*t-20,-8),0,1,1));new it(e,n.mouse);const s=new st;let a=0;s.events.on("update",t=>{if(e.update(t),a+=t.delta,a>1){a-=1;const t=Math.round(2*Math.random())/10+.01;e.world.addBody(nt.Body.polygon(new l(-20,-8),Math.ceil(4*Math.random())+3,.6-t,{},{radius:t}))}}),s.events.on("render",t=>{n.update(t.delta)}),s.runRender(),this.engine=e,this.runner=s,this.render=n}}ar.options={name:"Conveyor belt",fileName:"ConveyorBelt",info:"",sort:0};class hr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.world.add(nt.Body.rectangle(new l(0,12),0,50,1,{type:r.static}));for(let t=12;t>=0;--t)for(let n=0;n<=t;++n){const i=new b;i.setPosition(new l(1.05*n-.525*t,1.05*t-2));const r=nt.Shape.rectangle(.9,.9,{restitution:0,friction:10,radius:.05});i.addShape(r),e.world.add(i)}new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const i=new st;i.events.on("update",t=>{e.update(t)}),i.events.on("render",t=>{n.update(t.delta)}),i.runRender(),this.engine=e,this.runner=i,this.render=n}}hr.options={name:"Pyramid",fileName:"Pyramid",info:"",sort:0};class ur extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:25});e.world.add(nt.Body.rectangle(new l(0,17),-.1*-Math.PI,30,1,{type:r.static},{friction:1/0})),e.world.add(nt.Body.rectangle(new l(0,7),-.1*-Math.PI,30,1,{type:r.static},{friction:1/0})),e.world.add(nt.Body.rectangle(new l(0,-3),-.1*-Math.PI,30,1,{type:r.static},{friction:1/0})),e.world.add(nt.Body.rectangle(new l(0,-13),-.1*-Math.PI,30,1,{type:r.static},{friction:1/0})),e.world.add(nt.Body.rectangle(new l(-12,10),0,1,1,{},{friction:0})),e.world.add(nt.Body.rectangle(new l(-12,0),0,1,1,{},{friction:.3})),e.world.add(nt.Body.rectangle(new l(-12,-10),0,1,1,{},{friction:.35})),e.world.add(nt.Body.rectangle(new l(-12,-20),0,1,1,{},{friction:1/0})),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const i=new st;i.events.on("update",t=>{e.update(t)}),i.events.on("render",t=>{n.update(t.delta)}),i.runRender(),this.engine=e,this.runner=i,this.render=n}}ur.options={name:"Friction",fileName:"Friction",info:"",sort:0};class lr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,colors:{shape:()=>_t.rgb2hex([.4,.4,.4]),shapeOutline:()=>_t.rgb2hex([.4,.4,.4])}});e.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}));const i=nt.Body.circle(new l(-20,0),1,{},{density:200});e.world.add(i),i.velocity.set(.8,-.1);const s=nt.Body.circle(new l(20,0),1,{},{density:200});e.world.add(s),s.velocity.set(-.8,-.1);const a={group:p.nextGroup(!0)};let h=nt.Body.capsule(new l(-10,-10),.5*Math.PI,1,.25,{},{filter:a});e.world.add(h),e.world.add(new et({bodyA:h,pointA:new l(-.5,0),pointB:new l(h.position.x,h.position.y-.5),stiffness:1}));for(let t=1;t<=20;++t){const n=nt.Body.capsule(new l(-10,t-10),.5*Math.PI,1,.25,{},{filter:a});e.world.add(n),e.world.add(new et({bodyA:h,bodyB:n,pointA:new l(.5,0),pointB:new l(-.5,0),stiffness:1})),h=n}const u={group:p.nextGroup(!0)};h=nt.Body.circle(new l(0,-10),.5,{},{filter:u}),e.world.add(h),e.world.add(new tt({bodyA:h,pointB:new l(h.position.x,h.position.y),stiffness:1}));for(let t=1;t<=20;++t){const n=nt.Body.circle(new l(0,t-10),.5,{},{filter:u});e.world.add(n),e.world.add(new tt({bodyA:h,bodyB:n,stiffness:1})),h=n}const c={group:p.nextGroup(!0)};h=nt.Body.capsule(new l(10,-10),.5*Math.PI,2,.5,{},{filter:c}),e.world.add(h),e.world.add(new et({bodyA:h,pointA:new l(-1,0),pointB:new l(h.position.x,h.position.y-1),stiffness:1}));for(let t=1;t<=10;++t){const n=nt.Body.capsule(new l(10,2*t-10),.5*Math.PI,2,.5,{},{filter:c});e.world.add(n),e.world.add(new et({bodyA:h,bodyB:n,pointA:new l(1,0),pointB:new l(-1,0),stiffness:.05})),h=n}new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const d=new st;d.events.on("update",t=>{e.update(t)}),d.events.on("render",t=>{n.update(t.delta)}),d.runRender(),this.engine=e,this.runner=d,this.render=n}}lr.options={name:"Chains",fileName:"Chains",info:"",sort:0};class cr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.world.add(nt.Body.rectangle(new l(0,12),0,30,1,{type:r.static}));for(let t=0;t<10;++t)e.world.add(nt.Body.rectangle(new l(-5,10-1.2*t),0,1,1,{},{restitution:.5,radius:.1}));for(let t=0;t<12;++t)e.world.add(nt.Body.circle(new l(5,10-t),.5));new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const i=new st;i.events.on("update",t=>{e.update(t)}),i.events.on("render",t=>{n.update(t.delta)}),i.runRender(),this.engine=e,this.runner=i,this.render=n}}cr.options={name:"Stacking",fileName:"Stacking",info:"",sort:0};class dr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.solver.options.constraintIterations=5;const i={group:p.nextGroup(!0)},r=nt.Body.capsule(new l(0,-5),.5*Math.PI,10,.5,{},{filter:i}),s=nt.Body.capsule(new l(0,5),.5*Math.PI,10,.5,{},{filter:i});e.world.add(r,s),e.world.add(new et({bodyA:r,bodyB:s,pointA:new l(5,0),pointB:new l(-5,0),stiffness:.5})),e.world.add(new et({bodyA:r,pointA:new l(-5,0),pointB:new l(0,r.position.y-5),stiffness:.5})),r.velocity.set(.6,0),r.angularVelocity=-.1,new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{e.update(t)}),a.events.on("render",t=>{n.update(t.delta)}),a.runRender(),this.engine=e,this.runner=a,this.render=n}}dr.options={name:"Double pendulum",fileName:"DoublePendulum",info:"",sort:0};class pr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:35}),i=new b({type:r.kinematic});i.angularVelocity=.01,i.addShape(nt.Shape.rectangle(30,1),new l(0,15)),i.addShape(nt.Shape.rectangle(30,1),new l(0,-15)),i.addShape(nt.Shape.rectangle(1,30),new l(15,0)),i.addShape(nt.Shape.rectangle(1,30),new l(-15,0)),e.world.add(i),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const s=new st;let a=0,h=0;s.events.on("update",t=>{if(e.update(t),a<200&&(h+=t.delta,h>.1)){h-=.1;const t=Math.round(2*Math.random())/10;e.world.addBody(nt.Body.polygon(new l,Math.ceil(4*Math.random())+3,.6-t,{},{radius:t})),++a}}),s.events.on("render",t=>{n.update(t.delta)}),s.runRender(),this.engine=e,this.runner=s,this.render=n}}pr.options={name:"Tumbler",fileName:"Tumbler",info:"",sort:0};class fr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.BODY_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.world.add(nt.Body.rectangle(new l(0,10),0,20,1,{type:r.static})),e.world.add(nt.Body.rectangle(new l(-10,0),0,1,20,{type:r.static})),e.world.add(nt.Body.rectangle(new l(10,0),0,1,20,{type:r.static}));const i=l.temp[0];for(let t=0;t<10;++t)for(let n=0;n<10;++n)e.world.add(nt.Body.polygon(i.set(t-4.5,n-2),3+t%3+n%2,.3,{},{radius:.2}));new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const s=new st;s.events.on("update",t=>{e.update(t)}),s.events.on("render",t=>{n.update(t.delta)}),s.runRender(),this.engine=e,this.runner=s,this.render=n}}fr.options={name:"Sleeping",fileName:"Sleeping",info:"",sort:0};class mr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,colors:{shape:t=>t.type===i.EDGE?_t.rgb2hex([.4,.4,.4]):rr.randomColor(),shapeOutline:t=>t.type===i.EDGE?_t.rgb2hex([.4,.4,.4]):_t.rgb2hex([.8,.8,.8])},scale:30});e.solver.options.constraintIterations=6,e.world.add(nt.Body.rectangle(new l(0,12),0,100,1,{type:r.static}));for(let t=0;t<10;++t)for(let n=0;n<15;++n)e.world.add(nt.Body.rectangle(new l(t-8,n-3),0,.9,.9));const s={group:p.nextGroup(!0)};let a=nt.Body.capsule(new l(-8,-16),0,1,.25,{},{filter:s,density:800});e.world.add(a),e.world.add(new et({bodyA:a,pointA:new l(.5,0),pointB:new l(a.position.x+.5,a.position.y),stiffness:1}));for(let t=1;t<=20;++t){const n=nt.Body.capsule(new l(-t-8,-16),0,1,.25,{},{filter:s,density:800});e.world.add(n),e.world.add(new et({bodyA:a,bodyB:n,pointA:new l(-.5,0),pointB:new l(.5,0),stiffness:1})),a=n}const h=nt.Body.circle(new l(-28.5,-16),1.5,{},{filter:s,density:800});e.world.add(h),e.world.add(new et({bodyA:a,bodyB:h,pointA:new l(-.5,0),stiffness:1})),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const u=new st;u.events.on("update",t=>{e.update(t)}),u.events.on("render",t=>{n.update(t.delta)}),u.runRender(),this.engine=e,this.runner=u,this.render=n}}mr.options={name:"Wrecking ball",fileName:"WreckingBall",info:"",sort:0};class yr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.world.add(nt.Body.rectangle(new l(0,10),0,20,1,{type:r.static})),e.world.add(nt.Body.rectangle(new l(0,-10),0,20,1,{type:r.static})),e.world.add(nt.Body.rectangle(new l(10,0),0,1,20,{type:r.static})),e.world.add(nt.Body.rectangle(new l(-10,0),0,1,20,{type:r.static}));for(let t=-6;t<=6;++t)for(let n=-6;n<=6;++n)e.world.add(nt.Body.polygon(new l(t,n),(t+7)%2+(n+7)%2+Math.abs(t*n)%3+3,.5));new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const i=new st;i.events.on("update",t=>{e.update(t),e.gravity.rotate(t.delta*Math.PI*.2)}),i.events.on("render",t=>{n.update(t.delta),n.userGraphics.clear(),n.userGraphics.lineStyle(.1,_t.rgb2hex([1,0,0])),n.userGraphics.moveTo(0,0).lineTo(.2*e.gravity.x,.2*e.gravity.y).lineTo(.2*e.gravity.x-.04*e.gravity.y,.2*e.gravity.y+.04*e.gravity.x).lineTo(.24*e.gravity.x,.24*e.gravity.y).lineTo(.2*e.gravity.x+.04*e.gravity.y,.2*e.gravity.y-.04*e.gravity.x).lineTo(.2*e.gravity.x,.2*e.gravity.y)}),i.runRender(),this.engine=e,this.runner=i,this.render=n}}yr.options={name:"Gravity",fileName:"Gravity",info:"",sort:0};class vr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.world.add(nt.Body.rectangle(new l(0,10),0,100,1,{type:r.static}));let i=!1,s=!1,a=!1;const h=new l;let u=[];const c=new l;let d=0;window.addEventListener("keydown",t=>{switch(t.key){case"d":if(s||a)return;n.mouse.position.clone(h),i=!i;break;case"f":if(i||a)return;if(s){const t=nt.Body.fromVertices(new l(0,0),u);t.mass&&t.inertia?e.world.add(t):console.warn("avoid self-intersections"),u=[]}else u.push(n.mouse.position.clone());s=!s;break;case"g":if(s||i)return;a?0!==d&&e.world.add(nt.Body.circle(c,d)):(d=0,n.mouse.position.clone(c)),a=!a}}),n.mouse.events.on("mouse-move",()=>{if(i&&l.distSquared(n.mouse.position,h)>.1){const t=new b({type:r.static});t.addShape(new q({start:h,end:n.mouse.position,radius:.2})),e.world.add(t),n.mouse.position.clone(h)}else s&&l.distSquared(n.mouse.position,u[u.length-1])>.1?u.push(n.mouse.position.clone()):a&&(d=l.dist(n.mouse.position,c))}),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const p=new st;p.events.on("update",t=>{e.update(t)}),p.events.on("render",t=>{if(n.update(t.delta),n.userGraphics.clear(),s){n.userGraphics.lineStyle(.04,_t.rgb2hex([1,1,1])),n.userGraphics.moveTo(u[0].x,u[0].y);for(let t=1;t<u.length;++t)n.userGraphics.lineTo(u[t].x,u[t].y);n.userGraphics.lineTo(u[0].x,u[0].y)}else a&&(n.userGraphics.beginFill(_t.rgb2hex([.2,1,.6])),n.userGraphics.drawCircle(c.x,c.y,d),n.userGraphics.endFill())}),p.runRender(),this.engine=e,this.runner=p,this.render=n}}vr.options={name:"Drawing",fileName:"Drawing",info:["Press 'd' to draw terrain","Press 'f' to draw polygon(avoid self-intersections)","Press 'g' to draw circle"],sort:0};class gr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING),e.gravity.set(0,0);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});for(let t=-7;t<=7;++t)for(let n=-5;n<=5;++n)Math.random()<.1?e.world.add(nt.Body.circle(new l(2.5*t,2.5*n),.5)):e.world.add(nt.Body.polygon(new l(2.5*t,2.5*n),Math.round(3*Math.pow(Math.random(),2))+3,.5));const i=2*Math.PI/256,r=Math.cos(i),s=Math.sin(i),a=new J;let h=1/0;const u=new l;n.mouse.events.on("mouse-move",()=>{a.setFrom(n.mouse.position)}),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const c=new st;c.events.on("update",t=>{e.update(t)}),c.events.on("render",t=>{n.update(t.delta),n.userGraphics.clear(),n.userGraphics.lineStyle(.08,_t.rgb2hex([1,0,0]));const i=new l(20,0);for(let t=0;t<256;++t){const t=i.x,o=i.y;i.x=t*r-o*s,i.y=t*s+o*r;const c=l.add(a.from,i,l.temp[0]);c.clone(u),h=Math.pow(20,2),a.setTo(c);const d=a.cast(e,e.world,!1);for(const t of d.intersections.values())if(t.isActive)for(let e=0;e<t.contactsCount;++e){const n=t.contacts[e],i=l.distSquared(a.from,n.point);i<h&&(h=i,n.point.clone(u))}n.userGraphics.moveTo(a.from.x,a.from.y),n.userGraphics.lineTo(u.x,u.y)}}),c.runRender(),this.engine=e,this.runner=c,this.render=n}}gr.options={name:"Raycasting",fileName:"Raycasting",info:"",sort:0};class _r extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=p.nextCategory(e),i=p.nextCategory(e),s=p.nextCategory(e),a=p.nextCategory(e),h={category:n,mask:n|i|s|a},u={category:i,mask:n|s|a},c={category:s,mask:n|i|a},d={category:a,mask:n|i|s},f={category:i,mask:n|i|s|a},m={category:s,mask:n|i|s|a},y={category:a,mask:n|i|s|a},v=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:20,colors:{shape:t=>t.filter.category===i?_t.rgb2hex([1,0,0]):t.filter.category===s?_t.rgb2hex([0,1,0]):t.filter.category===a?_t.rgb2hex([0,0,1]):t.filter.category===n?_t.rgb2hex([.8,.8,.8]):rr.randomColor()}}),g=.15*Math.PI,_=8*Math.cos(g),b=8*Math.sin(g);e.world.addBody(nt.Body.rectangle(new l(-25+_,-18+b),g,8,1,{type:r.static},{filter:u}),nt.Body.rectangle(new l(3*_-25,3*b-18),g,8,1,{type:r.static},{filter:c}),nt.Body.rectangle(new l(5*_-25,5*b-18),g,8,1,{type:r.static},{filter:d}));for(let t=0;t<4;++t)e.world.addBody(nt.Body.rectangle(new l(_*t*2-25,b*t*2-18),g,8,1,{type:r.static},{filter:h}));for(let t=.5;t<4.5;++t)e.world.addBody(nt.Body.rectangle(new l(_*t*2-25,b*t*2-18+20),g,8,1,{type:r.static},{filter:h}));for(let t=0;t<7;++t)e.world.addBody(nt.Body.rectangle(new l(_*(t+.5)-25,b*(t+.5)-18+10),0,1,20,{type:r.static},{filter:h}));e.world.addBody(nt.Body.rectangle(new l(7.5*_-25,7.5*b-18+5),0,1,30,{type:r.static},{filter:h})),new it(e,v.mouse,[new tt({stiffness:.001,damping:.02})]);const x=new st;let A=0;x.events.on("update",t=>{if(e.update(t),A+=t.delta,A>.5){let t;A-=.5;let n=4*Math.random();n<1?t=h:n<2?t=f:n<3?t=m:n<4&&(t=y),e.world.add(nt.Body.rectangle(new l(.25*_-25,-21),0,1,1,{},{filter:t,radius:.1}))}}),x.events.on("render",t=>{v.update(t.delta)}),x.runRender(),this.engine=e,this.runner=x,this.render=v}}_r.options={name:"Collision filtering",fileName:"Filtering",info:"",sort:0};class br extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:20,colors:{shape:t=>t.body.type===r.static?_t.rgb2hex([.4,.4,.4]):t.body.type===r.kinematic?_t.rgb2hex([.4,.4,.8]):t.type===i.EDGE?_t.rgb2hex([.4,.4,.4]):rr.randomColor(),shapeOutline:t=>t.body.type===r.static||t.type===i.EDGE?_t.rgb2hex([.4,.4,.4]):_t.rgb2hex([.8,.8,.8])}});e.solver.options.velocityIterations=10,e.solver.options.constraintIterations=6,e.world.add(nt.Body.rectangle(new l(0,20),0,60,1,{type:r.static}),nt.Body.rectangle(new l(0,-20),0,60,1,{type:r.static}),nt.Body.rectangle(new l(30,0),0,1,40,{type:r.static}),nt.Body.rectangle(new l(-30,0),0,1,40,{type:r.static}),nt.Body.rectangle(new l(-22.5,-5),0,15,1,{type:r.static}),nt.Body.rectangle(new l(22.5,-5),0,15,1,{type:r.static}),nt.Body.rectangle(new l(-15.5,10),0,1,20,{type:r.static}));const s=nt.Body.rectangle(new l(12.5,-5),0,5,1,{type:r.kinematic},{friction:5});e.world.add(s),e.world.add(nt.Body.rectangle(new l(12.5,-7),0,.9,.9,{},{friction:5}),nt.Body.rectangle(new l(13,-6),0,.9,.9,{},{friction:5}),nt.Body.rectangle(new l(12,-6),0,.9,.9,{},{friction:5}));let a=1;const h=new b({type:r.kinematic,position:new l(-22.5,13)});h.addShape(nt.Shape.rectangle(12,.8)),h.addShape(nt.Shape.rectangle(.8,12)),h.angularVelocity=.02,e.world.add(h);for(let t=-28;t<=-17;++t)for(let n=-3;n<8;++n)t%2?e.world.add(nt.Body.rectangle(new l(t,n),0,.9,.9)):e.world.add(nt.Body.circle(new l(t,n),.5));const u=p.nextGroup(!0),c=nt.Body.rectangle(new l(-10,0),0,1.5,1.5,{type:r.kinematic},{filter:{group:u}});e.world.add(c);let d=0;window.addEventListener("keydown",t=>{switch(t.key){case"ArrowLeft":d=-1;break;case"ArrowRight":d=1}}),window.addEventListener("keyup",t=>{"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||(d=0)});let f=nt.Body.capsule(new l(-10,.5),.5*Math.PI,1,.25,{},{filter:{group:u},density:1e3});e.world.add(f),e.world.add(new et({bodyA:f,bodyB:c,pointA:new l(-.5,0),stiffness:1}));for(let t=0;t<15;++t){const n=nt.Body.capsule(new l(-10,t+1.5),.5*Math.PI,1,.25,{},{filter:{group:u},density:1e3});e.world.add(n),e.world.add(new et({bodyA:f,bodyB:n,pointA:new l(.5,0),pointB:new l(-.5,0),stiffness:1})),f=n}const m=nt.Body.circle(new l(-10,16),1.5,{},{filter:{group:u},density:500});e.world.add(m),e.world.add(new et({bodyA:f,bodyB:m,pointA:new l(.5,0),stiffness:1}));for(let t=3;t<10;++t)for(let n=7;n<20;++n)e.world.add(nt.Body.rectangle(new l(t,n),0,.9,.9));new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const y=new st;let v=.5;y.events.on("update",t=>{e.update(t),v+=t.delta,v>1?(s.position.x*a>12.5&&(a=-a,v=0),s.velocity.set(Math.cos(.95*s.position.x/12.5*Math.PI/2)*a*.15,0)):s.velocity.set(0,0),c.velocity.set(.15*d,0)}),y.events.on("render",t=>{n.update(t.delta)}),y.runRender(),this.engine=e,this.runner=y,this.render=n}}br.options={name:"Kinematic bodies",fileName:"Kinematic",info:"Press left/right arrow to move wrecking ball",sort:0};class xr extends lt{constructor(t){super(t);const e=new X;e.gravity.set(0,5),e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40}),i=nt.Body.circle(new l,4,{type:r.static},{isSensor:!0});e.world.add(i),e.world.add(nt.Body.rectangle(new l(0,10),0,50,1,{type:r.static}));for(let t=-8;t<=8;++t)e.world.add(nt.Body.circle(new l(1.1*t,-5),.5));e.events.on("active-collisions",t=>{for(const e of t.pairs){const t=e.isSensor?e.shapeA.isSensor?e.shapeA:e.shapeB:void 0;if(!t)continue;const n=t===e.shapeA?e.shapeB:e.shapeA,i=l.subtract(t.position,n.position,l.temp[0]),r=Math.max(i.length(),.01),s=4.5-r,o=i.divide(r).scale(.005*s);n.body.velocity.add(o)}}),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const s=new st;s.events.on("update",t=>{e.update(t)}),s.events.on("render",t=>{n.update(t.delta)}),s.runRender(),this.engine=e,this.runner=s,this.render=n}}xr.options={name:"Sensor",fileName:"Sensor",info:"",sort:0};class Ar extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,colors:{shape:()=>_t.rgb2hex([.4,.4,.4]),shapeOutline:()=>_t.rgb2hex([.4,.4,.4])}});e.world.add(nt.Body.rectangle(new l(0,15),0,200,2,{type:r.static}));const i=nt.Body.circle(new l(-10,-3),1);i.velocity.set(1.5,0),e.world.add(i),e.world.merge(((t,e,n,i)=>{const r=new w,s={group:p.nextGroup(!0)},o=nt.Body.circle(t,e/4);r.add(o);const a=new l(e,0),h=2*Math.PI/i,u=Math.cos(h),c=Math.sin(h),d=a.clone().add(t),f=new l;let m,y;const v=new l,g=new l;for(let e=0;e<i;++e){const h=a.x,p=a.y;a.x=h*u-p*c,a.y=h*c+p*u,l.add(t,a,f);const _=new b,x=_.addShape(new q({start:d,end:f,radius:.2,filter:s}));r.add(_),l.subtract(x.start,x.position,v),r.add(new tt({bodyA:o,bodyB:_,pointB:v,stiffness:n})),0===e?m=_:y&&r.add(new et({bodyA:_,bodyB:y,pointA:v,pointB:g.neg(),stiffness:.5})),e===i-1&&r.add(new et({bodyA:_,bodyB:m,pointA:l.subtract(x.end,x.position,v),pointB:v.clone().set(v.x,-v.y),stiffness:.5})),v.clone(g),y=_,f.clone(d)}return r})(new l(0,-15),5,.08,30)),e.world.merge(((t,e,n,i,r)=>{const s=new w;let o=[],a=[];const h=2*r;for(let u=0;u<e;++u){for(let c=0;c<n;++c){const d=nt.Body.circle(new l((u-.5*e)*h,(c-.5*n)*h).add(t),r,{},{friction:10});s.add(d),a.push(d),c>0&&s.add(new tt({bodyA:d,bodyB:a[c-1],stiffness:i})),u>0&&s.add(new tt({bodyA:d,bodyB:o[c],stiffness:i})),u>0&&c<n-1&&s.add(new tt({bodyA:d,bodyB:o[c+1],stiffness:i})),u>0&&c>0&&s.add(new tt({bodyA:d,bodyB:o[c-1],stiffness:i}))}o=a,a=[]}return s})(new l(2,0),5,15,.08,.5)),new it(e,n.mouse,[new tt({stiffness:.005,damping:.02})]);const s=new st;s.events.on("update",t=>{e.update(t)}),s.events.on("render",t=>{n.update(t.delta)}),s.runRender(),this.engine=e,this.runner=s,this.render=n}}Ar.options={name:"Soft body",fileName:"Softbody",info:"",sort:0};class wr extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(0,-15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(15,0),0,1,30,{type:r.static}),nt.Body.rectangle(new l(-15,0),0,1,30,{type:r.static}));for(let t=0;t<200;++t)i.world.add(nt.Body.rectangle(new l(20*n()-10,20*n()-10),0,.8,.8,{},{radius:.1}));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}wr.options={name:"200 boxes",fileName:"performance/boxes200",sort:1,info:""};class Tr extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(0,-15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(15,0),0,1,30,{type:r.static}),nt.Body.rectangle(new l(-15,0),0,1,30,{type:r.static}));for(let t=0;t<500;++t){const t=new l(20*n()-10,20*n()-10);i.world.add(nt.Body.rectangle(t,0,.8,.8,{},{radius:.1}))}new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Tr.options={name:"500 boxes",fileName:"performance/boxes500",sort:1,info:""};class Er extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:30,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,20),0,40,1,{type:r.static}),nt.Body.rectangle(new l(0,-20),0,40,1,{type:r.static}),nt.Body.rectangle(new l(20,0),0,1,40,{type:r.static}),nt.Body.rectangle(new l(-20,0),0,1,40,{type:r.static}));for(let t=0;t<1e3;++t)i.world.add(nt.Body.rectangle(new l(30*n()-15,30*n()-15),0,.8,.8,{},{radius:.1}));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Er.options={name:"1000 boxes",fileName:"performance/boxes1000",sort:2,info:""};class Sr extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(0,-15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(15,0),0,1,30,{type:r.static}),nt.Body.rectangle(new l(-15,0),0,1,30,{type:r.static}));for(let t=0;t<200;++t)i.world.add(nt.Body.circle(new l(20*n()-10,20*n()-10),.5));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Sr.options={name:"200 circles",fileName:"performance/circles200",sort:2,info:""};class Ir extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(0,-15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(15,0),0,1,30,{type:r.static}),nt.Body.rectangle(new l(-15,0),0,1,30,{type:r.static}));for(let t=0;t<500;++t)i.world.add(nt.Body.circle(new l(20*n()-10,20*n()-10),.5));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Ir.options={name:"500 circles",fileName:"performance/circles500",sort:2,info:""};class Or extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:30,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,20),0,40,1,{type:r.static}),nt.Body.rectangle(new l(0,-20),0,40,1,{type:r.static}),nt.Body.rectangle(new l(20,0),0,1,40,{type:r.static}),nt.Body.rectangle(new l(-20,0),0,1,40,{type:r.static}));for(let t=0;t<1e3;++t)i.world.add(nt.Body.circle(new l(30*n()-15,30*n()-15),.5));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Or.options={name:"1000 circles",fileName:"performance/circles1000",sort:3,info:""};class Cr extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(0,-15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(15,0),0,1,30,{type:r.static}),nt.Body.rectangle(new l(-15,0),0,1,30,{type:r.static}));for(let t=0;t<200;++t)i.world.add(nt.Body.capsule(new l(25*n()-12.5,25*n()-12.5),n()*Math.PI,.8,.4,{},{radius:.1}));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Cr.options={name:"200 capsules",fileName:"performance/capsules200",sort:4,info:""};class Pr extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(0,-15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(15,0),0,1,30,{type:r.static}),nt.Body.rectangle(new l(-15,0),0,1,30,{type:r.static}));for(let t=0;t<500;++t)i.world.add(nt.Body.capsule(new l(25*n()-12.5,25*n()-12.5),n()*Math.PI,.8,.4,{},{radius:.1}));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Pr.options={name:"500 capsules",fileName:"performance/capsules500",sort:4,info:""};class Mr extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:30,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,20),0,40,1,{type:r.static}),nt.Body.rectangle(new l(0,-20),0,40,1,{type:r.static}),nt.Body.rectangle(new l(20,0),0,1,40,{type:r.static}),nt.Body.rectangle(new l(-20,0),0,1,40,{type:r.static}));for(let t=0;t<1e3;++t)i.world.add(nt.Body.capsule(new l(30*n()-15,30*n()-15),n()*Math.PI,.8,.4,{},{radius:.1}));new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Mr.options={name:"1000 capsules",fileName:"performance/capsules1000",sort:5,info:""};class Rr extends lt{constructor(t){super(t);let e=16484;const n=()=>(e=(8677*e+89041)%19763,e/19762),i=new X;i.sleeping.setType(o.NO_SLEEPING);const s=new rr(i,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showStatus:!0});i.world.add(nt.Body.rectangle(new l(0,15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(0,-15),0,30,1,{type:r.static}),nt.Body.rectangle(new l(15,0),0,1,30,{type:r.static}),nt.Body.rectangle(new l(-15,0),0,1,30,{type:r.static}));for(let t=0;t<500;++t){const t=Math.floor(8*n());t<=1?i.world.add(nt.Body.circle(new l(25*n()-12.5,25*n()-12.5),.5)):2===t?i.world.add(nt.Body.capsule(new l(25*n()-12.5,25*n()-12.5),0,1,.2*n()+.25)):i.world.add(nt.Body.polygon(new l(25*n()-12.5,25*n()-12.5),t,.5,{},{radius:.1}))}new it(i,s.mouse,[new tt({stiffness:.001,damping:.02})]);const a=new st;a.events.on("update",t=>{i.update(t)}),a.events.on("render",t=>{s.update(t.delta)}),a.runRender(),this.engine=i,this.runner=a,this.render=s}}Rr.options={name:"mixed",fileName:"performance/Mixed",sort:6,info:""};class Dr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=_t.rgb2hex([.6,.6,.6]),s=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showConstraints:!0,colors:{shape:t=>t.type===i.CIRCLE?n:rr.randomColor(),shapeOutline:t=>t.type===i.CIRCLE?n:_t.rgb2hex([.8,.8,.8]),constraint:()=>n}});e.world.add(nt.Body.rectangle(new l(0,12),0,30,1,{type:r.static}));const a={group:p.nextGroup(!0)};let h=[],u=[];for(let t=0;t<20;++t){for(let n=0;n<20;++n){const i=nt.Body.circle(new l(.5*(t-10),.5*(n-10)),.15,{type:0===n?r.static:r.dynamic},{filter:a});e.world.add(i),u.push(i),n>0&&e.world.add(new tt({bodyA:i,bodyB:u[n-1],stiffness:.25})),t>0&&e.world.add(new tt({bodyA:i,bodyB:h[n],stiffness:.25}))}h=u,u=[]}const c=nt.Body.circle(new l(-10,0),.8);e.world.add(c),c.velocity.set(.8,0),new it(e,s.mouse,[new tt({stiffness:.05,damping:.02})]);const d=new st;d.events.on("update",t=>{e.update(t)}),d.events.on("render",t=>{s.update(t.delta)}),d.runRender(),this.engine=e,this.runner=d,this.render=s}}Dr.options={name:"Cloth",fileName:"Cloth",info:"",sort:0};class Br extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:50});e.world.add(nt.Body.rectangle(new l(0,12),0,30,1,{type:r.static}));for(let t=0;t<10;++t){const n=nt.Body.rectangle(new l(.5*(t%2-.5),t),0,1,1);n.setFixedRotation(!0),e.world.add(n)}new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const i=new st;i.events.on("update",t=>{e.update(t)}),i.events.on("render",t=>{n.update(t.delta)}),i.runRender(),this.engine=e,this.runner=i,this.render=n}}Br.options={name:"Fixed rotation",fileName:"FixedRotation",info:"",sort:0};class Nr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40});e.world.add(nt.Body.rectangle(new l(0,5),0,30,1,{type:r.static})),e.world.addBody(nt.Body.rectangle(new l(-10,0),0,1,1)),e.world.addBody(nt.Body.polygon(new l(-8,0),3,.3,{},{radius:.3})),e.world.addBody(nt.Body.polygon(new l(-6,0),5,.5,{},{radius:.1})),e.world.addBody(nt.Body.polygon(new l(-4,0),8,.7)),e.world.addBody(nt.Body.ellipse(new l(-2,0),.8,.5,6,{},{radius:.1})),e.world.addBody(nt.Body.capsule(new l(0,0),0,1,.5)),e.world.addBody(nt.Body.circle(new l(2,0),.6));const i=new b({position:new l(4,0)});i.addShape(nt.Shape.rectangle(1.5,.3)),i.addShape(nt.Shape.rectangle(.3,1.5)),e.world.add(i);const s=nt.Body.fromVertices(new l(6,0),[new l(0,-1),new l(.8,.2),new l(.2,-.2),new l(.2,1),new l(-.2,1),new l(-.2,-.2),new l(-.8,.2)]);e.world.add(s);const a=new b({position:new l(9,0)});a.addShape(nt.Shape.rectangle(.2,1.5),new l(1.4,0)),a.addShape(nt.Shape.rectangle(.2,1.5),new l(-1.4,0)),a.addShape(nt.Shape.rectangle(3,.2),new l(0,.75)),e.world.add(a);for(let t=0;t<4;++t)for(let n=0;n<3;++n)e.world.add(nt.Body.circle(new l(8+t/3*2+.05*(n%2-.5),.5*-n),.25));new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const h=new st;h.events.on("update",t=>{e.update(t)}),h.events.on("render",t=>{n.update(t.delta)}),h.runRender(),this.engine=e,this.runner=h,this.render=n}}Nr.options={name:"Shapes",fileName:"Shapes",info:"",sort:0};class Lr extends lt{constructor(t){super(t);const e=new X;e.sleeping.setType(o.NO_SLEEPING);const n=new rr(e,{element:t,width:t.clientWidth,height:t.clientHeight,scale:40,showConstraints:!0});e.world.add(nt.Body.capsule(new l(0,15),0,30,.5,{type:r.static}),nt.Body.capsule(new l(0,-15),0,30,.5,{type:r.static}),nt.Body.capsule(new l(15,0),.5*Math.PI,30,.5,{type:r.static}),nt.Body.capsule(new l(-15,0),.5*Math.PI,30,.5,{type:r.static}));const i=new b({position:new l(-10,-10)});i.addShape(nt.Shape.rectangle(8,.8)),i.addShape(nt.Shape.rectangle(.8,8)),e.world.add(i),e.world.add(new tt({bodyA:i,pointB:new l(-10,-10),stiffness:1})),e.world.add(nt.Body.rectangle(new l(-7,-12),0,1,1));const s=nt.Body.rectangle(new l(-2,-7),0,1,1);e.world.add(s),e.world.add(new tt({bodyA:s,pointA:new l(.2,.2),pointB:new l(-2,-10),stiffness:.001}));const a=nt.Body.rectangle(new l(2,-7),0,1,1);e.world.add(a),e.world.add(new tt({bodyA:a,pointA:new l(-.3,0),pointB:new l(0,-10),stiffness:.1})),e.world.add(new tt({bodyA:a,pointA:new l(.3,0),pointB:new l(4,-10),stiffness:.1}));const h=nt.Body.polygon(new l(5,-5),6,.7);e.world.add(h),e.world.add(new tt({bodyA:h,pointB:new l(5,-10),stiffness:.001,damping:.1}));const u=nt.Body.rectangle(new l(0,0),0,.8,10);e.world.add(u),u.velocity.set(.1,0),e.world.add(new tt({bodyA:u,pointA:new l(0,-4.5),pointB:new l(0,-4.5),stiffness:.5}));const c=nt.Body.rectangle(new l(0,13),0,12,.8);e.world.add(c),e.world.add(new tt({bodyA:c,pointB:new l(0,13),stiffness:1})),e.world.add(nt.Body.rectangle(new l(-5,10),0,.9,.9),nt.Body.rectangle(new l(-5,11),0,.9,.9),nt.Body.rectangle(new l(-5,12),0,.9,.9),nt.Body.rectangle(new l(5,10),0,.9,.9),nt.Body.rectangle(new l(5,11),0,.9,.9),nt.Body.rectangle(new l(5,12),0,.9,.9)),new it(e,n.mouse,[new tt({stiffness:.001,damping:.02})]);const d=new st;d.events.on("update",t=>{e.update(t)}),d.events.on("render",t=>{n.update(t.delta)}),d.runRender(),this.engine=e,this.runner=d,this.render=n}}Lr.options={name:"Constraints",fileName:"Constraints",info:"",sort:0};const Fr=[sr,or,ar,hr,ur,lr,cr,dr,pr,fr,mr,yr,vr,gr,_r,br,xr,Ar,wr,Tr,Er,Sr,Ir,Or,Cr,Pr,Mr,Rr,Dr,Br,Nr,Lr],Gr=new Map;for(const t of Fr)Gr.set(t.options.name,t);Fr.sort((t,e)=>t.options.sort-e.options.sort||(t.options.name<e.options.name?-1:1));const Ur=new ut(Fr,Gr.get("Bridge"))},function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},r=0;r<e.length;r++){var s=e[r],o=s[0],a={id:t+":"+r,css:s[1],media:s[2],sourceMap:s[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}n.r(e),n.d(e,"default",(function(){return p}));var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=r&&(document.head||document.getElementsByTagName("head")[0]),a=null,h=0,u=!1,l=function(){},c=null,d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,n,r){u=n,c=r||{};var o=i(t,e);return f(o),function(e){for(var n=[],r=0;r<o.length;r++){var a=o[r];(h=s[a.id]).refs--,n.push(h)}e?f(o=i(t,e)):o=[];for(r=0;r<n.length;r++){var h;if(0===(h=n[r]).refs){for(var u=0;u<h.parts.length;u++)h.parts[u]();delete s[h.id]}}}}function f(t){for(var e=0;e<t.length;e++){var n=t[e],i=s[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(y(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(y(n.parts[r]));s[n.id]={id:n.id,refs:1,parts:o}}}}function m(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function y(t){var e,n,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(u)return l;i.parentNode.removeChild(i)}if(d){var r=h++;i=a||(a=m()),e=_.bind(null,i,r,!1),n=_.bind(null,i,r,!0)}else i=m(),e=b.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var v,g=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function b(t,e){var n=e.css,i=e.media,r=e.sourceMap;if(i&&t.setAttribute("media",i),c.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}]);